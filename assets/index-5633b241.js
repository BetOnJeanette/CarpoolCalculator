(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const sharedConfig={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return getContextId(this.context.count)},getNextContextId(){return getContextId(this.context.count++)}};function getContextId(e){const t=String(e),n=t.length-1;return sharedConfig.context.id+(n?String.fromCharCode(96+n):"")+t}function setHydrateContext(e){sharedConfig.context=e}const equalFn=(e,t)=>e===t,$PROXY=Symbol("solid-proxy"),SUPPORTS_PROXY=typeof Proxy=="function",$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null},NO_INIT={};var Owner=null;let Transition=null,ExternalSourceConfig=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot(e,t){const n=Listener,r=Owner,o=e.length===0,s=t===void 0?r:t,i=o?UNOWNED:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=o?e:()=>e(()=>untrack(()=>cleanNode(i)));Owner=i,Listener=null;try{return runUpdates(a,!0)}finally{Listener=n,Owner=r}}function createSignal(e,t){t=t?Object.assign({},signalOptions,t):signalOptions;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),writeSignal(n,o));return[readSignal.bind(n),r]}function createComputed(e,t,n){const r=createComputation(e,t,!0,STALE);updateComputation(r)}function createRenderEffect(e,t,n){const r=createComputation(e,t,!1,STALE);updateComputation(r)}function createEffect(e,t,n){runEffects=runUserEffects;const r=createComputation(e,t,!1,STALE);(!n||!n.render)&&(r.user=!0),Effects?Effects.push(r):updateComputation(r)}function createMemo(e,t,n){n=n?Object.assign({},signalOptions,n):signalOptions;const r=createComputation(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,updateComputation(r),readSignal.bind(r)}function isPromise(e){return e&&typeof e=="object"&&"then"in e}function createResource(e,t,n){let r,o,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,o=e,s=t||{}):(r=e,o=t,s=n||{});let i=null,a=NO_INIT,l=null,c=!1,u="initialValue"in s,d=typeof r=="function"&&createMemo(r);const h=new Set,[p,f]=(s.storage||createSignal)(s.initialValue),[y,m]=createSignal(void 0),[b,g]=createSignal(void 0,{equals:!1}),[w,S]=createSignal(u?"ready":"unresolved");sharedConfig.context&&(l=sharedConfig.getNextContextId(),s.ssrLoadFrom==="initial"?a=s.initialValue:sharedConfig.load&&sharedConfig.has(l)&&(a=sharedConfig.load(l)));function x(P,E,$,A){return i===P&&(i=null,A!==void 0&&(u=!0),(P===a||E===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(A,{value:E})),a=NO_INIT,v(E,$)),E}function v(P,E){runUpdates(()=>{E===void 0&&f(()=>P),S(E!==void 0?"errored":u?"ready":"unresolved"),m(E);for(const $ of h.keys())$.decrement();h.clear()},!1)}function _(){const P=SuspenseContext,E=p(),$=y();if($!==void 0&&!i)throw $;return Listener&&!Listener.user&&P&&createComputed(()=>{b(),i&&(P.resolved||h.has(P)||(P.increment(),h.add(P)))}),E}function C(P=!0){if(P!==!1&&c)return;c=!1;const E=d?d():r;if(E==null||E===!1){x(i,untrack(p));return}const $=a!==NO_INIT?a:untrack(()=>o(E,{value:p(),refetching:P}));return isPromise($)?(i=$,"value"in $?($.status==="success"?x(i,$.value,void 0,E):x(i,void 0,castError($.value),E),$):(c=!0,queueMicrotask(()=>c=!1),runUpdates(()=>{S(u?"refreshing":"pending"),g()},!1),$.then(A=>x($,A,void 0,E),A=>x($,void 0,castError(A),E)))):(x(i,$,void 0,E),$)}return Object.defineProperties(_,{state:{get:()=>w()},error:{get:()=>y()},loading:{get(){const P=w();return P==="pending"||P==="refreshing"}},latest:{get(){if(!u)return _();const P=y();if(P&&!i)throw P;return p()}}}),d?createComputed(()=>C(!1)):C(!1),[_,{refetch:C,mutate:f}]}function batch(e){return runUpdates(e,!1)}function untrack(e){if(Listener===null)return e();const t=Listener;Listener=null;try{return e()}finally{Listener=t}}function on(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return i=>{let a;if(r){a=Array(e.length);for(let c=0;c<e.length;c++)a[c]=e[c]()}else a=e();if(s)return s=!1,i;const l=untrack(()=>t(a,o,i));return o=a,l}}function onMount(e){createEffect(()=>untrack(e))}function onCleanup(e){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[e]:Owner.cleanups.push(e)),e}function getOwner(){return Owner}function runWithOwner(e,t){const n=Owner,r=Listener;Owner=e,Listener=null;try{return runUpdates(t,!0)}catch(o){handleError(o)}finally{Owner=n,Listener=r}}function createContext(e,t){const n=Symbol("context");return{id:n,Provider:createProvider(n),defaultValue:e}}function useContext(e){let t;return Owner&&Owner.context&&(t=Owner.context[e.id])!==void 0?t:e.defaultValue}function children(e){const t=createMemo(e),n=createMemo(()=>resolveChildren(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let SuspenseContext;function readSignal(){if(this.sources&&this.state)if(this.state===STALE)updateComputation(this);else{const e=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=e}if(Listener){const e=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(e)):(Listener.sources=[this],Listener.sourceSlots=[e]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&runUpdates(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=Transition&&Transition.running;i&&Transition.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?Updates.push(s):Effects.push(s),s.observers&&markDownstream(s)),i||(s.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),t}function updateComputation(e){if(!e.fn)return;cleanNode(e);const t=ExecCount;runComputation(e,e.value,t)}function runComputation(e,t,n){let r;const o=Owner,s=Listener;Listener=Owner=e;try{r=e.fn(t)}catch(i){return e.pure&&(e.state=STALE,e.owned&&e.owned.forEach(cleanNode),e.owned=null),e.updatedAt=n+1,handleError(i)}finally{Listener=s,Owner=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?writeSignal(e,r):e.value=r,e.updatedAt=n)}function createComputation(e,t,n,r=STALE,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Owner,context:Owner?Owner.context:null,pure:n};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(s):Owner.owned=[s]),s}function runTop(e){if(e.state===0)return;if(e.state===PENDING)return lookUpstream(e);if(e.suspense&&untrack(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ExecCount);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===STALE)updateComputation(e);else if(e.state===PENDING){const r=Updates;Updates=null,runUpdates(()=>lookUpstream(e,t[0]),!1),Updates=r}}function runUpdates(e,t){if(Updates)return e();let n=!1;t||(Updates=[]),Effects?n=!0:Effects=[],ExecCount++;try{const r=e();return completeUpdates(n),r}catch(r){n||(Effects=null),Updates=null,handleError(r)}}function completeUpdates(e){if(Updates&&(runQueue(Updates),Updates=null),e)return;const t=Effects;Effects=null,t.length&&runUpdates(()=>runEffects(t),!1)}function runQueue(e){for(let t=0;t<e.length;t++)runTop(e[t])}function runUserEffects(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:runTop(r)}if(sharedConfig.context){if(sharedConfig.count){sharedConfig.effects||(sharedConfig.effects=[]),sharedConfig.effects.push(...e.slice(0,n));return}setHydrateContext()}for(sharedConfig.effects&&(sharedConfig.done||!sharedConfig.count)&&(e=[...sharedConfig.effects,...e],n+=sharedConfig.effects.length,delete sharedConfig.effects),t=0;t<n;t++)runTop(e[t])}function lookUpstream(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===STALE?r!==t&&(!r.updatedAt||r.updatedAt<ExecCount)&&runTop(r):o===PENDING&&lookUpstream(r,t)}}}function markDownstream(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=PENDING,n.pure?Updates.push(n):Effects.push(n),n.observers&&markDownstream(n))}}function cleanNode(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)cleanNode(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)cleanNode(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function castError(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function handleError(e,t=Owner){throw castError(e)}function resolveChildren(e){if(typeof e=="function"&&!e.length)return resolveChildren(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=resolveChildren(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function createProvider(e,t){return function(r){let o;return createRenderEffect(()=>o=untrack(()=>(Owner.context={...Owner.context,[e]:r.value},children(()=>r.children))),void 0),o}}const FALLBACK$1=Symbol("fallback");function dispose$1(e){for(let t=0;t<e.length;t++)e[t]()}function mapArray(e,t,n={}){let r=[],o=[],s=[],i=0,a=t.length>1?[]:null;return onCleanup(()=>dispose$1(s)),()=>{let l=e()||[],c=l.length,u,d;return l[$TRACK],untrack(()=>{let p,f,y,m,b,g,w,S,x;if(c===0)i!==0&&(dispose$1(s),s=[],r=[],o=[],i=0,a&&(a=[])),n.fallback&&(r=[FALLBACK$1],o[0]=createRoot(v=>(s[0]=v,n.fallback())),i=1);else if(i===0){for(o=new Array(c),d=0;d<c;d++)r[d]=l[d],o[d]=createRoot(h);i=c}else{for(y=new Array(c),m=new Array(c),a&&(b=new Array(c)),g=0,w=Math.min(i,c);g<w&&r[g]===l[g];g++);for(w=i-1,S=c-1;w>=g&&S>=g&&r[w]===l[S];w--,S--)y[S]=o[w],m[S]=s[w],a&&(b[S]=a[w]);for(p=new Map,f=new Array(S+1),d=S;d>=g;d--)x=l[d],u=p.get(x),f[d]=u===void 0?-1:u,p.set(x,d);for(u=g;u<=w;u++)x=r[u],d=p.get(x),d!==void 0&&d!==-1?(y[d]=o[u],m[d]=s[u],a&&(b[d]=a[u]),d=f[d],p.set(x,d)):s[u]();for(d=g;d<c;d++)d in y?(o[d]=y[d],s[d]=m[d],a&&(a[d]=b[d],a[d](d))):o[d]=createRoot(h);o=o.slice(0,i=c),r=l.slice(0)}return o});function h(p){if(s[d]=p,a){const[f,y]=createSignal(d);return a[d]=y,t(l[d],f)}return t(l[d])}}}function createComponent(e,t){return untrack(()=>e(t||{}))}function trueFn(){return!0}const propTraps={get(e,t,n){return t===$PROXY?n:e.get(t)},has(e,t){return t===$PROXY?!0:e.has(t)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:trueFn,deleteProperty:trueFn}},ownKeys(e){return e.keys()}};function resolveSource(e){return(e=typeof e=="function"?e():e)?e:{}}function resolveSources(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function mergeProps(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&$PROXY in a,e[i]=typeof a=="function"?(t=!0,createMemo(a)):a}if(SUPPORTS_PROXY&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const l=resolveSource(e[a])[i];if(l!==void 0)return l}},has(i){for(let a=e.length-1;a>=0;a--)if(i in resolveSource(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(resolveSource(e[a])));return[...new Set(i)]}},propTraps);const n={},r=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const d=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=d.get?{enumerable:!0,configurable:!0,get:resolveSources.bind(n[u]=[d.get.bind(a)])}:d.value!==void 0?d:void 0;else{const h=n[u];h&&(d.get?h.push(d.get.bind(a)):d.value!==void 0&&h.push(()=>d.value))}}}const o={},s=Object.keys(r);for(let i=s.length-1;i>=0;i--){const a=s[i],l=r[a];l&&l.get?Object.defineProperty(o,a,l):o[a]=l?l.value:void 0}return o}function splitProps(e,...t){if(SUPPORTS_PROXY&&$PROXY in e){const o=new Set(t.length>1?t.flat():t[0]),s=t.map(i=>new Proxy({get(a){return i.includes(a)?e[a]:void 0},has(a){return i.includes(a)&&a in e},keys(){return i.filter(a=>a in e)}},propTraps));return s.push(new Proxy({get(i){return o.has(i)?void 0:e[i]},has(i){return o.has(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!o.has(i))}},propTraps)),s}const n={},r=t.map(()=>({}));for(const o of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,o),i=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let a=!1,l=0;for(const c of t)c.includes(o)&&(a=!0,i?r[l][o]=s.value:Object.defineProperty(r[l],o,s)),++l;a||(i?n[o]=s.value:Object.defineProperty(n,o,s))}return[...r,n]}function lazy(e){let t,n;const r=o=>{const s=sharedConfig.context;if(s){const[a,l]=createSignal();sharedConfig.count||(sharedConfig.count=0),sharedConfig.count++,(n||(n=e())).then(c=>{!sharedConfig.done&&setHydrateContext(s),sharedConfig.count--,l(()=>c.default),setHydrateContext()}),t=a}else if(!t){const[a]=createResource(()=>(n||(n=e())).then(l=>l.default));t=a}let i;return createMemo(()=>(i=t())?untrack(()=>{if(!s||sharedConfig.done)return i(o);const a=sharedConfig.context;setHydrateContext(s);const l=i(o);return setHydrateContext(a),l}):"")};return r.preload=()=>n||((n=e()).then(o=>t=()=>o.default),n),r}let counter=0;function createUniqueId(){return sharedConfig.context?sharedConfig.getNextContextId():`cl-${counter++}`}const narrowedError=e=>`Stale read from <${e}>.`;function For(e){const t="fallback"in e&&{fallback:()=>e.fallback};return createMemo(mapArray(()=>e.each,e.children,t||void 0))}function Show(e){const t=e.keyed,n=createMemo(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return createMemo(()=>{const r=n();if(r){const o=e.children;return typeof o=="function"&&o.length>0?untrack(()=>o(t?r:()=>{if(!untrack(n))throw narrowedError("Show");return e.when})):o}return e.fallback},void 0,void 0)}function Switch(e){let t=!1;const n=(s,i)=>(t?s[1]===i[1]:!s[1]==!i[1])&&s[2]===i[2],r=children(()=>e.children),o=createMemo(()=>{let s=r();Array.isArray(s)||(s=[s]);for(let i=0;i<s.length;i++){const a=s[i].when;if(a)return t=!!s[i].keyed,[i,a,s[i]]}return[-1]},void 0,{equals:n});return createMemo(()=>{const[s,i,a]=o();if(s<0)return e.fallback;const l=a.children;return typeof l=="function"&&l.length>0?untrack(()=>l(t?i:()=>{if(untrack(o)[0]!==s)throw narrowedError("Match");return a.when})):l},void 0,void 0)}function Match(e){return e}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function getPropAlias(e,t){const n=PropAliases[e];return typeof n=="object"?n[t]?n.$:void 0:n}const DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),SVGElements=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),SVGNamespace={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function reconcileArrays(e,t,n){let r=n.length,o=t.length,s=r,i=0,a=0,l=t[o-1].nextSibling,c=null;for(;i<o||a<s;){if(t[i]===n[a]){i++,a++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const u=s<r?a?n[a-1].nextSibling:n[s-a]:l;for(;a<s;)e.insertBefore(n[a++],u)}else if(s===a)for(;i<o;)(!c||!c.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[a]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[a++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!c){c=new Map;let d=a;for(;d<s;)c.set(n[d],d++)}const u=c.get(t[i]);if(u!=null)if(a<u&&u<s){let d=i,h=1,p;for(;++d<o&&d<s&&!((p=c.get(t[d]))==null||p!==u+h);)h++;if(h>u-a){const f=t[i];for(;a<u;)e.insertBefore(n[a++],f)}else e.replaceChild(n[a++],t[i++])}else i++;else t[i++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render(e,t,n,r={}){let o;return createRoot(s=>{o=s,t===document?e():insert(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function template(e,t,n){let r;const o=()=>{const i=document.createElement("template");return i.innerHTML=e,n?i.content.firstChild.firstChild:i.content.firstChild},s=t?()=>untrack(()=>document.importNode(r||(r=o()),!0)):()=>(r||(r=o())).cloneNode(!0);return s.cloneNode=s,s}function delegateEvents(e,t=window.document){const n=t[$$EVENTS]||(t[$$EVENTS]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,eventHandler))}}function setAttribute(e,t,n){isHydrating(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function setAttributeNS(e,t,n,r){isHydrating(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function setBoolAttribute(e,t,n){isHydrating(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function className(e,t){isHydrating(e)||(t==null?e.removeAttribute("class"):e.className=t)}function addEventListener(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function classList(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,i;for(s=0,i=o.length;s<i;s++){const a=o[s];!a||a==="undefined"||t[a]||(toggleClassKey(e,a,!1),delete n[a])}for(s=0,i=r.length;s<i;s++){const a=r[s],l=!!t[a];!a||a==="undefined"||n[a]===l||!l||(toggleClassKey(e,a,!0),n[a]=l)}return n}function style$1(e,t,n){if(!t)return n?setAttribute(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function spread$1(e,t={},n,r){const o={};return r||createRenderEffect(()=>o.children=insertExpression(e,t.children,o.children)),createRenderEffect(()=>typeof t.ref=="function"&&use(t.ref,e)),createRenderEffect(()=>assign(e,t,n,!0,o,!0)),o}function use(e,t,n){return untrack(()=>e(t,n))}function insert(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return insertExpression(e,t,r,n);createRenderEffect(o=>insertExpression(e,t(),o,n),r)}function assign(e,t,n,r,o={},s=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;o[i]=assignProp(e,i,null,o[i],n,s,t)}for(const i in t){if(i==="children"){r||insertExpression(e,t.children);continue}const a=t[i];o[i]=assignProp(e,i,a,o[i],n,s,t)}}function getNextElement(e){let t,n;return!isHydrating()||!(t=sharedConfig.registry.get(n=getHydrationKey()))?e():(sharedConfig.completed&&sharedConfig.completed.add(t),sharedConfig.registry.delete(n),t)}function isHydrating(e){return!!sharedConfig.context&&!sharedConfig.done&&(!e||e.isConnected)}function toPropertyName(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function toggleClassKey(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function assignProp(e,t,n,r,o,s,i){let a,l,c,u,d;if(t==="style")return style$1(e,n,r);if(t==="classList")return classList(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);r&&e.removeEventListener(h,r,typeof r!="function"&&r),n&&e.addEventListener(h,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);r&&e.removeEventListener(h,r,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),p=DelegatedEvents.has(h);if(!p&&r){const f=Array.isArray(r)?r[0]:r;e.removeEventListener(h,f)}(p||n)&&(addEventListener(e,h,n,p),p&&delegateEvents([h]))}else if(t.slice(0,5)==="attr:")setAttribute(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")setBoolAttribute(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(c=ChildProperties.has(t))||!o&&((u=getPropAlias(t,e.tagName))||(l=Properties.has(t)))||(a=e.nodeName.includes("-")||"is"in i)){if(d)t=t.slice(5),l=!0;else if(isHydrating(e))return n;t==="class"||t==="className"?className(e,n):a&&!l&&!c?e[toPropertyName(t)]=n:e[u||t]=n}else{const h=o&&t.indexOf(":")>-1&&SVGNamespace[t.split(":")[0]];h?setAttributeNS(e,h,t,n):setAttribute(e,Aliases[t]||t,n)}return n}function eventHandler(e){if(sharedConfig.registry&&sharedConfig.events&&sharedConfig.events.find(([l,c])=>c===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),i=()=>{const l=t[n];if(l&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),sharedConfig.registry&&!sharedConfig.done&&(sharedConfig.done=_$HY.done=!0),e.composedPath){const l=e.composedPath();s(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!i());c++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();s(r)}function insertExpression(e,t,n,r,o){const s=isHydrating(e);if(s){!n&&(n=[...e.childNodes]);let l=[];for(let c=0;c<n.length;c++){const u=n[c];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():l.push(u)}n=l}for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(s||i==="number"&&(t=t.toString(),t===n))return n;if(a){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=cleanChildren(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean"){if(s)return n;n=cleanChildren(e,n,r)}else{if(i==="function")return createRenderEffect(()=>{let l=t();for(;typeof l=="function";)l=l();n=insertExpression(e,l,n,r)}),()=>n;if(Array.isArray(t)){const l=[],c=n&&Array.isArray(n);if(normalizeIncomingArray(l,t,n,o))return createRenderEffect(()=>n=insertExpression(e,l,n,r,!0)),()=>n;if(s){if(!l.length)return n;if(r===void 0)return n=[...e.childNodes];let u=l[0];if(u.parentNode!==e)return n;const d=[u];for(;(u=u.nextSibling)!==r;)d.push(u);return n=d}if(l.length===0){if(n=cleanChildren(e,n,r),a)return n}else c?n.length===0?appendNodes(e,l,r):reconcileArrays(e,n,l):(n&&cleanChildren(e),appendNodes(e,l));n=l}else if(t.nodeType){if(s&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=cleanChildren(e,n,r,t);cleanChildren(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function normalizeIncomingArray(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let a=t[s],l=n&&n[e.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))o=normalizeIncomingArray(e,a,l)||o;else if(c==="function")if(r){for(;typeof a=="function";)a=a();o=normalizeIncomingArray(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||o}else e.push(a),o=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?e.push(l):e.push(document.createTextNode(u))}}return o}function appendNodes(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function cleanChildren(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(o!==a){const l=a.parentNode===e;!s&&!i?l?e.replaceChild(o,a):e.insertBefore(o,n):l&&a.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}function getHydrationKey(){return sharedConfig.getNextContextId()}const SVG_NAMESPACE="http://www.w3.org/2000/svg";function createElement(e,t=!1){return t?document.createElementNS(SVG_NAMESPACE,e):document.createElement(e)}function Portal(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,o=getOwner();let s,i=!!sharedConfig.context;return createEffect(()=>{i&&(getOwner().user=i=!1),s||(s=runWithOwner(o,()=>createMemo(()=>e.children)));const a=r();if(a instanceof HTMLHeadElement){const[l,c]=createSignal(!1),u=()=>c(!0);createRoot(d=>insert(a,()=>l()?d():s(),null)),onCleanup(u)}else{const l=createElement(e.isSVG?"g":"div",e.isSVG),c=t&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return n.parentNode},configurable:!0}),insert(c,s),a.appendChild(l),e.ref&&e.ref(l),onCleanup(()=>a.removeChild(l))}},void 0,{render:!i}),n}function Dynamic(e){const[t,n]=splitProps(e,["component"]),r=createMemo(()=>t.component);return createMemo(()=>{const o=r();switch(typeof o){case"function":return untrack(()=>o(n));case"string":const s=SVGElements.has(o),i=sharedConfig.context?getNextElement():createElement(o,s);return spread$1(i,n,s),i}})}const index="",scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=assetsURL(s),s in seen)return;seen[s]=!0;const i=s.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!r)for(let u=o.length-1;u>=0;u--){const d=o[u];if(d.href===s&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":scriptRel,i||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),i)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s})};var _tmpl$2$3=template("<div>"),_tmpl$3=template("<div class=solid-select-control>"),_tmpl$4=template("<div class=solid-select-placeholder>"),_tmpl$5=template("<div class=solid-select-single-value>"),_tmpl$6=template("<div class=solid-select-multi-value><span></span><button type=button class=solid-select-multi-value-remove>⨯"),_tmpl$7=template("<input class=solid-select-input type=text tabindex=0 autocomplete=off autocapitalize=none autocorrect=off size=1>"),_tmpl$8=template("<div class=solid-select-list>"),_tmpl$9=template("<div class=solid-select-list-placeholder>"),_tmpl$10=template("<div class=solid-select-option>"),createSelect=e=>{const t=mergeProps({multiple:!1,disabled:!1,optionToValue:O=>O,isOptionDisabled:O=>!1},e),n=O=>{if(t.multiple&&Array.isArray(O))return O;if(!t.multiple&&!Array.isArray(O))return O!==null?[O]:[];throw new Error(`Incompatible value type for ${t.multiple?"multple":"single"} select.`)},[r,o]=createSignal(t.initialValue!==void 0?n(t.initialValue):[]),s=()=>t.multiple?r():r()[0]||null,i=O=>o(n(O)),a=()=>o([]),l=()=>!!(t.multiple?s().length:s());createEffect(on(r,()=>t.onChange?.(s()),{defer:!0}));const[c,u]=createSignal(""),d=()=>u(""),h=()=>!!c().length;createEffect(on(c,O=>t.onInput?.(O),{defer:!0})),createEffect(on(c,O=>{O&&!g()&&w(!0)},{defer:!0}));const p=typeof t.options=="function"?createMemo(()=>t.options(c()),t.options(c())):()=>t.options,f=()=>p().length,y=O=>{if(t.isOptionDisabled(O))return;const I=t.optionToValue(O);t.multiple?i([...r(),I]):(i(I),b(!1)),w(!1)},[m,b]=createSignal(!1),[g,w]=createSignal(!1),S=()=>w(!g()),[x,v]=createSignal(-1),_=()=>p()[x()],C=O=>O===_(),P=O=>{f()||v(-1);const I=f()-1,M=O==="next"?1:-1;let B=x()+M;B>I&&(B=0),B<0&&(B=I),v(B)},E=()=>P("previous"),$=()=>P("next");createEffect(on(p,O=>{g()&&v(Math.min(0,O.length-1))},{defer:!0})),createEffect(on(()=>t.disabled,O=>{O&&g()&&w(!1)})),createEffect(on(g,O=>{O?(x()===-1&&$(),b(!0)):(x()>-1&&v(-1),u(""))},{defer:!0})),createEffect(on(x,O=>{O>-1&&!g()&&w(!0)},{defer:!0}));const A=()=>b(!0),k=()=>{b(!1),w(!1)},R=O=>O.preventDefault(),D=O=>{!t.disabled&&!h()&&S()},L=O=>{u(O.target.value)},N=O=>{switch(O.key){case"ArrowDown":$();break;case"ArrowUp":E();break;case"Enter":if(g()&&_()){y(_());break}return;case"Escape":if(g()){w(!1);break}return;case"Delete":case"Backspace":if(c())return;if(t.multiple){const I=s();i([...I.slice(0,-1)])}else a();break;case" ":if(c())return;g()?_()&&y(_()):w(!0);break;case"Tab":if(_()&&g()){y(_());break}return;default:return}O.preventDefault(),O.stopPropagation()};return{options:p,value:s,setValue:i,hasValue:l,clearValue:a,inputValue:c,setInputValue:u,hasInputValue:h,clearInputValue:d,isOpen:g,setIsOpen:w,toggleOpen:S,isActive:m,setIsActive:b,get multiple(){return t.multiple},get disabled(){return t.disabled},pickOption:y,isOptionFocused:C,isOptionDisabled:t.isOptionDisabled,onFocusIn:A,onFocusOut:k,onMouseDown:R,onClick:D,onInput:L,onKeyDown:N}},createAsyncOptions=(e,t=250)=>{const[n,r]=createSignal(""),o=throttle$1(e,t),[s]=createResource(n,o,{initialValue:[]});return{get options(){return s()},get loading(){return s.loading},onInput:r,readonly:!1}},throttle$1=(e,t)=>{let n=null,r,o;const s=()=>new Promise(l=>r=setTimeout(l,t)),i=(...l)=>(o=l,n||(n=s().then(()=>(n=null,e(...o))),n)),a=()=>{clearTimeout(r),n=null};return getOwner()&&onCleanup(a),Object.assign(i,{clear:a})},SelectContext$1=createContext(),useSelect=()=>{const e=useContext(SelectContext$1);if(!e)throw new Error("No SelectContext found in ancestry.");return e},Select$1=e=>{const[t,n]=splitProps(mergeProps({format:(o,s)=>o,placeholder:"Select...",readonly:typeof e.options!="function",loading:!1,loadingPlaceholder:"Loading...",emptyPlaceholder:"No options"},e),["options","optionToValue","isOptionDisabled","multiple","disabled","onInput","onChange"]),r=createSelect(t);return createEffect(on(()=>n.initialValue,o=>o!==void 0&&r.setValue(o))),createComponent(SelectContext$1.Provider,{value:r,get children(){return createComponent(Container,{get class(){return n.class},get children(){return[createComponent(Control,{get id(){return n.id},get name(){return n.name},get format(){return n.format},get placeholder(){return n.placeholder},get autofocus(){return n.autofocus},get readonly(){return n.readonly},ref(o){var s=e.ref;typeof s=="function"?s(o):e.ref=o}}),createComponent(List,{get loading(){return n.loading},get loadingPlaceholder(){return n.loadingPlaceholder},get emptyPlaceholder(){return n.emptyPlaceholder},get format(){return n.format}})]}})}})},Container=e=>{const t=useSelect();return(()=>{var n=_tmpl$2$3();return n.$$mousedown=r=>{t.onMouseDown(r),r.currentTarget.getElementsByTagName("input")[0].focus()},addEventListener(n,"focusout",t.onFocusOut,!0),addEventListener(n,"focusin",t.onFocusIn,!0),insert(n,()=>e.children),createRenderEffect(r=>{var o=`solid-select-container ${e.class!==void 0?e.class:""}`,s=t.disabled;return o!==r.e&&className(n,r.e=o),s!==r.t&&setAttribute(n,"data-disabled",r.t=s),r},{e:void 0,t:void 0}),n})()},Control=e=>{const t=useSelect(),n=r=>{const o=t.value();t.setValue([...o.slice(0,r),...o.slice(r+1)])};return(()=>{var r=_tmpl$3();return addEventListener(r,"click",t.onClick,!0),insert(r,createComponent(Show,{get when(){return createMemo(()=>!t.hasValue())()&&!t.hasInputValue()},get children(){return createComponent(Placeholder,{get children(){return e.placeholder}})}}),null),insert(r,createComponent(Show,{get when(){return createMemo(()=>!!(t.hasValue()&&!t.multiple))()&&!t.hasInputValue()},get children(){return createComponent(SingleValue,{get children(){return e.format(t.value(),"value")}})}}),null),insert(r,createComponent(Show,{get when(){return t.hasValue()&&t.multiple},get children(){return createComponent(For,{get each(){return t.value()},children:(o,s)=>createComponent(MultiValue,{onRemove:()=>n(s()),get children(){return e.format(o,"value")}})})}}),null),insert(r,createComponent(Input,{get id(){return e.id},get name(){return e.name},get autofocus(){return e.autofocus},get readonly(){return e.readonly},ref(o){var s=e.ref;typeof s=="function"?s(o):e.ref=o}}),null),createRenderEffect(o=>{var s=t.multiple,i=t.hasValue(),a=t.disabled;return s!==o.e&&setAttribute(r,"data-multiple",o.e=s),i!==o.t&&setAttribute(r,"data-has-value",o.t=i),a!==o.a&&setAttribute(r,"data-disabled",o.a=a),o},{e:void 0,t:void 0,a:void 0}),r})()},Placeholder=e=>(()=>{var t=_tmpl$4();return insert(t,()=>e.children),t})(),SingleValue=e=>(()=>{var t=_tmpl$5();return insert(t,()=>e.children),t})(),MultiValue=e=>(useSelect(),(()=>{var t=_tmpl$6(),n=t.firstChild,r=n.nextSibling;return insert(n,()=>e.children),r.$$click=o=>{o.stopPropagation(),e.onRemove()},t})()),Input=e=>{const t=useSelect();return(()=>{var n=_tmpl$7();n.$$mousedown=o=>{o.stopPropagation()},n.$$keydown=o=>{t.onKeyDown(o),o.defaultPrevented||o.key==="Escape"&&(o.preventDefault(),o.stopPropagation(),o.target.blur())},addEventListener(n,"input",t.onInput,!0);var r=e.ref;return typeof r=="function"?use(r,n):e.ref=n,createRenderEffect(o=>{var s=e.id,i=e.name,a=t.multiple,l=t.isActive(),c=e.autofocus,u=e.readonly,d=t.disabled;return s!==o.e&&setAttribute(n,"id",o.e=s),i!==o.t&&setAttribute(n,"name",o.t=i),a!==o.a&&setAttribute(n,"data-multiple",o.a=a),l!==o.o&&setAttribute(n,"data-is-active",o.o=l),c!==o.i&&(n.autofocus=o.i=c),u!==o.n&&(n.readOnly=o.n=u),d!==o.s&&(n.disabled=o.s=d),o},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),createRenderEffect(()=>n.value=t.inputValue()),n})()},List=e=>{const t=useSelect();return createComponent(Show,{get when(){return t.isOpen()},get children(){var n=_tmpl$8();return insert(n,createComponent(Show,{get when(){return!e.loading},get fallback(){return(()=>{var r=_tmpl$9();return insert(r,()=>e.loadingPlaceholder),r})()},get children(){return createComponent(For,{get each(){return t.options()},get fallback(){return(()=>{var r=_tmpl$9();return insert(r,()=>e.emptyPlaceholder),r})()},children:r=>createComponent(Option,{option:r,get children(){return e.format(r,"option")}})})}})),n}})},Option=e=>{const t=useSelect(),n=r=>{createEffect(()=>{t.isOptionFocused(e.option)&&r.scrollIntoView({block:"nearest"})})};return(()=>{var r=_tmpl$10();return r.$$click=()=>t.pickOption(e.option),use(n,r),insert(r,()=>e.children),createRenderEffect(o=>{var s=t.isOptionDisabled(e.option),i=t.isOptionFocused(e.option);return s!==o.e&&setAttribute(r,"data-disabled",o.e=s),i!==o.t&&setAttribute(r,"data-focused",o.t=i),o},{e:void 0,t:void 0}),r})()};delegateEvents(["focusin","focusout","mousedown","click","input","keydown"]);function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var parser$5={};parser$5.load=function(e,t,n={}){var r,o,s;for(r in t)s=t[r],n[r]=(o=e[r])!=null?o:s;return n};parser$5.overwrite=function(e,t,n={}){var r,o;for(r in e)o=e[r],t[r]!==void 0&&(n[r]=o);return n};var DLList$2;DLList$2=class{constructor(t,n){this.incr=t,this.decr=n,this._first=null,this._last=null,this.length=0}push(t){var n;this.length++,typeof this.incr=="function"&&this.incr(),n={value:t,prev:this._last,next:null},this._last!=null?(this._last.next=n,this._last=n):this._first=this._last=n}shift(){var t;if(this._first!=null)return this.length--,typeof this.decr=="function"&&this.decr(),t=this._first.value,(this._first=this._first.next)!=null?this._first.prev=null:this._last=null,t}first(){if(this._first!=null)return this._first.value}getArray(){var t,n,r;for(t=this._first,r=[];t!=null;)r.push((n=t,t=t.next,n.value));return r}forEachShift(t){var n;for(n=this.shift();n!=null;)t(n),n=this.shift()}debug(){var t,n,r,o,s;for(t=this._first,s=[];t!=null;)s.push((n=t,t=t.next,{value:n.value,prev:(r=n.prev)!=null?r.value:void 0,next:(o=n.next)!=null?o.value:void 0}));return s}};var DLList_1=DLList$2;function asyncGeneratorStep$6(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(c){n(c);return}a.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator$6(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var s=e.apply(t,n);function i(l){asyncGeneratorStep$6(s,r,o,i,a,"next",l)}function a(l){asyncGeneratorStep$6(s,r,o,i,a,"throw",l)}i(void 0)})}}var Events$3;Events$3=class{constructor(t){if(this.instance=t,this._events={},this.instance.on!=null||this.instance.once!=null||this.instance.removeAllListeners!=null)throw new Error("An Emitter already exists for this object");this.instance.on=(n,r)=>this._addListener(n,"many",r),this.instance.once=(n,r)=>this._addListener(n,"once",r),this.instance.removeAllListeners=(n=null)=>n!=null?delete this._events[n]:this._events={}}_addListener(t,n,r){var o;return(o=this._events)[t]==null&&(o[t]=[]),this._events[t].push({cb:r,status:n}),this.instance}listenerCount(t){return this._events[t]!=null?this._events[t].length:0}trigger(t,...n){var r=this;return _asyncToGenerator$6(function*(){var o,s;try{return t!=="debug"&&r.trigger("debug",`Event triggered: ${t}`,n),r._events[t]==null?void 0:(r._events[t]=r._events[t].filter(function(i){return i.status!=="none"}),s=r._events[t].map(function(){var i=_asyncToGenerator$6(function*(a){var l,c;if(a.status!=="none"){a.status==="once"&&(a.status="none");try{return c=typeof a.cb=="function"?a.cb(...n):void 0,typeof c?.then=="function"?yield c:c}catch(u){return l=u,r.trigger("error",l),null}}});return function(a){return i.apply(this,arguments)}}()),(yield Promise.all(s)).find(function(i){return i!=null}))}catch(i){return o=i,r.trigger("error",o),null}})()}};var Events_1=Events$3,DLList$1,Events$2,Queues;DLList$1=DLList_1;Events$2=Events_1;Queues=class{constructor(t){this.Events=new Events$2(this),this._length=0,this._lists=function(){var n,r,o;for(o=[],n=1,r=t;1<=r?n<=r:n>=r;1<=r?++n:--n)o.push(new DLList$1(()=>this.incr(),()=>this.decr()));return o}.call(this)}incr(){if(this._length++===0)return this.Events.trigger("leftzero")}decr(){if(--this._length===0)return this.Events.trigger("zero")}push(t){return this._lists[t.options.priority].push(t)}queued(t){return t!=null?this._lists[t].length:this._length}shiftAll(t){return this._lists.forEach(function(n){return n.forEachShift(t)})}getFirst(t=this._lists){var n,r,o;for(n=0,r=t.length;n<r;n++)if(o=t[n],o.length>0)return o;return[]}shiftLastFrom(t){return this.getFirst(this._lists.slice(t).reverse()).shift()}};var Queues_1=Queues,BottleneckError$4;BottleneckError$4=class extends Error{};var BottleneckError_1=BottleneckError$4;function asyncGeneratorStep$5(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(c){n(c);return}a.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator$5(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var s=e.apply(t,n);function i(l){asyncGeneratorStep$5(s,r,o,i,a,"next",l)}function a(l){asyncGeneratorStep$5(s,r,o,i,a,"throw",l)}i(void 0)})}}var BottleneckError$3,DEFAULT_PRIORITY,Job,NUM_PRIORITIES,parser$4;NUM_PRIORITIES=10;DEFAULT_PRIORITY=5;parser$4=parser$5;BottleneckError$3=BottleneckError_1;Job=class{constructor(t,n,r,o,s,i,a,l){this.task=t,this.args=n,this.rejectOnDrop=s,this.Events=i,this._states=a,this.Promise=l,this.options=parser$4.load(r,o),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===o.id&&(this.options.id=`${this.options.id}-${this._randomIndex()}`),this.promise=new this.Promise((c,u)=>{this._resolve=c,this._reject=u}),this.retryCount=0}_sanitizePriority(t){var n;return n=~~t!==t?DEFAULT_PRIORITY:t,n<0?0:n>NUM_PRIORITIES-1?NUM_PRIORITIES-1:n}_randomIndex(){return Math.random().toString(36).slice(2)}doDrop({error:t,message:n="This job has been dropped by Bottleneck"}={}){return this._states.remove(this.options.id)?(this.rejectOnDrop&&this._reject(t??new BottleneckError$3(n)),this.Events.trigger("dropped",{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0):!1}_assertStatus(t){var n;if(n=this._states.jobStatus(this.options.id),!(n===t||t==="DONE"&&n===null))throw new BottleneckError$3(`Invalid job status ${n}, expected ${t}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`)}doReceive(){return this._states.start(this.options.id),this.Events.trigger("received",{args:this.args,options:this.options})}doQueue(t,n){return this._assertStatus("RECEIVED"),this._states.next(this.options.id),this.Events.trigger("queued",{args:this.args,options:this.options,reachedHWM:t,blocked:n})}doRun(){return this.retryCount===0?(this._assertStatus("QUEUED"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),this.Events.trigger("scheduled",{args:this.args,options:this.options})}doExecute(t,n,r,o){var s=this;return _asyncToGenerator$5(function*(){var i,a,l;s.retryCount===0?(s._assertStatus("RUNNING"),s._states.next(s.options.id)):s._assertStatus("EXECUTING"),a={args:s.args,options:s.options,retryCount:s.retryCount},s.Events.trigger("executing",a);try{if(l=yield t!=null?t.schedule(s.options,s.task,...s.args):s.task(...s.args),n())return s.doDone(a),yield o(s.options,a),s._assertStatus("DONE"),s._resolve(l)}catch(c){return i=c,s._onFailure(i,a,n,r,o)}})()}doExpire(t,n,r){var o,s;return this._states.jobStatus(this.options.id==="RUNNING")&&this._states.next(this.options.id),this._assertStatus("EXECUTING"),s={args:this.args,options:this.options,retryCount:this.retryCount},o=new BottleneckError$3(`This job timed out after ${this.options.expiration} ms.`),this._onFailure(o,s,t,n,r)}_onFailure(t,n,r,o,s){var i=this;return _asyncToGenerator$5(function*(){var a,l;if(r())return a=yield i.Events.trigger("failed",t,n),a!=null?(l=~~a,i.Events.trigger("retry",`Retrying ${i.options.id} after ${l} ms`,n),i.retryCount++,o(l)):(i.doDone(n),yield s(i.options,n),i._assertStatus("DONE"),i._reject(t))})()}doDone(t){return this._assertStatus("EXECUTING"),this._states.next(this.options.id),this.Events.trigger("done",t)}};var Job_1=Job;function asyncGeneratorStep$4(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(c){n(c);return}a.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator$4(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var s=e.apply(t,n);function i(l){asyncGeneratorStep$4(s,r,o,i,a,"next",l)}function a(l){asyncGeneratorStep$4(s,r,o,i,a,"throw",l)}i(void 0)})}}var BottleneckError$2,LocalDatastore,parser$3;parser$3=parser$5;BottleneckError$2=BottleneckError_1;LocalDatastore=class{constructor(t,n,r){this.instance=t,this.storeOptions=n,this.clientId=this.instance._randomIndex(),parser$3.load(r,r,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}_startHeartbeat(){var t;return this.heartbeat==null&&(this.storeOptions.reservoirRefreshInterval!=null&&this.storeOptions.reservoirRefreshAmount!=null||this.storeOptions.reservoirIncreaseInterval!=null&&this.storeOptions.reservoirIncreaseAmount!=null)?typeof(t=this.heartbeat=setInterval(()=>{var n,r,o,s,i;if(s=Date.now(),this.storeOptions.reservoirRefreshInterval!=null&&s>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=s,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),this.storeOptions.reservoirIncreaseInterval!=null&&s>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval){var a=this.storeOptions;if(n=a.reservoirIncreaseAmount,o=a.reservoirIncreaseMaximum,i=a.reservoir,this._lastReservoirIncrease=s,r=o!=null?Math.min(n,o-i):n,r>0)return this.storeOptions.reservoir+=r,this.instance._drainAll(this.computeCapacity())}},this.heartbeatInterval)).unref=="function"?t.unref():void 0:clearInterval(this.heartbeat)}__publish__(t){var n=this;return _asyncToGenerator$4(function*(){return yield n.yieldLoop(),n.instance.Events.trigger("message",t.toString())})()}__disconnect__(t){var n=this;return _asyncToGenerator$4(function*(){return yield n.yieldLoop(),clearInterval(n.heartbeat),n.Promise.resolve()})()}yieldLoop(t=0){return new this.Promise(function(n,r){return setTimeout(n,t)})}computePenalty(){var t;return(t=this.storeOptions.penalty)!=null?t:15*this.storeOptions.minTime||5e3}__updateSettings__(t){var n=this;return _asyncToGenerator$4(function*(){return yield n.yieldLoop(),parser$3.overwrite(t,t,n.storeOptions),n._startHeartbeat(),n.instance._drainAll(n.computeCapacity()),!0})()}__running__(){var t=this;return _asyncToGenerator$4(function*(){return yield t.yieldLoop(),t._running})()}__queued__(){var t=this;return _asyncToGenerator$4(function*(){return yield t.yieldLoop(),t.instance.queued()})()}__done__(){var t=this;return _asyncToGenerator$4(function*(){return yield t.yieldLoop(),t._done})()}__groupCheck__(t){var n=this;return _asyncToGenerator$4(function*(){return yield n.yieldLoop(),n._nextRequest+n.timeout<t})()}computeCapacity(){var t,n,r=this.storeOptions;return t=r.maxConcurrent,n=r.reservoir,t!=null&&n!=null?Math.min(t-this._running,n):t!=null?t-this._running:n??null}conditionsCheck(t){var n;return n=this.computeCapacity(),n==null||t<=n}__incrementReservoir__(t){var n=this;return _asyncToGenerator$4(function*(){var r;return yield n.yieldLoop(),r=n.storeOptions.reservoir+=t,n.instance._drainAll(n.computeCapacity()),r})()}__currentReservoir__(){var t=this;return _asyncToGenerator$4(function*(){return yield t.yieldLoop(),t.storeOptions.reservoir})()}isBlocked(t){return this._unblockTime>=t}check(t,n){return this.conditionsCheck(t)&&this._nextRequest-n<=0}__check__(t){var n=this;return _asyncToGenerator$4(function*(){var r;return yield n.yieldLoop(),r=Date.now(),n.check(t,r)})()}__register__(t,n,r){var o=this;return _asyncToGenerator$4(function*(){var s,i;return yield o.yieldLoop(),s=Date.now(),o.conditionsCheck(n)?(o._running+=n,o.storeOptions.reservoir!=null&&(o.storeOptions.reservoir-=n),i=Math.max(o._nextRequest-s,0),o._nextRequest=s+i+o.storeOptions.minTime,{success:!0,wait:i,reservoir:o.storeOptions.reservoir}):{success:!1}})()}strategyIsBlock(){return this.storeOptions.strategy===3}__submit__(t,n){var r=this;return _asyncToGenerator$4(function*(){var o,s,i;if(yield r.yieldLoop(),r.storeOptions.maxConcurrent!=null&&n>r.storeOptions.maxConcurrent)throw new BottleneckError$2(`Impossible to add a job having a weight of ${n} to a limiter having a maxConcurrent setting of ${r.storeOptions.maxConcurrent}`);return s=Date.now(),i=r.storeOptions.highWater!=null&&t===r.storeOptions.highWater&&!r.check(n,s),o=r.strategyIsBlock()&&(i||r.isBlocked(s)),o&&(r._unblockTime=s+r.computePenalty(),r._nextRequest=r._unblockTime+r.storeOptions.minTime,r.instance._dropAllQueued()),{reachedHWM:i,blocked:o,strategy:r.storeOptions.strategy}})()}__free__(t,n){var r=this;return _asyncToGenerator$4(function*(){return yield r.yieldLoop(),r._running-=n,r._done+=n,r.instance._drainAll(r.computeCapacity()),{running:r._running}})()}};var LocalDatastore_1=LocalDatastore,Scripts$2={};const require$$0={"blacklist_client.lua":`local blacklist = ARGV[num_static_argv + 1]

if redis.call('zscore', client_last_seen_key, blacklist) then
  redis.call('zadd', client_last_seen_key, 0, blacklist)
end


return {}
`,"check.lua":`local weight = tonumber(ARGV[num_static_argv + 1])

local capacity = process_tick(now, false)['capacity']
local nextRequest = tonumber(redis.call('hget', settings_key, 'nextRequest'))

return conditions_check(capacity, weight) and nextRequest - now <= 0
`,"conditions_check.lua":`local conditions_check = function (capacity, weight)
  return capacity == nil or weight <= capacity
end
`,"current_reservoir.lua":`return process_tick(now, false)['reservoir']
`,"done.lua":`process_tick(now, false)

return tonumber(redis.call('hget', settings_key, 'done'))
`,"free.lua":`local index = ARGV[num_static_argv + 1]

redis.call('zadd', job_expirations_key, 0, index)

return process_tick(now, false)['running']
`,"get_time.lua":`redis.replicate_commands()

local get_time = function ()
  local time = redis.call('time')

  return tonumber(time[1]..string.sub(time[2], 1, 3))
end
`,"group_check.lua":`return not (redis.call('exists', settings_key) == 1)
`,"heartbeat.lua":`process_tick(now, true)
`,"increment_reservoir.lua":`local incr = tonumber(ARGV[num_static_argv + 1])

redis.call('hincrby', settings_key, 'reservoir', incr)

local reservoir = process_tick(now, true)['reservoir']

local groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))
refresh_expiration(0, 0, groupTimeout)

return reservoir
`,"init.lua":`local clear = tonumber(ARGV[num_static_argv + 1])
local limiter_version = ARGV[num_static_argv + 2]
local num_local_argv = num_static_argv + 2

if clear == 1 then
  redis.call('del', unpack(KEYS))
end

if redis.call('exists', settings_key) == 0 then
  -- Create
  local args = {'hmset', settings_key}

  for i = num_local_argv + 1, #ARGV do
    table.insert(args, ARGV[i])
  end

  redis.call(unpack(args))
  redis.call('hmset', settings_key,
    'nextRequest', now,
    'lastReservoirRefresh', now,
    'lastReservoirIncrease', now,
    'running', 0,
    'done', 0,
    'unblockTime', 0,
    'capacityPriorityCounter', 0
  )

else
  -- Apply migrations
  local settings = redis.call('hmget', settings_key,
    'id',
    'version'
  )
  local id = settings[1]
  local current_version = settings[2]

  if current_version ~= limiter_version then
    local version_digits = {}
    for k, v in string.gmatch(current_version, "([^.]+)") do
      table.insert(version_digits, tonumber(k))
    end

    -- 2.10.0
    if version_digits[2] < 10 then
      redis.call('hsetnx', settings_key, 'reservoirRefreshInterval', '')
      redis.call('hsetnx', settings_key, 'reservoirRefreshAmount', '')
      redis.call('hsetnx', settings_key, 'lastReservoirRefresh', '')
      redis.call('hsetnx', settings_key, 'done', 0)
      redis.call('hset', settings_key, 'version', '2.10.0')
    end

    -- 2.11.1
    if version_digits[2] < 11 or (version_digits[2] == 11 and version_digits[3] < 1) then
      if redis.call('hstrlen', settings_key, 'lastReservoirRefresh') == 0 then
        redis.call('hmset', settings_key,
          'lastReservoirRefresh', now,
          'version', '2.11.1'
        )
      end
    end

    -- 2.14.0
    if version_digits[2] < 14 then
      local old_running_key = 'b_'..id..'_running'
      local old_executing_key = 'b_'..id..'_executing'

      if redis.call('exists', old_running_key) == 1 then
        redis.call('rename', old_running_key, job_weights_key)
      end
      if redis.call('exists', old_executing_key) == 1 then
        redis.call('rename', old_executing_key, job_expirations_key)
      end
      redis.call('hset', settings_key, 'version', '2.14.0')
    end

    -- 2.15.2
    if version_digits[2] < 15 or (version_digits[2] == 15 and version_digits[3] < 2) then
      redis.call('hsetnx', settings_key, 'capacityPriorityCounter', 0)
      redis.call('hset', settings_key, 'version', '2.15.2')
    end

    -- 2.17.0
    if version_digits[2] < 17 then
      redis.call('hsetnx', settings_key, 'clientTimeout', 10000)
      redis.call('hset', settings_key, 'version', '2.17.0')
    end

    -- 2.18.0
    if version_digits[2] < 18 then
      redis.call('hsetnx', settings_key, 'reservoirIncreaseInterval', '')
      redis.call('hsetnx', settings_key, 'reservoirIncreaseAmount', '')
      redis.call('hsetnx', settings_key, 'reservoirIncreaseMaximum', '')
      redis.call('hsetnx', settings_key, 'lastReservoirIncrease', now)
      redis.call('hset', settings_key, 'version', '2.18.0')
    end

  end

  process_tick(now, false)
end

local groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))
refresh_expiration(0, 0, groupTimeout)

return {}
`,"process_tick.lua":`local process_tick = function (now, always_publish)

  local compute_capacity = function (maxConcurrent, running, reservoir)
    if maxConcurrent ~= nil and reservoir ~= nil then
      return math.min((maxConcurrent - running), reservoir)
    elseif maxConcurrent ~= nil then
      return maxConcurrent - running
    elseif reservoir ~= nil then
      return reservoir
    else
      return nil
    end
  end

  local settings = redis.call('hmget', settings_key,
    'id',
    'maxConcurrent',
    'running',
    'reservoir',
    'reservoirRefreshInterval',
    'reservoirRefreshAmount',
    'lastReservoirRefresh',
    'reservoirIncreaseInterval',
    'reservoirIncreaseAmount',
    'reservoirIncreaseMaximum',
    'lastReservoirIncrease',
    'capacityPriorityCounter',
    'clientTimeout'
  )
  local id = settings[1]
  local maxConcurrent = tonumber(settings[2])
  local running = tonumber(settings[3])
  local reservoir = tonumber(settings[4])
  local reservoirRefreshInterval = tonumber(settings[5])
  local reservoirRefreshAmount = tonumber(settings[6])
  local lastReservoirRefresh = tonumber(settings[7])
  local reservoirIncreaseInterval = tonumber(settings[8])
  local reservoirIncreaseAmount = tonumber(settings[9])
  local reservoirIncreaseMaximum = tonumber(settings[10])
  local lastReservoirIncrease = tonumber(settings[11])
  local capacityPriorityCounter = tonumber(settings[12])
  local clientTimeout = tonumber(settings[13])

  local initial_capacity = compute_capacity(maxConcurrent, running, reservoir)

  --
  -- Process 'running' changes
  --
  local expired = redis.call('zrangebyscore', job_expirations_key, '-inf', '('..now)

  if #expired > 0 then
    redis.call('zremrangebyscore', job_expirations_key, '-inf', '('..now)

    local flush_batch = function (batch, acc)
      local weights = redis.call('hmget', job_weights_key, unpack(batch))
                      redis.call('hdel',  job_weights_key, unpack(batch))
      local clients = redis.call('hmget', job_clients_key, unpack(batch))
                      redis.call('hdel',  job_clients_key, unpack(batch))

      -- Calculate sum of removed weights
      for i = 1, #weights do
        acc['total'] = acc['total'] + (tonumber(weights[i]) or 0)
      end

      -- Calculate sum of removed weights by client
      local client_weights = {}
      for i = 1, #clients do
        local removed = tonumber(weights[i]) or 0
        if removed > 0 then
          acc['client_weights'][clients[i]] = (acc['client_weights'][clients[i]] or 0) + removed
        end
      end
    end

    local acc = {
      ['total'] = 0,
      ['client_weights'] = {}
    }
    local batch_size = 1000

    -- Compute changes to Zsets and apply changes to Hashes
    for i = 1, #expired, batch_size do
      local batch = {}
      for j = i, math.min(i + batch_size - 1, #expired) do
        table.insert(batch, expired[j])
      end

      flush_batch(batch, acc)
    end

    -- Apply changes to Zsets
    if acc['total'] > 0 then
      redis.call('hincrby', settings_key, 'done', acc['total'])
      running = tonumber(redis.call('hincrby', settings_key, 'running', -acc['total']))
    end

    for client, weight in pairs(acc['client_weights']) do
      redis.call('zincrby', client_running_key, -weight, client)
    end
  end

  --
  -- Process 'reservoir' changes
  --
  local reservoirRefreshActive = reservoirRefreshInterval ~= nil and reservoirRefreshAmount ~= nil
  if reservoirRefreshActive and now >= lastReservoirRefresh + reservoirRefreshInterval then
    reservoir = reservoirRefreshAmount
    redis.call('hmset', settings_key,
      'reservoir', reservoir,
      'lastReservoirRefresh', now
    )
  end

  local reservoirIncreaseActive = reservoirIncreaseInterval ~= nil and reservoirIncreaseAmount ~= nil
  if reservoirIncreaseActive and now >= lastReservoirIncrease + reservoirIncreaseInterval then
    local num_intervals = math.floor((now - lastReservoirIncrease) / reservoirIncreaseInterval)
    local incr = reservoirIncreaseAmount * num_intervals
    if reservoirIncreaseMaximum ~= nil then
      incr = math.min(incr, reservoirIncreaseMaximum - (reservoir or 0))
    end
    if incr > 0 then
      reservoir = (reservoir or 0) + incr
    end
    redis.call('hmset', settings_key,
      'reservoir', reservoir,
      'lastReservoirIncrease', lastReservoirIncrease + (num_intervals * reservoirIncreaseInterval)
    )
  end

  --
  -- Clear unresponsive clients
  --
  local unresponsive = redis.call('zrangebyscore', client_last_seen_key, '-inf', (now - clientTimeout))
  local unresponsive_lookup = {}
  local terminated_clients = {}
  for i = 1, #unresponsive do
    unresponsive_lookup[unresponsive[i]] = true
    if tonumber(redis.call('zscore', client_running_key, unresponsive[i])) == 0 then
      table.insert(terminated_clients, unresponsive[i])
    end
  end
  if #terminated_clients > 0 then
    redis.call('zrem', client_running_key,         unpack(terminated_clients))
    redis.call('hdel', client_num_queued_key,      unpack(terminated_clients))
    redis.call('zrem', client_last_registered_key, unpack(terminated_clients))
    redis.call('zrem', client_last_seen_key,       unpack(terminated_clients))
  end

  --
  -- Broadcast capacity changes
  --
  local final_capacity = compute_capacity(maxConcurrent, running, reservoir)

  if always_publish or (initial_capacity ~= nil and final_capacity == nil) then
    -- always_publish or was not unlimited, now unlimited
    redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))

  elseif initial_capacity ~= nil and final_capacity ~= nil and final_capacity > initial_capacity then
    -- capacity was increased
    -- send the capacity message to the limiter having the lowest number of running jobs
    -- the tiebreaker is the limiter having not registered a job in the longest time

    local lowest_concurrency_value = nil
    local lowest_concurrency_clients = {}
    local lowest_concurrency_last_registered = {}
    local client_concurrencies = redis.call('zrange', client_running_key, 0, -1, 'withscores')

    for i = 1, #client_concurrencies, 2 do
      local client = client_concurrencies[i]
      local concurrency = tonumber(client_concurrencies[i+1])

      if (
        lowest_concurrency_value == nil or lowest_concurrency_value == concurrency
      ) and (
        not unresponsive_lookup[client]
      ) and (
        tonumber(redis.call('hget', client_num_queued_key, client)) > 0
      ) then
        lowest_concurrency_value = concurrency
        table.insert(lowest_concurrency_clients, client)
        local last_registered = tonumber(redis.call('zscore', client_last_registered_key, client))
        table.insert(lowest_concurrency_last_registered, last_registered)
      end
    end

    if #lowest_concurrency_clients > 0 then
      local position = 1
      local earliest = lowest_concurrency_last_registered[1]

      for i,v in ipairs(lowest_concurrency_last_registered) do
        if v < earliest then
          position = i
          earliest = v
        end
      end

      local next_client = lowest_concurrency_clients[position]
      redis.call('publish', 'b_'..id,
        'capacity-priority:'..(final_capacity or '')..
        ':'..next_client..
        ':'..capacityPriorityCounter
      )
      redis.call('hincrby', settings_key, 'capacityPriorityCounter', '1')
    else
      redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))
    end
  end

  return {
    ['capacity'] = final_capacity,
    ['running'] = running,
    ['reservoir'] = reservoir
  }
end
`,"queued.lua":`local clientTimeout = tonumber(redis.call('hget', settings_key, 'clientTimeout'))
local valid_clients = redis.call('zrangebyscore', client_last_seen_key, (now - clientTimeout), 'inf')
local client_queued = redis.call('hmget', client_num_queued_key, unpack(valid_clients))

local sum = 0
for i = 1, #client_queued do
  sum = sum + tonumber(client_queued[i])
end

return sum
`,"refresh_expiration.lua":`local refresh_expiration = function (now, nextRequest, groupTimeout)

  if groupTimeout ~= nil then
    local ttl = (nextRequest + groupTimeout) - now

    for i = 1, #KEYS do
      redis.call('pexpire', KEYS[i], ttl)
    end
  end

end
`,"refs.lua":`local settings_key = KEYS[1]
local job_weights_key = KEYS[2]
local job_expirations_key = KEYS[3]
local job_clients_key = KEYS[4]
local client_running_key = KEYS[5]
local client_num_queued_key = KEYS[6]
local client_last_registered_key = KEYS[7]
local client_last_seen_key = KEYS[8]

local now = tonumber(ARGV[1])
local client = ARGV[2]

local num_static_argv = 2
`,"register.lua":`local index = ARGV[num_static_argv + 1]
local weight = tonumber(ARGV[num_static_argv + 2])
local expiration = tonumber(ARGV[num_static_argv + 3])

local state = process_tick(now, false)
local capacity = state['capacity']
local reservoir = state['reservoir']

local settings = redis.call('hmget', settings_key,
  'nextRequest',
  'minTime',
  'groupTimeout'
)
local nextRequest = tonumber(settings[1])
local minTime = tonumber(settings[2])
local groupTimeout = tonumber(settings[3])

if conditions_check(capacity, weight) then

  redis.call('hincrby', settings_key, 'running', weight)
  redis.call('hset', job_weights_key, index, weight)
  if expiration ~= nil then
    redis.call('zadd', job_expirations_key, now + expiration, index)
  end
  redis.call('hset', job_clients_key, index, client)
  redis.call('zincrby', client_running_key, weight, client)
  redis.call('hincrby', client_num_queued_key, client, -1)
  redis.call('zadd', client_last_registered_key, now, client)

  local wait = math.max(nextRequest - now, 0)
  local newNextRequest = now + wait + minTime

  if reservoir == nil then
    redis.call('hset', settings_key,
      'nextRequest', newNextRequest
    )
  else
    reservoir = reservoir - weight
    redis.call('hmset', settings_key,
      'reservoir', reservoir,
      'nextRequest', newNextRequest
    )
  end

  refresh_expiration(now, newNextRequest, groupTimeout)

  return {true, wait, reservoir}

else
  return {false}
end
`,"register_client.lua":`local queued = tonumber(ARGV[num_static_argv + 1])

-- Could have been re-registered concurrently
if not redis.call('zscore', client_last_seen_key, client) then
  redis.call('zadd', client_running_key, 0, client)
  redis.call('hset', client_num_queued_key, client, queued)
  redis.call('zadd', client_last_registered_key, 0, client)
end

redis.call('zadd', client_last_seen_key, now, client)

return {}
`,"running.lua":`return process_tick(now, false)['running']
`,"submit.lua":`local queueLength = tonumber(ARGV[num_static_argv + 1])
local weight = tonumber(ARGV[num_static_argv + 2])

local capacity = process_tick(now, false)['capacity']

local settings = redis.call('hmget', settings_key,
  'id',
  'maxConcurrent',
  'highWater',
  'nextRequest',
  'strategy',
  'unblockTime',
  'penalty',
  'minTime',
  'groupTimeout'
)
local id = settings[1]
local maxConcurrent = tonumber(settings[2])
local highWater = tonumber(settings[3])
local nextRequest = tonumber(settings[4])
local strategy = tonumber(settings[5])
local unblockTime = tonumber(settings[6])
local penalty = tonumber(settings[7])
local minTime = tonumber(settings[8])
local groupTimeout = tonumber(settings[9])

if maxConcurrent ~= nil and weight > maxConcurrent then
  return redis.error_reply('OVERWEIGHT:'..weight..':'..maxConcurrent)
end

local reachedHWM = (highWater ~= nil and queueLength == highWater
  and not (
    conditions_check(capacity, weight)
    and nextRequest - now <= 0
  )
)

local blocked = strategy == 3 and (reachedHWM or unblockTime >= now)

if blocked then
  local computedPenalty = penalty
  if computedPenalty == nil then
    if minTime == 0 then
      computedPenalty = 5000
    else
      computedPenalty = 15 * minTime
    end
  end

  local newNextRequest = now + computedPenalty + minTime

  redis.call('hmset', settings_key,
    'unblockTime', now + computedPenalty,
    'nextRequest', newNextRequest
  )

  local clients_queued_reset = redis.call('hkeys', client_num_queued_key)
  local queued_reset = {}
  for i = 1, #clients_queued_reset do
    table.insert(queued_reset, clients_queued_reset[i])
    table.insert(queued_reset, 0)
  end
  redis.call('hmset', client_num_queued_key, unpack(queued_reset))

  redis.call('publish', 'b_'..id, 'blocked:')

  refresh_expiration(now, newNextRequest, groupTimeout)
end

if not blocked and not reachedHWM then
  redis.call('hincrby', client_num_queued_key, client, 1)
end

return {reachedHWM, blocked, strategy}
`,"update_settings.lua":`local args = {'hmset', settings_key}

for i = num_static_argv + 1, #ARGV do
  table.insert(args, ARGV[i])
end

redis.call(unpack(args))

process_tick(now, true)

local groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))
refresh_expiration(0, 0, groupTimeout)

return {}
`,"validate_client.lua":`if not redis.call('zscore', client_last_seen_key, client) then
  return redis.error_reply('UNKNOWN_CLIENT')
end

redis.call('zadd', client_last_seen_key, now, client)
`,"validate_keys.lua":`if not (redis.call('exists', settings_key) == 1) then
  return redis.error_reply('SETTINGS_KEY_NOT_FOUND')
end
`};(function(e){var t,n,r;n=require$$0,t={refs:n["refs.lua"],validate_keys:n["validate_keys.lua"],validate_client:n["validate_client.lua"],refresh_expiration:n["refresh_expiration.lua"],process_tick:n["process_tick.lua"],conditions_check:n["conditions_check.lua"],get_time:n["get_time.lua"]},e.allKeys=function(o){return[`b_${o}_settings`,`b_${o}_job_weights`,`b_${o}_job_expirations`,`b_${o}_job_clients`,`b_${o}_client_running`,`b_${o}_client_num_queued`,`b_${o}_client_last_registered`,`b_${o}_client_last_seen`]},r={init:{keys:e.allKeys,headers:["process_tick"],refresh_expiration:!0,code:n["init.lua"]},group_check:{keys:e.allKeys,headers:[],refresh_expiration:!1,code:n["group_check.lua"]},register_client:{keys:e.allKeys,headers:["validate_keys"],refresh_expiration:!1,code:n["register_client.lua"]},blacklist_client:{keys:e.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:n["blacklist_client.lua"]},heartbeat:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["heartbeat.lua"]},update_settings:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["update_settings.lua"]},running:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["running.lua"]},queued:{keys:e.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:n["queued.lua"]},done:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["done.lua"]},check:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!1,code:n["check.lua"]},submit:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:n["submit.lua"]},register:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:n["register.lua"]},free:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["free.lua"]},current_reservoir:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["current_reservoir.lua"]},increment_reservoir:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["increment_reservoir.lua"]}},e.names=Object.keys(r),e.keys=function(o,s){return r[o].keys(s)},e.payload=function(o){var s;return s=r[o],Array.prototype.concat(t.refs,s.headers.map(function(i){return t[i]}),s.refresh_expiration?t.refresh_expiration:"",s.code).join(`
`)}})(Scripts$2);function asyncGeneratorStep$3(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(c){n(c);return}a.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator$3(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var s=e.apply(t,n);function i(l){asyncGeneratorStep$3(s,r,o,i,a,"next",l)}function a(l){asyncGeneratorStep$3(s,r,o,i,a,"throw",l)}i(void 0)})}}var Events$1,RedisConnection$1,Scripts$1,parser$2;parser$2=parser$5;Events$1=Events_1;Scripts$1=Scripts$2;RedisConnection$1=function(){class RedisConnection{constructor(options={}){parser$2.load(options,this.defaults,this),this.Redis==null&&(this.Redis=eval("require")("redis")),this.Events==null&&(this.Events=new Events$1(this)),this.terminated=!1,this.client==null&&(this.client=this.Redis.createClient(this.clientOptions)),this.subscriber=this.client.duplicate(),this.limiters={},this.shas={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then(()=>this._loadScripts()).then(()=>({client:this.client,subscriber:this.subscriber}))}_setup(e,t){return e.setMaxListeners(0),new this.Promise((n,r)=>(e.on("error",o=>this.Events.trigger("error",o)),t&&e.on("message",(o,s)=>{var i;return(i=this.limiters[o])!=null?i._store.onMessage(o,s):void 0}),e.ready?n():e.once("ready",n)))}_loadScript(e){return new this.Promise((t,n)=>{var r;return r=Scripts$1.payload(e),this.client.multi([["script","load",r]]).exec((o,s)=>o!=null?n(o):(this.shas[e]=s[0],t(s[0])))})}_loadScripts(){return this.Promise.all(Scripts$1.names.map(e=>this._loadScript(e)))}__runCommand__(e){var t=this;return _asyncToGenerator$3(function*(){return yield t.ready,new t.Promise((n,r)=>t.client.multi([e]).exec_atomic(function(o,s){return o!=null?r(o):n(s[0])}))})()}__addLimiter__(e){return this.Promise.all([e.channel(),e.channel_client()].map(t=>new this.Promise((n,r)=>{var o;return o=s=>{if(s===t)return this.subscriber.removeListener("subscribe",o),this.limiters[t]=e,n()},this.subscriber.on("subscribe",o),this.subscriber.subscribe(t)})))}__removeLimiter__(e){var t=this;return this.Promise.all([e.channel(),e.channel_client()].map(function(){var n=_asyncToGenerator$3(function*(r){return t.terminated||(yield new t.Promise((o,s)=>t.subscriber.unsubscribe(r,function(i,a){if(i!=null)return s(i);if(a===r)return o()}))),delete t.limiters[r]});return function(r){return n.apply(this,arguments)}}()))}__scriptArgs__(e,t,n,r){var o;return o=Scripts$1.keys(e,t),[this.shas[e],o.length].concat(o,n,r)}__scriptFn__(e){return this.client.evalsha.bind(this.client)}disconnect(e=!0){var t,n,r,o;for(o=Object.keys(this.limiters),t=0,r=o.length;t<r;t++)n=o[t],clearInterval(this.limiters[n]._store.heartbeat);return this.limiters={},this.terminated=!0,this.client.end(e),this.subscriber.end(e),this.Promise.resolve()}}return RedisConnection.prototype.datastore="redis",RedisConnection.prototype.defaults={Redis:null,clientOptions:{},client:null,Promise,Events:null},RedisConnection}.call(void 0);var RedisConnection_1=RedisConnection$1;function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit$1(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var i=e[Symbol.iterator](),a;!(r=(a=i.next()).done)&&(n.push(a.value),!(t&&n.length===t));r=!0);}catch(l){o=!0,s=l}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw s}}return n}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}function asyncGeneratorStep$2(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(c){n(c);return}a.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator$2(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var s=e.apply(t,n);function i(l){asyncGeneratorStep$2(s,r,o,i,a,"next",l)}function a(l){asyncGeneratorStep$2(s,r,o,i,a,"throw",l)}i(void 0)})}}var Events,IORedisConnection$1,Scripts,parser$1;parser$1=parser$5;Events=Events_1;Scripts=Scripts$2;IORedisConnection$1=function(){class IORedisConnection{constructor(options={}){parser$1.load(options,this.defaults,this),this.Redis==null&&(this.Redis=eval("require")("ioredis")),this.Events==null&&(this.Events=new Events(this)),this.terminated=!1,this.clusterNodes!=null?(this.client=new this.Redis.Cluster(this.clusterNodes,this.clientOptions),this.subscriber=new this.Redis.Cluster(this.clusterNodes,this.clientOptions)):this.client!=null&&this.client.duplicate==null?this.subscriber=new this.Redis.Cluster(this.client.startupNodes,this.client.options):(this.client==null&&(this.client=new this.Redis(this.clientOptions)),this.subscriber=this.client.duplicate()),this.limiters={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then(()=>(this._loadScripts(),{client:this.client,subscriber:this.subscriber}))}_setup(e,t){return e.setMaxListeners(0),new this.Promise((n,r)=>(e.on("error",o=>this.Events.trigger("error",o)),t&&e.on("message",(o,s)=>{var i;return(i=this.limiters[o])!=null?i._store.onMessage(o,s):void 0}),e.status==="ready"?n():e.once("ready",n)))}_loadScripts(){return Scripts.names.forEach(e=>this.client.defineCommand(e,{lua:Scripts.payload(e)}))}__runCommand__(e){var t=this;return _asyncToGenerator$2(function*(){var n;yield t.ready;var r=yield t.client.pipeline([e]).exec(),o=_slicedToArray$1(r,1),s=_slicedToArray$1(o[0],2);return s[0],n=s[1],n})()}__addLimiter__(e){return this.Promise.all([e.channel(),e.channel_client()].map(t=>new this.Promise((n,r)=>this.subscriber.subscribe(t,()=>(this.limiters[t]=e,n())))))}__removeLimiter__(e){var t=this;return[e.channel(),e.channel_client()].forEach(function(){var n=_asyncToGenerator$2(function*(r){return t.terminated||(yield t.subscriber.unsubscribe(r)),delete t.limiters[r]});return function(r){return n.apply(this,arguments)}}())}__scriptArgs__(e,t,n,r){var o;return o=Scripts.keys(e,t),[o.length].concat(o,n,r)}__scriptFn__(e){return this.client[e].bind(this.client)}disconnect(e=!0){var t,n,r,o;for(o=Object.keys(this.limiters),t=0,r=o.length;t<r;t++)n=o[t],clearInterval(this.limiters[n]._store.heartbeat);return this.limiters={},this.terminated=!0,e?this.Promise.all([this.client.quit(),this.subscriber.quit()]):(this.client.disconnect(),this.subscriber.disconnect(),this.Promise.resolve())}}return IORedisConnection.prototype.datastore="ioredis",IORedisConnection.prototype.defaults={Redis:null,clientOptions:{},clusterNodes:null,client:null,Promise,Events:null},IORedisConnection}.call(void 0);var IORedisConnection_1=IORedisConnection$1;function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var i=e[Symbol.iterator](),a;!(r=(a=i.next()).done)&&(n.push(a.value),!(t&&n.length===t));r=!0);}catch(l){o=!0,s=l}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw s}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep$1(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(c){n(c);return}a.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator$1(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var s=e.apply(t,n);function i(l){asyncGeneratorStep$1(s,r,o,i,a,"next",l)}function a(l){asyncGeneratorStep$1(s,r,o,i,a,"throw",l)}i(void 0)})}}var BottleneckError$1,IORedisConnection,RedisConnection,RedisDatastore,parser;parser=parser$5;BottleneckError$1=BottleneckError_1;RedisConnection=RedisConnection_1;IORedisConnection=IORedisConnection_1;RedisDatastore=class{constructor(t,n,r){this.instance=t,this.storeOptions=n,this.originalId=this.instance.id,this.clientId=this.instance._randomIndex(),parser.load(r,r,this),this.clients={},this.capacityPriorityCounters={},this.sharedConnection=this.connection!=null,this.connection==null&&(this.connection=this.instance.datastore==="redis"?new RedisConnection({Redis:this.Redis,clientOptions:this.clientOptions,Promise:this.Promise,Events:this.instance.Events}):this.instance.datastore==="ioredis"?new IORedisConnection({Redis:this.Redis,clientOptions:this.clientOptions,clusterNodes:this.clusterNodes,Promise:this.Promise,Events:this.instance.Events}):void 0),this.instance.connection=this.connection,this.instance.datastore=this.connection.datastore,this.ready=this.connection.ready.then(o=>(this.clients=o,this.runScript("init",this.prepareInitSettings(this.clearDatastore)))).then(()=>this.connection.__addLimiter__(this.instance)).then(()=>this.runScript("register_client",[this.instance.queued()])).then(()=>{var o;return typeof(o=this.heartbeat=setInterval(()=>this.runScript("heartbeat",[]).catch(s=>this.instance.Events.trigger("error",s)),this.heartbeatInterval)).unref=="function"&&o.unref(),this.clients})}__publish__(t){var n=this;return _asyncToGenerator$1(function*(){var r,o=yield n.ready;return r=o.client,r.publish(n.instance.channel(),`message:${t.toString()}`)})()}onMessage(t,n){var r=this;return _asyncToGenerator$1(function*(){var o,s,i,a,l,c,u,d,h,p;try{u=n.indexOf(":");var f=[n.slice(0,u),n.slice(u+1)];if(p=f[0],i=f[1],p==="capacity")return yield r.instance._drainAll(i.length>0?~~i:void 0);if(p==="capacity-priority"){var y=i.split(":"),m=_slicedToArray(y,3);return h=m[0],d=m[1],s=m[2],o=h.length>0?~~h:void 0,d===r.clientId?(a=yield r.instance._drainAll(o),c=o!=null?o-(a||0):"",yield r.clients.client.publish(r.instance.channel(),`capacity-priority:${c}::${s}`)):d===""?(clearTimeout(r.capacityPriorityCounters[s]),delete r.capacityPriorityCounters[s],r.instance._drainAll(o)):r.capacityPriorityCounters[s]=setTimeout(_asyncToGenerator$1(function*(){var b;try{return delete r.capacityPriorityCounters[s],yield r.runScript("blacklist_client",[d]),yield r.instance._drainAll(o)}catch(g){return b=g,r.instance.Events.trigger("error",b)}}),1e3)}else{if(p==="message")return r.instance.Events.trigger("message",i);if(p==="blocked")return yield r.instance._dropAllQueued()}}catch(b){return l=b,r.instance.Events.trigger("error",l)}})()}__disconnect__(t){return clearInterval(this.heartbeat),this.sharedConnection?this.connection.__removeLimiter__(this.instance):this.connection.disconnect(t)}runScript(t,n){var r=this;return _asyncToGenerator$1(function*(){return t==="init"||t==="register_client"||(yield r.ready),new r.Promise((o,s)=>{var i,a;return i=[Date.now(),r.clientId].concat(n),r.instance.Events.trigger("debug",`Calling Redis script: ${t}.lua`,i),a=r.connection.__scriptArgs__(t,r.originalId,i,function(l,c){return l!=null?s(l):o(c)}),r.connection.__scriptFn__(t)(...a)}).catch(o=>o.message==="SETTINGS_KEY_NOT_FOUND"?t==="heartbeat"?r.Promise.resolve():r.runScript("init",r.prepareInitSettings(!1)).then(()=>r.runScript(t,n)):o.message==="UNKNOWN_CLIENT"?r.runScript("register_client",[r.instance.queued()]).then(()=>r.runScript(t,n)):r.Promise.reject(o))})()}prepareArray(t){var n,r,o,s;for(o=[],n=0,r=t.length;n<r;n++)s=t[n],o.push(s!=null?s.toString():"");return o}prepareObject(t){var n,r,o;n=[];for(r in t)o=t[r],n.push(r,o!=null?o.toString():"");return n}prepareInitSettings(t){var n;return n=this.prepareObject(Object.assign({},this.storeOptions,{id:this.originalId,version:this.instance.version,groupTimeout:this.timeout,clientTimeout:this.clientTimeout})),n.unshift(t?1:0,this.instance.version),n}convertBool(t){return!!t}__updateSettings__(t){var n=this;return _asyncToGenerator$1(function*(){return yield n.runScript("update_settings",n.prepareObject(t)),parser.overwrite(t,t,n.storeOptions)})()}__running__(){return this.runScript("running",[])}__queued__(){return this.runScript("queued",[])}__done__(){return this.runScript("done",[])}__groupCheck__(){var t=this;return _asyncToGenerator$1(function*(){return t.convertBool(yield t.runScript("group_check",[]))})()}__incrementReservoir__(t){return this.runScript("increment_reservoir",[t])}__currentReservoir__(){return this.runScript("current_reservoir",[])}__check__(t){var n=this;return _asyncToGenerator$1(function*(){return n.convertBool(yield n.runScript("check",n.prepareArray([t])))})()}__register__(t,n,r){var o=this;return _asyncToGenerator$1(function*(){var s,i,a,l=yield o.runScript("register",o.prepareArray([t,n,r])),c=_slicedToArray(l,3);return i=c[0],a=c[1],s=c[2],{success:o.convertBool(i),wait:a,reservoir:s}})()}__submit__(t,n){var r=this;return _asyncToGenerator$1(function*(){var o,s,i,a,l;try{var c=yield r.runScript("submit",r.prepareArray([t,n])),u=_slicedToArray(c,3);return a=u[0],o=u[1],l=u[2],{reachedHWM:r.convertBool(a),blocked:r.convertBool(o),strategy:l}}catch(p){if(s=p,s.message.indexOf("OVERWEIGHT")===0){var d=s.message.split(":"),h=_slicedToArray(d,3);throw h[0],n=h[1],i=h[2],new BottleneckError$1(`Impossible to add a job having a weight of ${n} to a limiter having a maxConcurrent setting of ${i}`)}else throw s}})()}__free__(t,n){var r=this;return _asyncToGenerator$1(function*(){var o;return o=yield r.runScript("free",r.prepareArray([t])),{running:o}})()}};var RedisDatastore_1=RedisDatastore,BottleneckError,States;BottleneckError=BottleneckError_1;States=class{constructor(t){this.status=t,this._jobs={},this.counts=this.status.map(function(){return 0})}next(t){var n,r;if(n=this._jobs[t],r=n+1,n!=null&&r<this.status.length)return this.counts[n]--,this.counts[r]++,this._jobs[t]++;if(n!=null)return this.counts[n]--,delete this._jobs[t]}start(t){var n;return n=0,this._jobs[t]=n,this.counts[n]++}remove(t){var n;return n=this._jobs[t],n!=null&&(this.counts[n]--,delete this._jobs[t]),n!=null}jobStatus(t){var n;return(n=this.status[this._jobs[t]])!=null?n:null}statusJobs(t){var n,r,o,s,i;if(t!=null){if(r=this.status.indexOf(t),r<0)throw new BottleneckError(`status must be one of ${this.status.join(", ")}`);o=this._jobs,s=[];for(n in o)i=o[n],i===r&&s.push(n);return s}else return Object.keys(this._jobs)}statusCounts(){return this.counts.reduce((t,n,r)=>(t[this.status[r]]=n,t),{})}};var States_1=States;function asyncGeneratorStep(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(c){n(c);return}a.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var s=e.apply(t,n);function i(l){asyncGeneratorStep(s,r,o,i,a,"next",l)}function a(l){asyncGeneratorStep(s,r,o,i,a,"throw",l)}i(void 0)})}}var DLList,Sync;DLList=DLList_1;Sync=class{constructor(t,n){this.schedule=this.schedule.bind(this),this.name=t,this.Promise=n,this._running=0,this._queue=new DLList}isEmpty(){return this._queue.length===0}_tryToRun(){var t=this;return _asyncToGenerator(function*(){var n,r,o,s,i,a,l;if(t._running<1&&t._queue.length>0){t._running++;var c=t._queue.shift();return l=c.task,n=c.args,i=c.resolve,s=c.reject,r=yield _asyncToGenerator(function*(){try{return a=yield l(...n),function(){return i(a)}}catch(u){return o=u,function(){return s(o)}}})(),t._running--,t._tryToRun(),r()}})()}schedule(t,...n){var r,o,s;return s=o=null,r=new this.Promise(function(i,a){return s=i,o=a}),this._queue.push({task:t,args:n,resolve:s,reject:o}),this._tryToRun(),r}};var Sync_1=Sync;const version="2.19.5",require$$8={version};var Group_1,hasRequiredGroup;function requireGroup(){if(hasRequiredGroup)return Group_1;hasRequiredGroup=1;function e(h,p){return r(h)||n(h,p)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(h,p){var f=[],y=!0,m=!1,b=void 0;try{for(var g=h[Symbol.iterator](),w;!(y=(w=g.next()).done)&&(f.push(w.value),!(p&&f.length===p));y=!0);}catch(S){m=!0,b=S}finally{try{!y&&g.return!=null&&g.return()}finally{if(m)throw b}}return f}function r(h){if(Array.isArray(h))return h}function o(h,p,f,y,m,b,g){try{var w=h[b](g),S=w.value}catch(x){f(x);return}w.done?p(S):Promise.resolve(S).then(y,m)}function s(h){return function(){var p=this,f=arguments;return new Promise(function(y,m){var b=h.apply(p,f);function g(S){o(b,y,m,g,w,"next",S)}function w(S){o(b,y,m,g,w,"throw",S)}g(void 0)})}}var i,a,l,c,u,d;return d=parser$5,i=Events_1,c=RedisConnection_1,l=IORedisConnection_1,u=Scripts$2,a=function(){class h{constructor(f={}){this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=f,d.load(this.limiterOptions,this.defaults,this),this.Events=new i(this),this.instances={},this.Bottleneck=requireBottleneck(),this._startAutoCleanup(),this.sharedConnection=this.connection!=null,this.connection==null&&(this.limiterOptions.datastore==="redis"?this.connection=new c(Object.assign({},this.limiterOptions,{Events:this.Events})):this.limiterOptions.datastore==="ioredis"&&(this.connection=new l(Object.assign({},this.limiterOptions,{Events:this.Events}))))}key(f=""){var y;return(y=this.instances[f])!=null?y:(()=>{var m;return m=this.instances[f]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:`${this.id}-${f}`,timeout:this.timeout,connection:this.connection})),this.Events.trigger("created",m,f),m})()}deleteKey(f=""){var y=this;return s(function*(){var m,b;return b=y.instances[f],y.connection&&(m=yield y.connection.__runCommand__(["del",...u.allKeys(`${y.id}-${f}`)])),b!=null&&(delete y.instances[f],yield b.disconnect()),b!=null||m>0})()}limiters(){var f,y,m,b;y=this.instances,m=[];for(f in y)b=y[f],m.push({key:f,limiter:b});return m}keys(){return Object.keys(this.instances)}clusterKeys(){var f=this;return s(function*(){var y,m,b,g,w,S,x,v,_;if(f.connection==null)return f.Promise.resolve(f.keys());for(S=[],y=null,_=`b_${f.id}-`.length,m=9;y!==0;){var C=yield f.connection.__runCommand__(["scan",y??0,"match",`b_${f.id}-*_settings`,"count",1e4]),P=e(C,2);for(v=P[0],b=P[1],y=~~v,g=0,x=b.length;g<x;g++)w=b[g],S.push(w.slice(_,-m))}return S})()}_startAutoCleanup(){var f=this,y;return clearInterval(this.interval),typeof(y=this.interval=setInterval(s(function*(){var m,b,g,w,S,x;S=Date.now(),g=f.instances,w=[];for(b in g){x=g[b];try{(yield x._store.__groupCheck__(S))?w.push(f.deleteKey(b)):w.push(void 0)}catch(v){m=v,w.push(x.Events.trigger("error",m))}}return w}),this.timeout/2)).unref=="function"?y.unref():void 0}updateSettings(f={}){if(d.overwrite(f,this.defaults,this),d.overwrite(f,f,this.limiterOptions),f.timeout!=null)return this._startAutoCleanup()}disconnect(f=!0){var y;if(!this.sharedConnection)return(y=this.connection)!=null?y.disconnect(f):void 0}}return h.prototype.defaults={timeout:1e3*60*5,connection:null,Promise,id:"group-key"},h}.call(void 0),Group_1=a,Group_1}var Batcher_1,hasRequiredBatcher;function requireBatcher(){if(hasRequiredBatcher)return Batcher_1;hasRequiredBatcher=1;var e,t,n;return n=parser$5,t=Events_1,e=function(){class r{constructor(s={}){this.options=s,n.load(this.options,this.defaults,this),this.Events=new t(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}_resetPromise(){return this._promise=new this.Promise((s,i)=>this._resolve=s)}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger("batch",this._arr),this._arr=[],this._resetPromise()}add(s){var i;return this._arr.push(s),i=this._promise,this._arr.length===this.maxSize?this._flush():this.maxTime!=null&&this._arr.length===1&&(this._timeout=setTimeout(()=>this._flush(),this.maxTime)),i}}return r.prototype.defaults={maxTime:null,maxSize:null,Promise},r}.call(void 0),Batcher_1=e,Batcher_1}var Bottleneck_1,hasRequiredBottleneck;function requireBottleneck(){if(hasRequiredBottleneck)return Bottleneck_1;hasRequiredBottleneck=1;function e(S,x){return s(S)||t(S,x)||r()}function t(S,x){var v=[],_=!0,C=!1,P=void 0;try{for(var E=S[Symbol.iterator](),$;!(_=($=E.next()).done)&&(v.push($.value),!(x&&v.length===x));_=!0);}catch(A){C=!0,P=A}finally{try{!_&&E.return!=null&&E.return()}finally{if(C)throw P}}return v}function n(S){return s(S)||o(S)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(S){if(Symbol.iterator in Object(S)||Object.prototype.toString.call(S)==="[object Arguments]")return Array.from(S)}function s(S){if(Array.isArray(S))return S}function i(S,x,v,_,C,P,E){try{var $=S[P](E),A=$.value}catch(k){v(k);return}$.done?x(A):Promise.resolve(A).then(_,C)}function a(S){return function(){var x=this,v=arguments;return new Promise(function(_,C){var P=S.apply(x,v);function E(A){i(P,_,C,E,$,"next",A)}function $(A){i(P,_,C,E,$,"throw",A)}E(void 0)})}}var l,c,u,d,h,p,f,y,m,b,g,w=[].splice;return p=10,c=5,g=parser$5,f=Queues_1,d=Job_1,h=LocalDatastore_1,y=RedisDatastore_1,u=Events_1,m=States_1,b=Sync_1,l=function(){class S{constructor(v={},..._){var C,P;this._addToQueue=this._addToQueue.bind(this),this._validateOptions(v,_),g.load(v,this.instanceDefaults,this),this._queues=new f(p),this._scheduled={},this._states=new m(["RECEIVED","QUEUED","RUNNING","EXECUTING"].concat(this.trackDoneStatus?["DONE"]:[])),this._limiter=null,this.Events=new u(this),this._submitLock=new b("submit",this.Promise),this._registerLock=new b("register",this.Promise),P=g.load(v,this.storeDefaults,{}),this._store=function(){if(this.datastore==="redis"||this.datastore==="ioredis"||this.connection!=null)return C=g.load(v,this.redisStoreDefaults,{}),new y(this,P,C);if(this.datastore==="local")return C=g.load(v,this.localStoreDefaults,{}),new h(this,P,C);throw new S.prototype.BottleneckError(`Invalid datastore type: ${this.datastore}`)}.call(this),this._queues.on("leftzero",()=>{var E;return(E=this._store.heartbeat)!=null&&typeof E.ref=="function"?E.ref():void 0}),this._queues.on("zero",()=>{var E;return(E=this._store.heartbeat)!=null&&typeof E.unref=="function"?E.unref():void 0})}_validateOptions(v,_){if(!(v!=null&&typeof v=="object"&&_.length===0))throw new S.prototype.BottleneckError("Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.")}ready(){return this._store.ready}clients(){return this._store.clients}channel(){return`b_${this.id}`}channel_client(){return`b_${this.id}_${this._store.clientId}`}publish(v){return this._store.__publish__(v)}disconnect(v=!0){return this._store.__disconnect__(v)}chain(v){return this._limiter=v,this}queued(v){return this._queues.queued(v)}clusterQueued(){return this._store.__queued__()}empty(){return this.queued()===0&&this._submitLock.isEmpty()}running(){return this._store.__running__()}done(){return this._store.__done__()}jobStatus(v){return this._states.jobStatus(v)}jobs(v){return this._states.statusJobs(v)}counts(){return this._states.statusCounts()}_randomIndex(){return Math.random().toString(36).slice(2)}check(v=1){return this._store.__check__(v)}_clearGlobalState(v){return this._scheduled[v]!=null?(clearTimeout(this._scheduled[v].expiration),delete this._scheduled[v],!0):!1}_free(v,_,C,P){var E=this;return a(function*(){var $,A;try{var k=yield E._store.__free__(v,C.weight);if(A=k.running,E.Events.trigger("debug",`Freed ${C.id}`,P),A===0&&E.empty())return E.Events.trigger("idle")}catch(R){return $=R,E.Events.trigger("error",$)}})()}_run(v,_,C){var P,E,$;return _.doRun(),P=this._clearGlobalState.bind(this,v),$=this._run.bind(this,v,_),E=this._free.bind(this,v,_),this._scheduled[v]={timeout:setTimeout(()=>_.doExecute(this._limiter,P,$,E),C),expiration:_.options.expiration!=null?setTimeout(function(){return _.doExpire(P,$,E)},C+_.options.expiration):void 0,job:_}}_drainOne(v){return this._registerLock.schedule(()=>{var _,C,P,E,$;if(this.queued()===0)return this.Promise.resolve(null);$=this._queues.getFirst();var A=P=$.first();return E=A.options,_=A.args,v!=null&&E.weight>v?this.Promise.resolve(null):(this.Events.trigger("debug",`Draining ${E.id}`,{args:_,options:E}),C=this._randomIndex(),this._store.__register__(C,E.weight,E.expiration).then(({success:k,wait:R,reservoir:D})=>{var L;return this.Events.trigger("debug",`Drained ${E.id}`,{success:k,args:_,options:E}),k?($.shift(),L=this.empty(),L&&this.Events.trigger("empty"),D===0&&this.Events.trigger("depleted",L),this._run(C,P,R),this.Promise.resolve(E.weight)):this.Promise.resolve(null)}))})}_drainAll(v,_=0){return this._drainOne(v).then(C=>{var P;return C!=null?(P=v!=null?v-C:v,this._drainAll(P,_+C)):this.Promise.resolve(_)}).catch(C=>this.Events.trigger("error",C))}_dropAllQueued(v){return this._queues.shiftAll(function(_){return _.doDrop({message:v})})}stop(v={}){var _,C;return v=g.load(v,this.stopDefaults),C=P=>{var E;return E=()=>{var $;return $=this._states.counts,$[0]+$[1]+$[2]+$[3]===P},new this.Promise(($,A)=>E()?$():this.on("done",()=>{if(E())return this.removeAllListeners("done"),$()}))},_=v.dropWaitingJobs?(this._run=function(P,E){return E.doDrop({message:v.dropErrorMessage})},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule(()=>this._submitLock.schedule(()=>{var P,E,$;E=this._scheduled;for(P in E)$=E[P],this.jobStatus($.job.options.id)==="RUNNING"&&(clearTimeout($.timeout),clearTimeout($.expiration),$.job.doDrop({message:v.dropErrorMessage}));return this._dropAllQueued(v.dropErrorMessage),C(0)}))):this.schedule({priority:p-1,weight:0},()=>C(1)),this._receive=function(P){return P._reject(new S.prototype.BottleneckError(v.enqueueErrorMessage))},this.stop=()=>this.Promise.reject(new S.prototype.BottleneckError("stop() has already been called")),_}_addToQueue(v){var _=this;return a(function*(){var C,P,E,$,A,k,R;C=v.args,$=v.options;try{var D=yield _._store.__submit__(_.queued(),$.weight);A=D.reachedHWM,P=D.blocked,R=D.strategy}catch(L){return E=L,_.Events.trigger("debug",`Could not queue ${$.id}`,{args:C,options:$,error:E}),v.doDrop({error:E}),!1}return P?(v.doDrop(),!0):A&&(k=R===S.prototype.strategy.LEAK?_._queues.shiftLastFrom($.priority):R===S.prototype.strategy.OVERFLOW_PRIORITY?_._queues.shiftLastFrom($.priority+1):R===S.prototype.strategy.OVERFLOW?v:void 0,k?.doDrop(),k==null||R===S.prototype.strategy.OVERFLOW)?(k==null&&v.doDrop(),A):(v.doQueue(A,P),_._queues.push(v),yield _._drainAll(),A)})()}_receive(v){return this._states.jobStatus(v.options.id)!=null?(v._reject(new S.prototype.BottleneckError(`A job with the same id already exists (id=${v.options.id})`)),!1):(v.doReceive(),this._submitLock.schedule(this._addToQueue,v))}submit(...v){var _,C,P,E,$,A,k;if(typeof v[0]=="function"){var R,D,L,N;$=v,R=$,D=n(R),C=D[0],v=D.slice(1),L=w.call(v,-1),N=e(L,1),_=N[0],E=g.load({},this.jobDefaults)}else{var O,I,M,B;A=v,O=A,I=n(O),E=I[0],C=I[1],v=I.slice(2),M=w.call(v,-1),B=e(M,1),_=B[0],E=g.load(E,this.jobDefaults)}return k=(...K)=>new this.Promise(function(U,H){return C(...K,function(...V){return(V[0]!=null?H:U)(V)})}),P=new d(k,v,E,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),P.promise.then(function(K){return typeof _=="function"?_(...K):void 0}).catch(function(K){return Array.isArray(K)?typeof _=="function"?_(...K):void 0:typeof _=="function"?_(K):void 0}),this._receive(P)}schedule(...v){var _,C,P;if(typeof v[0]=="function"){var E=v,$=n(E);P=$[0],v=$.slice(1),C={}}else{var A=v,k=n(A);C=k[0],P=k[1],v=k.slice(2)}return _=new d(P,v,C,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(_),_.promise}wrap(v){var _,C;return _=this.schedule.bind(this),C=function(...E){return _(v.bind(this),...E)},C.withOptions=function(P,...E){return _(P,v,...E)},C}updateSettings(v={}){var _=this;return a(function*(){return yield _._store.__updateSettings__(g.overwrite(v,_.storeDefaults)),g.overwrite(v,_.instanceDefaults,_),_})()}currentReservoir(){return this._store.__currentReservoir__()}incrementReservoir(v=0){return this._store.__incrementReservoir__(v)}}return S.default=S,S.Events=u,S.version=S.prototype.version=require$$8.version,S.strategy=S.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},S.BottleneckError=S.prototype.BottleneckError=BottleneckError_1,S.Group=S.prototype.Group=requireGroup(),S.RedisConnection=S.prototype.RedisConnection=RedisConnection_1,S.IORedisConnection=S.prototype.IORedisConnection=IORedisConnection_1,S.Batcher=S.prototype.Batcher=requireBatcher(),S.prototype.jobDefaults={priority:c,weight:1,expiration:null,id:"<no-id>"},S.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:S.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},S.prototype.localStoreDefaults={Promise,timeout:null,heartbeatInterval:250},S.prototype.redisStoreDefaults={Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},S.prototype.instanceDefaults={datastore:"local",connection:null,id:"<no-id>",rejectOnDrop:!0,trackDoneStatus:!1,Promise},S.prototype.stopDefaults={enqueueErrorMessage:"This limiter has been stopped and cannot accept new jobs.",dropWaitingJobs:!0,dropErrorMessage:"This limiter has been stopped."},S}.call(void 0),Bottleneck_1=l,Bottleneck_1}var lib=requireBottleneck();const Bottleneck=getDefaultExportFromCjs(lib),AppContext=createContext(),AppContextProvider=e=>createComponent(AppContext.Provider,{value:{},get children(){return e.children}}),requestsPerSecond=5,throttleTime=requestsPerSecond/1e3,bottleneck=new Bottleneck({minTime:throttleTime});function GetBottleNeck(){return bottleneck}const MapAPIKey="5b3ce3597851110001cf62481474edebc3cc4849ae6af49e200d5c77",useAppContext=()=>useContext(AppContext);function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(e=>t=>{const n=toString.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction$1(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject=e=>e!==null&&typeof e=="object",isBoolean=e=>e===!0||e===!1,isPlainObject=e=>{if(kindOf(e)!=="object")return!1;const t=getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction$1(e.pipe),isFormData=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction$1(e.append)&&((t=kindOf(e))==="formdata"||t==="object"&&isFunction$1(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),isArray(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let a;for(r=0;r<i;r++)a=s[r],t.call(null,e[a],a,e)}}function findKey(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e}=isContextDefined(this)&&this||{},t={},n=(r,o)=>{const s=e&&findKey(t,o)||o;isPlainObject(t[s])&&isPlainObject(r)?t[s]=merge(t[s],r):isPlainObject(r)?t[s]=merge({},r):isArray(r)?t[s]=r.slice():t[s]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&forEach(arguments[r],n);return t}const extend=(e,t,n,{allOwnKeys:r}={})=>(forEach(t,(o,s)=>{n&&isFunction$1(o)?e[s]=bind(o,n):e[s]=o},{allOwnKeys:r}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject=(e,t,n,r)=>{let o,s,i;const a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)i=o[s],(!r||r(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=n!==!1&&getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},toArray=e=>{if(!e)return null;if(isArray(e))return e;let t=e.length;if(!isNumber$1(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},isTypedArray=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const s=o.value;t.call(e,s[0],s[1])}},matchAll=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),hasOwnProperty=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};forEach(n,(o,s)=>{let i;(i=t(o,s,e))!==!1&&(r[s]=i||o)}),Object.defineProperties(e,r)},freezeMethods=e=>{reduceDescriptors(e,(t,n)=>{if(isFunction$1(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(isFunction$1(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(e,t)=>{const n={},r=o=>{o.forEach(s=>{n[s]=!0})};return isArray(e)?r(e):r(String(e).split(t)),n},noop$1=()=>{},toFiniteNumber=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(e=16,t=ALPHABET.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function isSpecCompliantForm(e){return!!(e&&isFunction$1(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const toJSONObject=e=>{const t=new Array(10),n=(r,o)=>{if(isObject(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const s=isArray(r)?[]:{};return forEach(r,(i,a)=>{const l=n(i,o+1);!isUndefined(l)&&(s[a]=l)}),t[o]=void 0,s}}return r};return n(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction$1(e))&&isFunction$1(e.then)&&isFunction$1(e.catch),_setImmediate=((e,t)=>e?setImmediate:t?((n,r)=>(_global.addEventListener("message",({source:o,data:s})=>{o===_global&&s===n&&r.length&&r.shift()()},!1),o=>{r.push(o),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function e(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(e,t,n,r,o,s)=>{const i=Object.create(prototype$1);return utils$1.toFlatObject(e,i,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),AxiosError.call(i,e.message,t,n,r,o),i.cause=e,i.name=e.name,s&&Object.assign(i,s),i};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,n){return e?e.concat(t).map(function(o,s){return o=removeBrackets(o),!n&&s?"["+o+"]":o}).join(n?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function e(t){return/^is[A-Z]/.test(t)});function toFormData(e,t,n){if(!utils$1.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=utils$1.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,m){return!utils$1.isUndefined(m[y])});const r=n.metaTokens,o=n.visitor||u,s=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(o))throw new TypeError("visitor must be a function");function c(f){if(f===null)return"";if(utils$1.isDate(f))return f.toISOString();if(!l&&utils$1.isBlob(f))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(f)||utils$1.isTypedArray(f)?l&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,y,m){let b=f;if(f&&!m&&typeof f=="object"){if(utils$1.endsWith(y,"{}"))y=r?y:y.slice(0,-2),f=JSON.stringify(f);else if(utils$1.isArray(f)&&isFlatArray(f)||(utils$1.isFileList(f)||utils$1.endsWith(y,"[]"))&&(b=utils$1.toArray(f)))return y=removeBrackets(y),b.forEach(function(w,S){!(utils$1.isUndefined(w)||w===null)&&t.append(i===!0?renderKey([y],S,s):i===null?y:y+"[]",c(w))}),!1}return isVisitable(f)?!0:(t.append(renderKey(m,y,s),c(f)),!1)}const d=[],h=Object.assign(predicates,{defaultVisitor:u,convertValue:c,isVisitable});function p(f,y){if(!utils$1.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(f),utils$1.forEach(f,function(b,g){(!(utils$1.isUndefined(b)||b===null)&&o.call(t,b,utils$1.isString(g)?g.trim():g,y,h))===!0&&p(b,y?y.concat(g):[g])}),d.pop()}}if(!utils$1.isObject(e))throw new TypeError("data must be an object");return p(e),t}function encode$1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData(e,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function e(t,n){this._pairs.push([t,n])};prototype.toString=function e(t){const n=t?function(r){return t.call(this,r,encode$1)}:encode$1;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,n){if(!t)return e;const r=n&&n.encode||encode,o=n&&n.serialize;let s;if(o?s=o(t,n):s=utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,n).toString(r),s){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class InterceptorManager{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils$1.forEach(this.handlers,function(r){r!==null&&t(r)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$2={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform$1={...utils,...platform$2};function toURLEncodedForm(e,t){return toFormData(e,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,s){return platform$1.isNode&&utils$1.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(e){const t={},n=Object.keys(e);let r;const o=n.length;let s;for(r=0;r<o;r++)s=n[r],t[s]=e[s];return t}function formDataToJSON(e){function t(n,r,o,s){let i=n[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),l=s>=n.length;return i=!i&&utils$1.isArray(o)?o.length:i,l?(utils$1.hasOwnProp(o,i)?o[i]=[o[i],r]:o[i]=r,!a):((!o[i]||!utils$1.isObject(o[i]))&&(o[i]=[]),t(n,r,o[i],s)&&utils$1.isArray(o[i])&&(o[i]=arrayToObject(o[i])),!a)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const n={};return utils$1.forEachEntry(e,(r,o)=>{t(parsePropPath(r),o,n,0)}),n}return null}function stringifySafely(e,t,n){if(utils$1.isString(e))try{return(t||JSON.parse)(e),utils$1.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function e(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,s=utils$1.isObject(t);if(s&&utils$1.isHTMLForm(t)&&(t=new FormData(t)),utils$1.isFormData(t))return o?JSON.stringify(formDataToJSON(t)):t;if(utils$1.isArrayBuffer(t)||utils$1.isBuffer(t)||utils$1.isStream(t)||utils$1.isFile(t)||utils$1.isBlob(t)||utils$1.isReadableStream(t))return t;if(utils$1.isArrayBufferView(t))return t.buffer;if(utils$1.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((a=utils$1.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return toFormData(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function e(t){const n=this.transitional||defaults.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(utils$1.isResponse(t)||utils$1.isReadableStream(t))return t;if(t&&utils$1.isString(t)&&(r&&!this.responseType||o)){const i=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?AxiosError.from(a,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function e(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(i){o=i.indexOf(":"),n=i.substring(0,o).trim().toLowerCase(),r=i.substring(o+1).trim(),!(!n||t[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,n,r,o){if(utils$1.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!utils$1.isString(t)){if(utils$1.isString(r))return t.indexOf(r)!==-1;if(utils$1.isRegExp(r))return r.test(t)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function buildAccessors(e,t){const n=utils$1.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,s,i){return this[r].call(this,t,o,s,i)},configurable:!0})})}class AxiosHeaders{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function s(a,l,c){const u=normalizeHeader(l);if(!u)throw new Error("header name must be a non-empty string");const d=utils$1.findKey(o,u);(!d||o[d]===void 0||c===!0||c===void 0&&o[d]!==!1)&&(o[d||l]=normalizeValue(a))}const i=(a,l)=>utils$1.forEach(a,(c,u)=>s(c,u,l));if(utils$1.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(utils$1.isString(t)&&(t=t.trim())&&!isValidHeaderName(t))i(parseHeaders(t),n);else if(utils$1.isHeaders(t))for(const[a,l]of t.entries())s(l,a,r);else t!=null&&s(n,t,r);return this}get(t,n){if(t=normalizeHeader(t),t){const r=utils$1.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return parseTokens(o);if(utils$1.isFunction(n))return n.call(this,o,r);if(utils$1.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=normalizeHeader(t),t){const r=utils$1.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||matchHeaderValue(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function s(i){if(i=normalizeHeader(i),i){const a=utils$1.findKey(r,i);a&&(!n||matchHeaderValue(r,r[a],a,n))&&(delete r[a],o=!0)}}return utils$1.isArray(t)?t.forEach(s):s(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const s=n[r];(!t||matchHeaderValue(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const n=this,r={};return utils$1.forEach(this,(o,s)=>{const i=utils$1.findKey(r,s);if(i){n[i]=normalizeValue(o),delete n[s];return}const a=t?formatHeader(s):String(s).trim();a!==s&&delete n[s],n[a]=normalizeValue(o),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return utils$1.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&utils$1.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function s(i){const a=normalizeHeader(i);r[a]||(buildAccessors(o,i),r[a]=!0)}return utils$1.isArray(t)?t.forEach(s):s(t),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(e,t){const n=this||defaults$1,r=t||n,o=AxiosHeaders$1.from(r.headers);let s=r.data;return utils$1.forEach(e,function(a){s=a.call(n,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function isCancel(e){return!!(e&&e.__CANCEL__)}function CanceledError(e,t,n){AxiosError.call(this,e??"canceled",AxiosError.ERR_CANCELED,t,n),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,s=0,i;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=r[s];i||(i=c),n[o]=l,r[o]=c;let d=s,h=0;for(;d!==o;)h+=n[d++],d=d%e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-i<t)return;const p=u&&c-u;return p?Math.round(h*1e3/p):void 0}}function throttle(e,t){let n=0,r=1e3/t,o,s;const i=(c,u=Date.now())=>{n=u,o=null,s&&(clearTimeout(s),s=null),e.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-n;d>=r?i(c,u):(o=c,s||(s=setTimeout(()=>{s=null,i(o)},r-d)))},()=>o&&i(o)]}const progressEventReducer=(e,t,n=3)=>{let r=0;const o=speedometer(50,250);return throttle(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,l=i-r,c=o(l),u=i<=a;r=i;const d={loaded:i,total:a,progress:a?i/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-i)/c:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},n)},progressEventDecorator=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},asyncDecorator=e=>(...t)=>utils$1.asap(()=>e(...t)),isURLSameOrigin=platform$1.hasStandardBrowserEnv?function e(){const t=platform$1.navigator&&/(msie|trident)/i.test(platform$1.navigator.userAgent),n=document.createElement("a");let r;function o(s){let i=s;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(i){const a=utils$1.isString(i)?o(i):i;return a.protocol===r.protocol&&a.host===r.host}}():function e(){return function(){return!0}}(),cookies=platform$1.hasStandardBrowserEnv?{write(e,t,n,r,o,s){const i=[e+"="+encodeURIComponent(t)];utils$1.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),utils$1.isString(r)&&i.push("path="+r),utils$1.isString(o)&&i.push("domain="+o),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig(e,t){t=t||{};const n={};function r(c,u,d){return utils$1.isPlainObject(c)&&utils$1.isPlainObject(u)?utils$1.merge.call({caseless:d},c,u):utils$1.isPlainObject(u)?utils$1.merge({},u):utils$1.isArray(u)?u.slice():u}function o(c,u,d){if(utils$1.isUndefined(u)){if(!utils$1.isUndefined(c))return r(void 0,c,d)}else return r(c,u,d)}function s(c,u){if(!utils$1.isUndefined(u))return r(void 0,u)}function i(c,u){if(utils$1.isUndefined(u)){if(!utils$1.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in t)return r(c,u);if(d in e)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(c,u)=>o(headersToObject(c),headersToObject(u),!0)};return utils$1.forEach(Object.keys(Object.assign({},e,t)),function(u){const d=l[u]||o,h=d(e[u],t[u],u);utils$1.isUndefined(h)&&d!==a||(n[u]=h)}),n}const resolveConfig=e=>{const t=mergeConfig({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:s,headers:i,auth:a}=t;t.headers=i=AxiosHeaders$1.from(i),t.url=buildURL(buildFullPath(t.baseURL,t.url),e.params,e.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(utils$1.isFormData(n)){if(platform$1.hasStandardBrowserEnv||platform$1.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((l=i.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];i.setContentType([c||"multipart/form-data",...u].join("; "))}}if(platform$1.hasStandardBrowserEnv&&(r&&utils$1.isFunction(r)&&(r=r(t)),r||r!==!1&&isURLSameOrigin(t.url))){const c=o&&s&&cookies.read(s);c&&i.set(o,c)}return t},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(n,r){const o=resolveConfig(e);let s=o.data;const i=AxiosHeaders$1.from(o.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=o,u,d,h,p,f;function y(){p&&p(),f&&f(),o.cancelToken&&o.cancelToken.unsubscribe(u),o.signal&&o.signal.removeEventListener("abort",u)}let m=new XMLHttpRequest;m.open(o.method.toUpperCase(),o.url,!0),m.timeout=o.timeout;function b(){if(!m)return;const w=AxiosHeaders$1.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),x={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:w,config:e,request:m};settle(function(_){n(_),y()},function(_){r(_),y()},x),m=null}"onloadend"in m?m.onloadend=b:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(b)},m.onabort=function(){m&&(r(new AxiosError("Request aborted",AxiosError.ECONNABORTED,e,m)),m=null)},m.onerror=function(){r(new AxiosError("Network Error",AxiosError.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let S=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const x=o.transitional||transitionalDefaults;o.timeoutErrorMessage&&(S=o.timeoutErrorMessage),r(new AxiosError(S,x.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,e,m)),m=null},s===void 0&&i.setContentType(null),"setRequestHeader"in m&&utils$1.forEach(i.toJSON(),function(S,x){m.setRequestHeader(x,S)}),utils$1.isUndefined(o.withCredentials)||(m.withCredentials=!!o.withCredentials),a&&a!=="json"&&(m.responseType=o.responseType),c&&([h,f]=progressEventReducer(c,!0),m.addEventListener("progress",h)),l&&m.upload&&([d,p]=progressEventReducer(l),m.upload.addEventListener("progress",d),m.upload.addEventListener("loadend",p)),(o.cancelToken||o.signal)&&(u=w=>{m&&(r(!w||w.type?new CanceledError(null,e,m):w),m.abort(),m=null)},o.cancelToken&&o.cancelToken.subscribe(u),o.signal&&(o.signal.aborted?u():o.signal.addEventListener("abort",u)));const g=parseProtocol(o.url);if(g&&platform$1.protocols.indexOf(g)===-1){r(new AxiosError("Unsupported protocol "+g+":",AxiosError.ERR_BAD_REQUEST,e));return}m.send(s||null)})},composeSignals=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,o;const s=function(c){if(!o){o=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof AxiosError?u:new CanceledError(u instanceof Error?u.message:u))}};let i=t&&setTimeout(()=>{i=null,s(new AxiosError(`timeout ${t} of ms exceeded`,AxiosError.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),e=null)};e.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>utils$1.asap(a),l}},composeSignals$1=composeSignals,streamChunk=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,o;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},readBytes=async function*(e,t){for await(const n of readStream(e))yield*streamChunk(n,t)},readStream=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},trackStream=(e,t,n,r)=>{const o=readBytes(e,t);let s=0,i,a=l=>{i||(i=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await o.next();if(c){a(),l.close();return}let d=u.byteLength;if(n){let h=s+=d;n(h)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),o.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),test=(e,...t)=>{try{return!!e(...t)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let e=!1;const t=new Request(platform$1.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(e=>e.body)};isFetchSupported&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!resolvers[t]&&(resolvers[t]=utils$1.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new AxiosError(`Response type '${t}' is not supported`,AxiosError.ERR_NOT_SUPPORT,r)})})})(new Response);const getBodyLength=async e=>{if(e==null)return 0;if(utils$1.isBlob(e))return e.size;if(utils$1.isSpecCompliantForm(e))return(await new Request(platform$1.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(e)||utils$1.isArrayBuffer(e))return e.byteLength;if(utils$1.isURLSearchParams(e)&&(e=e+""),utils$1.isString(e))return(await encodeText(e)).byteLength},resolveBodyLength=async(e,t)=>{const n=utils$1.toFiniteNumber(e.getContentLength());return n??getBodyLength(t)},fetchAdapter=isFetchSupported&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:s,timeout:i,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=resolveConfig(e);c=c?(c+"").toLowerCase():"text";let p=composeSignals$1([o,s&&s.toAbortSignal()],i),f;const y=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let m;try{if(l&&supportsRequestStream&&n!=="get"&&n!=="head"&&(m=await resolveBodyLength(u,r))!==0){let x=new Request(t,{method:"POST",body:r,duplex:"half"}),v;if(utils$1.isFormData(r)&&(v=x.headers.get("content-type"))&&u.setContentType(v),x.body){const[_,C]=progressEventDecorator(m,progressEventReducer(asyncDecorator(l)));r=trackStream(x.body,DEFAULT_CHUNK_SIZE,_,C)}}utils$1.isString(d)||(d=d?"include":"omit");const b="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:b?d:void 0});let g=await fetch(f);const w=supportsResponseStream&&(c==="stream"||c==="response");if(supportsResponseStream&&(a||w&&y)){const x={};["status","statusText","headers"].forEach(P=>{x[P]=g[P]});const v=utils$1.toFiniteNumber(g.headers.get("content-length")),[_,C]=a&&progressEventDecorator(v,progressEventReducer(asyncDecorator(a),!0))||[];g=new Response(trackStream(g.body,DEFAULT_CHUNK_SIZE,_,()=>{C&&C(),y&&y()}),x)}c=c||"text";let S=await resolvers[utils$1.findKey(resolvers,c)||"text"](g,e);return!w&&y&&y(),await new Promise((x,v)=>{settle(x,v,{data:S,headers:AxiosHeaders$1.from(g.headers),status:g.status,statusText:g.statusText,config:e,request:f})})}catch(b){throw y&&y(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,e,f),{cause:b.cause||b}):AxiosError.from(b,b&&b.code,e,f)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||e===null||e===!1,adapters={getAdapter:e=>{e=utils$1.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let s=0;s<t;s++){n=e[s];let i;if(r=n,!isResolvedHandle(n)&&(r=knownAdapters[(i=String(n)).toLowerCase()],r===void 0))throw new AxiosError(`Unknown adapter '${i}'`);if(r)break;o[i||"#"+s]=r}if(!r){const s=Object.entries(o).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let i=t?s.length>1?`since :
`+s.map(renderReason).join(`
`):" "+renderReason(s[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults$1.adapter)(e).then(function(r){return throwIfCancellationRequested(e),r.data=transformData.call(e,e.transformResponse,r),r.headers=AxiosHeaders$1.from(r.headers),r},function(r){return isCancel(r)||(throwIfCancellationRequested(e),r&&r.response&&(r.response.data=transformData.call(e,e.transformResponse,r.response),r.response.headers=AxiosHeaders$1.from(r.response.headers))),Promise.reject(r)})}const VERSION="1.7.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{validators$1[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function e(t,n,r){function o(s,i){return"[Axios v"+VERSION+"] Transitional option '"+s+"'"+i+(r?". "+r:"")}return(s,i,a)=>{if(t===!1)throw new AxiosError(o(i," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[i]&&(deprecatedWarnings[i]=!0,console.warn(o(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,i,a):!0}};function assertOptions(e,t,n){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const s=r[o],i=t[s];if(i){const a=e[s],l=a===void 0||i(a,s,e);if(l!==!0)throw new AxiosError("option "+s+" must be "+l,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+s,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(t){this.defaults=t,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mergeConfig(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:s}=n;r!==void 0&&validator.assertOptions(r,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!=null&&(utils$1.isFunction(o)?n.paramsSerializer={serialize:o}:validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=s&&utils$1.merge(s.common,s[n.method]);s&&utils$1.forEach(["delete","get","head","post","put","patch","common"],f=>{delete s[f]}),n.headers=AxiosHeaders$1.concat(i,s);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let u,d=0,h;if(!l){const f=[dispatchRequest.bind(this),void 0];for(f.unshift.apply(f,a),f.push.apply(f,c),h=f.length,u=Promise.resolve(n);d<h;)u=u.then(f[d++],f[d++]);return u}h=a.length;let p=n;for(d=0;d<h;){const f=a[d++],y=a[d++];try{p=f(p)}catch(m){y.call(this,m);break}}try{u=dispatchRequest.call(this,p)}catch(f){return Promise.reject(f)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(t){t=mergeConfig(this.defaults,t);const n=buildFullPath(t.baseURL,t.url);return buildURL(n,t.params,t.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function e(t){Axios.prototype[t]=function(n,r){return this.request(mergeConfig(r||{},{method:t,url:n,data:(r||{}).data}))}});utils$1.forEach(["post","put","patch"],function e(t){function n(r){return function(s,i,a){return this.request(mergeConfig(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}Axios.prototype[t]=n(),Axios.prototype[t+"Form"]=n(!0)});const Axios$1=Axios;class CancelToken{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(o=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](o);r._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(a=>{r.subscribe(a),s=a}).then(o);return i.cancel=function(){r.unsubscribe(s)},i},t(function(s,i,a){r.reason||(r.reason=new CanceledError(s,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new CancelToken(function(o){t=o}),cancel:t}}}const CancelToken$1=CancelToken;function spread(e){return function(n){return e.apply(null,n)}}function isAxiosError(e){return utils$1.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([e,t])=>{HttpStatusCode[t]=e});const HttpStatusCode$1=HttpStatusCode;function createInstance(e){const t=new Axios$1(e),n=bind(Axios$1.prototype.request,t);return utils$1.extend(n,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return createInstance(mergeConfig(e,o))},n}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function e(t){return Promise.all(t)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios,addressPicker="",style="";class SelectableLocation{location;label="";constructor(t){this.location=t.geometry,this.label=this.GetLabel(t.properties)}GetLabel(t){const n=[t.name];return t.housenumber!==void 0&&t.street!==void 0&&t.locality!==void 0&&n.push([t.housenumber,t.street].join(" "),t.locality),n.push(t.region_a,t.country_a),n.join(", ")}GetCoordinates(){return this.location.coordinates}}const AddressPicker=({classNames:e,updateAddress:t,defaultText:n})=>{const r=GetBottleNeck(),o="https://api.openrouteservice.org/geocode/autocomplete?",s=new URLSearchParams;s.set("api_key",MapAPIKey);const a=createAsyncOptions(async l=>l==""?[]:await r.schedule(async()=>{s.set("text",l);const c=o+s.toString();return(await(await axios$1.get(c)).data).features.map(d=>new SelectableLocation(d))}));return a.format=l=>l.label,createComponent(Select$1,mergeProps({placeholder:n||"Pick a destination...",autofocus:!0},a,{get class(){return["addressPicker",e].join(" ").trim()},onChange:t}))};function chain(e){return(...t)=>{for(const n of e)n&&n(...t)}}var access$1=e=>typeof e=="function"&&!e.length?e():e,asArray=e=>Array.isArray(e)?e:e?[e]:[];function accessWith(e,...t){return typeof e=="function"?e(...t):e}var tryOnCleanup=onCleanup;function makeEventListener(e,t,n,r){return e.addEventListener(t,n,r),tryOnCleanup(e.removeEventListener.bind(e,t,n,r))}function createEventListener(e,t,n,r){const o=()=>{asArray(access$1(e)).forEach(s=>{s&&asArray(access$1(t)).forEach(i=>makeEventListener(s,i,n,r))})};typeof e=="function"?createEffect(o):createRenderEffect(o)}var FALLBACK=Symbol("fallback");function dispose(e){for(const t of e)t.dispose()}function keyArray(e,t,n,r={}){const o=new Map;return onCleanup(()=>dispose(o.values())),()=>{const i=e()||[];return i[$TRACK],untrack(()=>{if(!i.length)return dispose(o.values()),o.clear(),r.fallback?[createRoot(d=>(o.set(FALLBACK,{dispose:d}),r.fallback()))]:[];const a=new Array(i.length),l=o.get(FALLBACK);if(!o.size||l){l?.dispose(),o.delete(FALLBACK);for(let u=0;u<i.length;u++){const d=i[u],h=t(d,u);s(a,d,u,h)}return a}const c=new Set(o.keys());for(let u=0;u<i.length;u++){const d=i[u],h=t(d,u);c.delete(h);const p=o.get(h);p?(a[u]=p.mapped,p.setIndex?.(u),p.setItem(()=>d)):s(a,d,u,h)}for(const u of c)o.get(u)?.dispose(),o.delete(u);return a})};function s(i,a,l,c){createRoot(u=>{const[d,h]=createSignal(a),p={setItem:h,dispose:u};if(n.length>1){const[f,y]=createSignal(l);p.setIndex=y,p.mapped=n(d,f)}else p.mapped=n(d);o.set(c,p),i[l]=p.mapped})}}function Key(e){const{by:t}=e;return createMemo(keyArray(()=>e.each,typeof t=="function"?t:n=>n[t],e.children,"fallback"in e?{fallback:()=>e.fallback}:void 0))}var extractCSSregex=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function stringStyleToObject(e){const t={};let n;for(;n=extractCSSregex.exec(e);)t[n[1]]=n[2];return t}function combineStyle(e,t){if(typeof e=="string"){if(typeof t=="string")return`${e};${t}`;e=stringStyleToObject(e)}else typeof t=="string"&&(t=stringStyleToObject(t));return{...e,...t}}function mergeRefs(...e){return chain(e)}function addItemToArray(e,t,n=-1){return n in e?[...e.slice(0,n),t,...e.slice(n)]:[...e,t]}function removeItemFromArray(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function isNumber(e){return typeof e=="number"}function isString(e){return Object.prototype.toString.call(e)==="[object String]"}function isFunction(e){return typeof e=="function"}function createGenerateId(e){return t=>`${e()}-${t}`}function contains$1(e,t){return e?e===t||e.contains(t):!1}function getActiveElement(e,t=!1){const{activeElement:n}=getDocument(e);if(!n?.nodeName)return null;if(isFrame(n)&&n.contentDocument)return getActiveElement(n.contentDocument.body,t);if(t){const r=n.getAttribute("aria-activedescendant");if(r){const o=getDocument(n).getElementById(r);if(o)return o}}return n}function getWindow$1(e){return getDocument(e).defaultView||window}function getDocument(e){return e?e.ownerDocument||e:document}function isFrame(e){return e.tagName==="IFRAME"}var EventKey=(e=>(e.Escape="Escape",e.Enter="Enter",e.Tab="Tab",e.Space=" ",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e))(EventKey||{});function testUserAgent(e){return typeof window>"u"||window.navigator==null?!1:window.navigator.userAgentData?.brands.some(t=>e.test(t.brand))||e.test(window.navigator.userAgent)}function testPlatform(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.userAgentData?.platform||window.navigator.platform):!1}function isMac(){return testPlatform(/^Mac/i)}function isIPhone(){return testPlatform(/^iPhone/i)}function isIPad(){return testPlatform(/^iPad/i)||isMac()&&navigator.maxTouchPoints>1}function isIOS(){return isIPhone()||isIPad()}function isAppleDevice(){return isMac()||isIOS()}function isWebKit$1(){return testUserAgent(/AppleWebKit/i)&&!isChrome()}function isChrome(){return testUserAgent(/Chrome/i)}function callHandler(e,t){return t&&(isFunction(t)?t(e):t[0](t[1],e)),e?.defaultPrevented}function composeEventHandlers(e){return t=>{for(const n of e)callHandler(t,n)}}function isCtrlKey(e){return isMac()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey}function focusWithoutScrolling(e){if(e)if(supportsPreventScroll())e.focus({preventScroll:!0});else{const t=getScrollableElements(e);e.focus(),restoreScrollPosition(t)}}var supportsPreventScrollCached=null;function supportsPreventScroll(){if(supportsPreventScrollCached==null){supportsPreventScrollCached=!1;try{document.createElement("div").focus({get preventScroll(){return supportsPreventScrollCached=!0,!0}})}catch{}}return supportsPreventScrollCached}function getScrollableElements(e){let t=e.parentNode;const n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function restoreScrollPosition(e){for(const{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}var focusableElements=["input:not([type='hidden']):not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","[tabindex]","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]:not([contenteditable='false'])"],tabbableElements=[...focusableElements,'[tabindex]:not([tabindex="-1"]):not([disabled])'],FOCUSABLE_ELEMENT_SELECTOR=`${focusableElements.join(":not([hidden]),")},[tabindex]:not([disabled]):not([hidden])`,TABBABLE_ELEMENT_SELECTOR=tabbableElements.join(':not([hidden]):not([tabindex="-1"]),');function getAllTabbableIn(e,t){const r=Array.from(e.querySelectorAll(FOCUSABLE_ELEMENT_SELECTOR)).filter(isTabbable);return t&&isTabbable(e)&&r.unshift(e),r.forEach((o,s)=>{if(isFrame(o)&&o.contentDocument){const i=o.contentDocument.body,a=getAllTabbableIn(i,!1);r.splice(s,1,...a)}}),r}function isTabbable(e){return isFocusable(e)&&!hasNegativeTabIndex(e)}function isFocusable(e){return e.matches(FOCUSABLE_ELEMENT_SELECTOR)&&isElementVisible(e)}function hasNegativeTabIndex(e){return Number.parseInt(e.getAttribute("tabindex")||"0",10)<0}function isElementVisible(e,t){return e.nodeName!=="#comment"&&isStyleVisible(e)&&isAttributeVisible(e,t)&&(!e.parentElement||isElementVisible(e.parentElement,e))}function isStyleVisible(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;const{display:t,visibility:n}=e.style;let r=t!=="none"&&n!=="hidden"&&n!=="collapse";if(r){if(!e.ownerDocument.defaultView)return r;const{getComputedStyle:o}=e.ownerDocument.defaultView,{display:s,visibility:i}=o(e);r=s!=="none"&&i!=="hidden"&&i!=="collapse"}return r}function isAttributeVisible(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function isElementInScope(e,t){return t.some(n=>n.contains(e))}function getFocusableTreeWalker(e,t,n){const r=t?.tabbable?TABBABLE_ELEMENT_SELECTOR:FOCUSABLE_ELEMENT_SELECTOR,o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(s){return t?.from?.contains(s)?NodeFilter.FILTER_REJECT:s.matches(r)&&isElementVisible(s)&&(!n||isElementInScope(s,n))&&(!t?.accept||t.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t?.from&&(o.currentNode=t.from),o}function noop(){}function snapValueToStep(e,t,n,r){const o=(e-(Number.isNaN(t)?0:t))%r;let s=Math.abs(o)*2>=r?e+Math.sign(o)*(r-Math.abs(o)):e-o;Number.isNaN(t)?!Number.isNaN(n)&&s>n&&(s=Math.floor(n/r)*r):s<t?s=t:!Number.isNaN(n)&&s>n&&(s=t+Math.floor((n-t)/r)*r);const i=r.toString(),a=i.indexOf("."),l=a>=0?i.length-a:0;if(l>0){const c=10**l;s=Math.round(s*c)/c}return s}var getPrecision=e=>{let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n};function mergeDefaultProps(e,t){return mergeProps(e,t)}var transitionsByElement=new Map,transitionCallbacks=new Set;function setupGlobalEvents(){if(typeof window>"u")return;const e=n=>{if(!n.target)return;let r=transitionsByElement.get(n.target);r||(r=new Set,transitionsByElement.set(n.target,r),n.target.addEventListener("transitioncancel",t)),r.add(n.propertyName)},t=n=>{if(!n.target)return;const r=transitionsByElement.get(n.target);if(r&&(r.delete(n.propertyName),r.size===0&&(n.target.removeEventListener("transitioncancel",t),transitionsByElement.delete(n.target)),transitionsByElement.size===0)){for(const o of transitionCallbacks)o();transitionCallbacks.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?setupGlobalEvents():document.addEventListener("DOMContentLoaded",setupGlobalEvents));function scrollIntoView(e,t){const n=relativeOffset(e,t,"left"),r=relativeOffset(e,t,"top"),o=t.offsetWidth,s=t.offsetHeight;let i=e.scrollLeft,a=e.scrollTop;const l=i+e.offsetWidth,c=a+e.offsetHeight;n<=i?i=n:n+o>l&&(i+=n+o-l),r<=a?a=r:r+s>c&&(a+=r+s-c),e.scrollLeft=i,e.scrollTop=a}function relativeOffset(e,t,n){const r=n==="left"?"offsetLeft":"offsetTop";let o=0;for(;t.offsetParent&&(o+=t[r],t.offsetParent!==e);){if(t.offsetParent.contains(e)){o-=e[r];break}t=t.offsetParent}return o}var visuallyHiddenStyles={border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:"0",position:"absolute",width:"1px","white-space":"nowrap"};function createTagName(e,t){const[n,r]=createSignal(stringOrUndefined(t?.()));return createEffect(()=>{r(e()?.tagName.toLowerCase()||stringOrUndefined(t?.()))}),n}function stringOrUndefined(e){return isString(e)?e:void 0}function Polymorphic(e){const[t,n]=splitProps(e,["as"]);if(!t.as)throw new Error("[kobalte]: Polymorphic is missing the required `as` prop.");return createComponent(Dynamic,mergeProps(n,{get component(){return t.as}}))}var __defProp=Object.defineProperty,__export=(e,t)=>{for(var n in t)__defProp(e,n,{get:t[n],enumerable:!0})},button_exports={};__export(button_exports,{Button:()=>Button,Root:()=>ButtonRoot});var BUTTON_INPUT_TYPES=["button","color","file","image","reset","submit"];function isButton(e){const t=e.tagName.toLowerCase();return t==="button"?!0:t==="input"&&e.type?BUTTON_INPUT_TYPES.indexOf(e.type)!==-1:!1}function ButtonRoot(e){let t;const n=mergeDefaultProps({type:"button"},e),[r,o]=splitProps(n,["ref","type","disabled"]),s=createTagName(()=>t,()=>"button"),i=createMemo(()=>{const c=s();return c==null?!1:isButton({tagName:c,type:r.type})}),a=createMemo(()=>s()==="input"),l=createMemo(()=>s()==="a"&&t?.getAttribute("href")!=null);return createComponent(Polymorphic,mergeProps({as:"button",ref(c){var u=mergeRefs(d=>t=d,r.ref);typeof u=="function"&&u(c)},get type(){return i()||a()?r.type:void 0},get role(){return!i()&&!l()?"button":void 0},get tabIndex(){return!i()&&!l()&&!r.disabled?0:void 0},get disabled(){return i()||a()?r.disabled:void 0},get"aria-disabled"(){return!i()&&!a()&&r.disabled?!0:void 0},get"data-disabled"(){return r.disabled?"":void 0}},o))}var Button=ButtonRoot;const submitButton$1="_submitButton_1g4bw_1",styles$5={submitButton:submitButton$1},buttons="",SubmitButton=({onSubmit:e,text:t,className:n})=>createComponent(Button,{onclick:e,get class(){return[styles$5.submitButton,"button",n||""].join(" ").trim()},children:t||"Submit"}),destPicker="_destPicker_ai1pp_1",styles$4={destPicker};var _tmpl$$7=template("<div>");const Destination=({onSubmitDest:e,currentDest:t})=>{const[n,r]=createSignal();if(t!==void 0&&r(t),useAppContext()===null)throw new Error;const s=()=>{const i=n();if(i===void 0)throw new Error("No destination chosen");e(i)};return(()=>{var i=_tmpl$$7();return insert(i,createComponent(AddressPicker,{updateAddress:r,get defaultText(){return t?.label}}),null),insert(i,createComponent(SubmitButton,{onSubmit:s}),null),createRenderEffect(()=>className(i,styles$4.destPicker)),i})()},App$1="_App_hj2qc_1",mainBody="_mainBody_hj2qc_11",styles$3={App:App$1,mainBody};class Car{static defaultSeats=5;id;StartsWith;Seats=Car.defaultSeats;constructor(t,n,r){[this.id,this.StartsWith,this.Seats]=[t,n,r]}GetVehicleRequest(t,n){const r="driving-car";return{id:t,start:this.StartsWith.location.GetCoordinates(),end:n.GetCoordinates(),capacity:[this.Seats],profile:r}}}function buildNodes(e){let t=e.startIndex??0;const n=e.startLevel??0,r=[],o=l=>{if(l==null)return"";const c=e.getKey??"key",u=isString(c)?l[c]:c(l);return u!=null?String(u):""},s=l=>{if(l==null)return"";const c=e.getTextValue??"textValue",u=isString(c)?l[c]:c(l);return u!=null?String(u):""},i=l=>{if(l==null)return!1;const c=e.getDisabled??"disabled";return(isString(c)?l[c]:c(l))??!1},a=l=>{if(l!=null)return isString(e.getSectionChildren)?l[e.getSectionChildren]:e.getSectionChildren?.(l)};for(const l of e.dataSource){if(isString(l)||isNumber(l)){r.push({type:"item",rawValue:l,key:String(l),textValue:String(l),disabled:i(l),level:n,index:t}),t++;continue}if(a(l)!=null){r.push({type:"section",rawValue:l,key:"",textValue:"",disabled:!1,level:n,index:t}),t++;const c=a(l)??[];if(c.length>0){const u=buildNodes({dataSource:c,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:n+1});r.push(...u),t+=u.length}}else r.push({type:"item",rawValue:l,key:o(l),textValue:s(l),disabled:i(l),level:n,index:t}),t++}return r}function createCollection(e,t=[]){return createMemo(()=>{const n=buildNodes({dataSource:access$1(e.dataSource),getKey:access$1(e.getKey),getTextValue:access$1(e.getTextValue),getDisabled:access$1(e.getDisabled),getSectionChildren:access$1(e.getSectionChildren)});for(let r=0;r<t.length;r++)t[r]();return e.factory(n)})}let $488c6ddbf4ef74c2$var$formatterCache=new Map,$488c6ddbf4ef74c2$var$supportsSignDisplay=!1;try{$488c6ddbf4ef74c2$var$supportsSignDisplay=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch(e){}let $488c6ddbf4ef74c2$var$supportsUnit=!1;try{$488c6ddbf4ef74c2$var$supportsUnit=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch(e){}const $488c6ddbf4ef74c2$var$UNITS={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5{format(t){let n="";if(!$488c6ddbf4ef74c2$var$supportsSignDisplay&&this.options.signDisplay!=null?n=$488c6ddbf4ef74c2$export$711b50b3c525e0f2(this.numberFormatter,this.options.signDisplay,t):n=this.numberFormatter.format(t),this.options.style==="unit"&&!$488c6ddbf4ef74c2$var$supportsUnit){var r;let{unit:o,unitDisplay:s="short",locale:i}=this.resolvedOptions();if(!o)return n;let a=(r=$488c6ddbf4ef74c2$var$UNITS[o])===null||r===void 0?void 0:r[s];n+=a[i]||a.default}return n}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,n){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,n);if(n<t)throw new RangeError("End date must be >= start date");return`${this.format(t)} – ${this.format(n)}`}formatRangeToParts(t,n){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,n);if(n<t)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(t),o=this.numberFormatter.formatToParts(n);return[...r.map(s=>({...s,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...o.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!$488c6ddbf4ef74c2$var$supportsSignDisplay&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!$488c6ddbf4ef74c2$var$supportsUnit&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,n={}){this.numberFormatter=$488c6ddbf4ef74c2$var$getCachedNumberFormatter(t,n),this.options=n}}function $488c6ddbf4ef74c2$var$getCachedNumberFormatter(e,t={}){let{numberingSystem:n}=t;if(n&&e.includes("-nu-")&&(e.includes("-u-")||(e+="-u-"),e+=`-nu-${n}`),t.style==="unit"&&!$488c6ddbf4ef74c2$var$supportsUnit){var r;let{unit:i,unitDisplay:a="short"}=t;if(!i)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=$488c6ddbf4ef74c2$var$UNITS[i])===null||r===void 0)&&r[a]))throw new Error(`Unsupported unit ${i} with unitDisplay = ${a}`);t={...t,style:"decimal"}}let o=e+(t?Object.entries(t).sort((i,a)=>i[0]<a[0]?-1:1).join():"");if($488c6ddbf4ef74c2$var$formatterCache.has(o))return $488c6ddbf4ef74c2$var$formatterCache.get(o);let s=new Intl.NumberFormat(e,t);return $488c6ddbf4ef74c2$var$formatterCache.set(o,s),s}function $488c6ddbf4ef74c2$export$711b50b3c525e0f2(e,t,n){if(t==="auto")return e.format(n);if(t==="never")return e.format(Math.abs(n));{let r=!1;if(t==="always"?r=n>0||Object.is(n,0):t==="exceptZero"&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let o=e.format(-n),s=e.format(n),i=o.replace(s,"").replace(/\u200e|\u061C/,"");return[...i].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),o.replace(s,"!!!").replace(i,"+").replace("!!!",s)}else return e.format(n)}}const $6c7bd7858deea686$var$CURRENCY_SIGN_REGEX=new RegExp("^.*\\(.*\\).*$"),$6c7bd7858deea686$var$NUMBERING_SYSTEMS=["latn","arab","hanidec"];class $6c7bd7858deea686$export$cd11ab140839f11d{parse(t){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,n,r){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,t).isValidPartialNumber(t,n,r)}getNumberingSystem(t){return $6c7bd7858deea686$var$getNumberParserImpl(this.locale,this.options,t).options.numberingSystem}constructor(t,n={}){this.locale=t,this.options=n}}const $6c7bd7858deea686$var$numberParserCache=new Map;function $6c7bd7858deea686$var$getNumberParserImpl(e,t,n){let r=$6c7bd7858deea686$var$getCachedNumberParser(e,t);if(!e.includes("-nu-")&&!r.isValidPartialNumber(n)){for(let o of $6c7bd7858deea686$var$NUMBERING_SYSTEMS)if(o!==r.options.numberingSystem){let s=$6c7bd7858deea686$var$getCachedNumberParser(e+(e.includes("-u-")?"-nu-":"-u-nu-")+o,t);if(s.isValidPartialNumber(n))return s}}return r}function $6c7bd7858deea686$var$getCachedNumberParser(e,t){let n=e+(t?Object.entries(t).sort((o,s)=>o[0]<s[0]?-1:1).join():""),r=$6c7bd7858deea686$var$numberParserCache.get(n);return r||(r=new $6c7bd7858deea686$var$NumberParserImpl(e,t),$6c7bd7858deea686$var$numberParserCache.set(n,r)),r}class $6c7bd7858deea686$var$NumberParserImpl{parse(t){let n=this.sanitize(t);if(this.symbols.group&&(n=$6c7bd7858deea686$var$replaceAll(n,this.symbols.group,"")),this.symbols.decimal&&(n=n.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(n=n.replace(this.symbols.minusSign,"-")),n=n.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let i=n.indexOf("-");n=n.replace("-","");let a=n.indexOf(".");a===-1&&(a=n.length),n=n.replace(".",""),a-2===0?n=`0.${n}`:a-2===-1?n=`0.0${n}`:a-2===-2?n="0.00":n=`${n.slice(0,a-2)}.${n.slice(a-2)}`,i>-1&&(n=`-${n}`)}let r=n?+n:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var o,s;let i={...this.options,style:"decimal",minimumFractionDigits:Math.min(((o=this.options.minimumFractionDigits)!==null&&o!==void 0?o:0)+2,20),maximumFractionDigits:Math.min(((s=this.options.maximumFractionDigits)!==null&&s!==void 0?s:0)+2,20)};return new $6c7bd7858deea686$export$cd11ab140839f11d(this.locale,i).parse(new $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5(this.locale,i).format(r))}return this.options.currencySign==="accounting"&&$6c7bd7858deea686$var$CURRENCY_SIGN_REGEX.test(t)&&(r=-1*r),r}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace(String.fromCharCode(1548),this.symbols.decimal)),this.symbols.group&&(t=$6c7bd7858deea686$var$replaceAll(t,".",this.symbols.group))),this.options.locale==="fr-FR"&&(t=$6c7bd7858deea686$var$replaceAll(t,".",String.fromCharCode(8239))),t}isValidPartialNumber(t,n=-1/0,r=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&n<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&r>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=$6c7bd7858deea686$var$replaceAll(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,n={}){this.locale=t,this.formatter=new Intl.NumberFormat(t,n),this.options=this.formatter.resolvedOptions(),this.symbols=$6c7bd7858deea686$var$getSymbols(t,this.formatter,this.options,n);var r,o;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((o=this.options.maximumFractionDigits)!==null&&o!==void 0?o:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const $6c7bd7858deea686$var$nonLiteralParts=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),$6c7bd7858deea686$var$pluralNumbers=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function $6c7bd7858deea686$var$getSymbols(e,t,n,r){var o,s,i,a;let l=new Intl.NumberFormat(e,{...n,minimumSignificantDigits:1,maximumSignificantDigits:21}),c=l.formatToParts(-10000.111),u=l.formatToParts(10000.111),d=$6c7bd7858deea686$var$pluralNumbers.map(E=>l.formatToParts(E));var h;let p=(h=(o=c.find(E=>E.type==="minusSign"))===null||o===void 0?void 0:o.value)!==null&&h!==void 0?h:"-",f=(s=u.find(E=>E.type==="plusSign"))===null||s===void 0?void 0:s.value;!f&&(r?.signDisplay==="exceptZero"||r?.signDisplay==="always")&&(f="+");let m=(i=new Intl.NumberFormat(e,{...n,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(E=>E.type==="decimal"))===null||i===void 0?void 0:i.value,b=(a=c.find(E=>E.type==="group"))===null||a===void 0?void 0:a.value,g=c.filter(E=>!$6c7bd7858deea686$var$nonLiteralParts.has(E.type)).map(E=>$6c7bd7858deea686$var$escapeRegex(E.value)),w=d.flatMap(E=>E.filter($=>!$6c7bd7858deea686$var$nonLiteralParts.has($.type)).map($=>$6c7bd7858deea686$var$escapeRegex($.value))),S=[...new Set([...g,...w])].sort((E,$)=>$.length-E.length),x=S.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${S.join("|")}|[\\p{White_Space}]`,"gu"),v=[...new Intl.NumberFormat(n.locale,{useGrouping:!1}).format(9876543210)].reverse(),_=new Map(v.map((E,$)=>[E,$])),C=new RegExp(`[${v.join("")}]`,"g");return{minusSign:p,plusSign:f,decimal:m,group:b,literals:x,numeral:C,index:E=>String(_.get(E))}}function $6c7bd7858deea686$var$replaceAll(e,t,n){return e.replaceAll?e.replaceAll(t,n):e.split(t).join(n)}function $6c7bd7858deea686$var$escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var RTL_SCRIPTS=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),RTL_LANGS=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function isRTL$1(e){if(Intl.Locale){const n=new Intl.Locale(e).maximize().script??"";return RTL_SCRIPTS.has(n)}const t=e.split("-")[0];return RTL_LANGS.has(t)}function getReadingDirection(e){return isRTL$1(e)?"rtl":"ltr"}function getDefaultLocale(){let e=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:getReadingDirection(e)}}var currentLocale=getDefaultLocale(),listeners=new Set;function updateLocale(){currentLocale=getDefaultLocale();for(const e of listeners)e(currentLocale)}function createDefaultLocale(){const[e,t]=createSignal(currentLocale),n=createMemo(()=>e());return onMount(()=>{listeners.size===0&&window.addEventListener("languagechange",updateLocale),listeners.add(t),onCleanup(()=>{listeners.delete(t),listeners.size===0&&window.removeEventListener("languagechange",updateLocale)})}),{locale:()=>n().locale,direction:()=>n().direction}}var I18nContext=createContext();function useLocale(){const e=createDefaultLocale();return useContext(I18nContext)||e}var cache$1=new Map;function createCollator(e){const{locale:t}=useLocale(),n=createMemo(()=>t()+(e?Object.entries(e).sort((r,o)=>r[0]<o[0]?-1:1).join():""));return createMemo(()=>{const r=n();let o;return cache$1.has(r)&&(o=cache$1.get(r)),o||(o=new Intl.Collator(t(),e),cache$1.set(r,o)),o})}function createControllableSignal(e){const[t,n]=createSignal(e.defaultValue?.()),r=createMemo(()=>e.value?.()!==void 0),o=createMemo(()=>r()?e.value?.():t());return[o,i=>{untrack(()=>{const a=accessWith(i,o());return Object.is(a,o())||(r()||n(a),e.onChange?.(a)),a})}]}function createControllableBooleanSignal(e){const[t,n]=createControllableSignal(e);return[()=>t()??!1,n]}function createControllableArraySignal(e){const[t,n]=createControllableSignal(e);return[()=>t()??[],n]}var Selection=class G extends Set{anchorKey;currentKey;constructor(t,n,r){super(t),t instanceof G?(this.anchorKey=n||t.anchorKey,this.currentKey=r||t.currentKey):(this.anchorKey=n,this.currentKey=r)}};function createControllableSelectionSignal(e){const[t,n]=createControllableSignal(e);return[()=>t()??new Selection,n]}function isNonContiguousSelectionModifier(e){return isAppleDevice()?e.altKey:e.ctrlKey}function isCtrlKeyPressed(e){return isMac()?e.metaKey:e.ctrlKey}function convertSelection(e){return new Selection(e)}function isSameSelection(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function createMultipleSelectionState(e){const t=mergeDefaultProps({selectionMode:"none",selectionBehavior:"toggle"},e),[n,r]=createSignal(!1),[o,s]=createSignal(),i=createMemo(()=>{const y=access$1(t.selectedKeys);return y!=null?convertSelection(y):y}),a=createMemo(()=>{const y=access$1(t.defaultSelectedKeys);return y!=null?convertSelection(y):new Selection}),[l,c]=createControllableSelectionSignal({value:i,defaultValue:a,onChange:y=>t.onSelectionChange?.(y)}),[u,d]=createSignal(access$1(t.selectionBehavior)),h=()=>access$1(t.selectionMode),p=()=>access$1(t.disallowEmptySelection)??!1,f=y=>{(access$1(t.allowDuplicateSelectionEvents)||!isSameSelection(y,l()))&&c(y)};return createEffect(()=>{const y=l();access$1(t.selectionBehavior)==="replace"&&u()==="toggle"&&typeof y=="object"&&y.size===0&&d("replace")}),createEffect(()=>{d(access$1(t.selectionBehavior)??"toggle")}),{selectionMode:h,disallowEmptySelection:p,selectionBehavior:u,setSelectionBehavior:d,isFocused:n,setFocused:r,focusedKey:o,setFocusedKey:s,selectedKeys:l,setSelectedKeys:f}}function createTypeSelect(e){const[t,n]=createSignal(""),[r,o]=createSignal(-1);return{typeSelectHandlers:{onKeyDown:i=>{if(access$1(e.isDisabled))return;const a=access$1(e.keyboardDelegate),l=access$1(e.selectionManager);if(!a.getKeyForSearch)return;const c=getStringForKey(i.key);if(!c||i.ctrlKey||i.metaKey)return;c===" "&&t().trim().length>0&&(i.preventDefault(),i.stopPropagation());let u=n(h=>h+c),d=a.getKeyForSearch(u,l.focusedKey())??a.getKeyForSearch(u);d==null&&isAllSameLetter(u)&&(u=u[0],d=a.getKeyForSearch(u,l.focusedKey())??a.getKeyForSearch(u)),d!=null&&(l.setFocusedKey(d),e.onTypeSelect?.(d)),clearTimeout(r()),o(window.setTimeout(()=>n(""),500))}}}}function getStringForKey(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function isAllSameLetter(e){return e.split("").every(t=>t===e[0])}function createSelectableCollection(e,t,n){const o=mergeProps({selectOnFocus:()=>access$1(e.selectionManager).selectionBehavior()==="replace"},e),s=()=>n?.()??t(),{direction:i}=useLocale();let a={top:0,left:0};createEventListener(()=>access$1(o.isVirtualized)?void 0:s(),"scroll",()=>{const m=s();m&&(a={top:m.scrollTop,left:m.scrollLeft})});const{typeSelectHandlers:l}=createTypeSelect({isDisabled:()=>access$1(o.disallowTypeAhead),keyboardDelegate:()=>access$1(o.keyboardDelegate),selectionManager:()=>access$1(o.selectionManager)}),c=()=>access$1(o.orientation)??"vertical",u=m=>{callHandler(m,l.onKeyDown),m.altKey&&m.key==="Tab"&&m.preventDefault();const b=t();if(!b?.contains(m.target))return;const g=access$1(o.selectionManager),w=access$1(o.selectOnFocus),S=C=>{C!=null&&(g.setFocusedKey(C),m.shiftKey&&g.selectionMode()==="multiple"?g.extendSelection(C):w&&!isNonContiguousSelectionModifier(m)&&g.replaceSelection(C))},x=access$1(o.keyboardDelegate),v=access$1(o.shouldFocusWrap),_=g.focusedKey();switch(m.key){case(c()==="vertical"?"ArrowDown":"ArrowRight"):{if(x.getKeyBelow){m.preventDefault();let C;_!=null?C=x.getKeyBelow(_):C=x.getFirstKey?.(),C==null&&v&&(C=x.getFirstKey?.(_)),S(C)}break}case(c()==="vertical"?"ArrowUp":"ArrowLeft"):{if(x.getKeyAbove){m.preventDefault();let C;_!=null?C=x.getKeyAbove(_):C=x.getLastKey?.(),C==null&&v&&(C=x.getLastKey?.(_)),S(C)}break}case(c()==="vertical"?"ArrowLeft":"ArrowUp"):{if(x.getKeyLeftOf){m.preventDefault();const C=i()==="rtl";let P;_!=null?P=x.getKeyLeftOf(_):P=C?x.getFirstKey?.():x.getLastKey?.(),S(P)}break}case(c()==="vertical"?"ArrowRight":"ArrowDown"):{if(x.getKeyRightOf){m.preventDefault();const C=i()==="rtl";let P;_!=null?P=x.getKeyRightOf(_):P=C?x.getLastKey?.():x.getFirstKey?.(),S(P)}break}case"Home":if(x.getFirstKey){m.preventDefault();const C=x.getFirstKey(_,isCtrlKeyPressed(m));C!=null&&(g.setFocusedKey(C),isCtrlKeyPressed(m)&&m.shiftKey&&g.selectionMode()==="multiple"?g.extendSelection(C):w&&g.replaceSelection(C))}break;case"End":if(x.getLastKey){m.preventDefault();const C=x.getLastKey(_,isCtrlKeyPressed(m));C!=null&&(g.setFocusedKey(C),isCtrlKeyPressed(m)&&m.shiftKey&&g.selectionMode()==="multiple"?g.extendSelection(C):w&&g.replaceSelection(C))}break;case"PageDown":if(x.getKeyPageBelow&&_!=null){m.preventDefault();const C=x.getKeyPageBelow(_);S(C)}break;case"PageUp":if(x.getKeyPageAbove&&_!=null){m.preventDefault();const C=x.getKeyPageAbove(_);S(C)}break;case"a":isCtrlKeyPressed(m)&&g.selectionMode()==="multiple"&&access$1(o.disallowSelectAll)!==!0&&(m.preventDefault(),g.selectAll());break;case"Escape":m.defaultPrevented||(m.preventDefault(),access$1(o.disallowEmptySelection)||g.clearSelection());break;case"Tab":if(!access$1(o.allowsTabNavigation)){if(m.shiftKey)b.focus();else{const C=getFocusableTreeWalker(b,{tabbable:!0});let P,E;do E=C.lastChild(),E&&(P=E);while(E);P&&!P.contains(document.activeElement)&&focusWithoutScrolling(P)}break}}},d=m=>{const b=access$1(o.selectionManager),g=access$1(o.keyboardDelegate),w=access$1(o.selectOnFocus);if(b.isFocused()){m.currentTarget.contains(m.target)||b.setFocused(!1);return}if(m.currentTarget.contains(m.target)){if(b.setFocused(!0),b.focusedKey()==null){const S=v=>{v!=null&&(b.setFocusedKey(v),w&&b.replaceSelection(v))},x=m.relatedTarget;x&&m.currentTarget.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_FOLLOWING?S(b.lastSelectedKey()??g.getLastKey?.()):S(b.firstSelectedKey()??g.getFirstKey?.())}else if(!access$1(o.isVirtualized)){const S=s();if(S){S.scrollTop=a.top,S.scrollLeft=a.left;const x=S.querySelector(`[data-key="${b.focusedKey()}"]`);x&&(focusWithoutScrolling(x),scrollIntoView(S,x))}}}},h=m=>{const b=access$1(o.selectionManager);m.currentTarget.contains(m.relatedTarget)||b.setFocused(!1)},p=m=>{s()===m.target&&m.preventDefault()},f=()=>{const m=access$1(o.autoFocus);if(!m)return;const b=access$1(o.selectionManager),g=access$1(o.keyboardDelegate);let w;m==="first"&&(w=g.getFirstKey?.()),m==="last"&&(w=g.getLastKey?.());const S=b.selectedKeys();S.size&&(w=S.values().next().value),b.setFocused(!0),b.setFocusedKey(w);const x=t();x&&w==null&&!access$1(o.shouldUseVirtualFocus)&&focusWithoutScrolling(x)};return onMount(()=>{o.deferAutoFocus?setTimeout(f,0):f()}),createEffect(on([s,()=>access$1(o.isVirtualized),()=>access$1(o.selectionManager).focusedKey()],m=>{const[b,g,w]=m;if(g)w&&o.scrollToKey?.(w);else if(w&&b){const S=b.querySelector(`[data-key="${w}"]`);S&&scrollIntoView(b,S)}})),{tabIndex:createMemo(()=>{if(!access$1(o.shouldUseVirtualFocus))return access$1(o.selectionManager).focusedKey()==null?0:-1}),onKeyDown:u,onMouseDown:p,onFocusIn:d,onFocusOut:h}}function createSelectableItem(e,t){const n=()=>access$1(e.selectionManager),r=()=>access$1(e.key),o=()=>access$1(e.shouldUseVirtualFocus),s=g=>{n().selectionMode()!=="none"&&(n().selectionMode()==="single"?n().isSelected(r())&&!n().disallowEmptySelection()?n().toggleSelection(r()):n().replaceSelection(r()):g?.shiftKey?n().extendSelection(r()):n().selectionBehavior()==="toggle"||isCtrlKeyPressed(g)||"pointerType"in g&&g.pointerType==="touch"?n().toggleSelection(r()):n().replaceSelection(r()))},i=()=>n().isSelected(r()),a=()=>access$1(e.disabled)||n().isDisabled(r()),l=()=>!a()&&n().canSelectItem(r());let c=null;const u=g=>{l()&&(c=g.pointerType,g.pointerType==="mouse"&&g.button===0&&!access$1(e.shouldSelectOnPressUp)&&s(g))},d=g=>{l()&&g.pointerType==="mouse"&&g.button===0&&access$1(e.shouldSelectOnPressUp)&&access$1(e.allowsDifferentPressOrigin)&&s(g)},h=g=>{l()&&(access$1(e.shouldSelectOnPressUp)&&!access$1(e.allowsDifferentPressOrigin)||c!=="mouse")&&s(g)},p=g=>{!l()||!["Enter"," "].includes(g.key)||(isNonContiguousSelectionModifier(g)?n().toggleSelection(r()):s(g))},f=g=>{a()&&g.preventDefault()},y=g=>{const w=t();o()||a()||!w||g.target===w&&n().setFocusedKey(r())},m=createMemo(()=>{if(!(o()||a()))return r()===n().focusedKey()?0:-1}),b=createMemo(()=>access$1(e.virtualized)?void 0:r());return createEffect(on([t,r,o,()=>n().focusedKey(),()=>n().isFocused()],([g,w,S,x,v])=>{g&&w===x&&v&&!S&&document.activeElement!==g&&(e.focus?e.focus():focusWithoutScrolling(g))})),{isSelected:i,isDisabled:a,allowsSelection:l,tabIndex:m,dataKey:b,onPointerDown:u,onPointerUp:d,onClick:h,onKeyDown:p,onMouseDown:f,onFocus:y}}var SelectionManager=class{collection;state;constructor(e,t){this.collection=e,this.state=t}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e)}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e)}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()==="none")return!1;const t=this.getKey(e);return t==null?!1:this.state.selectedKeys().has(t)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const e=this.state.selectedKeys();return this.getAllSelectableKeys().every(t=>e.has(t))}firstSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),r=n?.index!=null&&e?.index!=null&&n.index<e.index;(!e||r)&&(e=n)}return e?.key}lastSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),r=n?.index!=null&&e?.index!=null&&n.index>e.index;(!e||r)&&(e=n)}return e?.key}extendSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=this.state.selectedKeys(),r=n.anchorKey||t,o=new Selection(n,r,t);for(const s of this.getKeyRange(r,n.currentKey||t))o.delete(s);for(const s of this.getKeyRange(t,r))this.canSelectItem(s)&&o.add(s);this.state.setSelectedKeys(o)}getKeyRange(e,t){const n=this.collection().getItem(e),r=this.collection().getItem(t);return n&&r?n.index!=null&&r.index!=null&&n.index<=r.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){const n=[];let r=e;for(;r!=null;){const o=this.collection().getItem(r);if(o&&o.type==="item"&&n.push(r),r===t)return n;r=this.collection().getKeyAfter(r)}return[]}getKey(e){const t=this.collection().getItem(e);return t?!t||t.type!=="item"?null:t.key:e}toggleSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=new Selection(this.state.selectedKeys());n.has(t)?n.delete(t):this.canSelectItem(t)&&(n.add(t),n.anchorKey=t,n.currentKey=t),!(this.disallowEmptySelection()&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode()==="none")return;const t=this.getKey(e);if(t==null)return;const n=this.canSelectItem(t)?new Selection([t],t,t):new Selection;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode()==="none")return;const t=new Selection;for(const n of e){const r=this.getKey(n);if(r!=null&&(t.add(r),this.selectionMode()==="single"))break}this.state.setSelectedKeys(t)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new Selection)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()==="toggle"||t&&t.pointerType==="touch"?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys())return!0;const t=this.selectedKeys();if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;for(const n of t)if(!e.has(n))return!1;return!0}canSelectItem(e){if(this.state.selectionMode()==="none")return!1;const t=this.collection().getItem(e);return t!=null&&!t.disabled}isDisabled(e){const t=this.collection().getItem(e);return!t||t.disabled}getAllSelectableKeys(){const e=[];return(n=>{for(;n!=null;){if(this.canSelectItem(n)){const r=this.collection().getItem(n);if(!r)continue;r.type==="item"&&e.push(n)}n=this.collection().getKeyAfter(n)}})(this.collection().getFirstKey()),e}},ListCollection=class{keyMap=new Map;iterable;firstKey;lastKey;constructor(e){this.iterable=e;for(const r of e)this.keyMap.set(r.key,r);if(this.keyMap.size===0)return;let t,n=0;for(const[r,o]of this.keyMap)t?(t.nextKey=r,o.prevKey=t.key):(this.firstKey=r,o.prevKey=void 0),o.type==="item"&&(o.index=n++),t=o,t.nextKey=void 0;this.lastKey=t.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){return this.keyMap.get(e)?.prevKey}getKeyAfter(e){return this.keyMap.get(e)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}};function createListState(e){const t=createMultipleSelectionState(e),r=createCollection({dataSource:()=>access$1(e.dataSource),getKey:()=>access$1(e.getKey),getTextValue:()=>access$1(e.getTextValue),getDisabled:()=>access$1(e.getDisabled),getSectionChildren:()=>access$1(e.getSectionChildren),factory:s=>e.filter?new ListCollection(e.filter(s)):new ListCollection(s)},[()=>e.filter]),o=new SelectionManager(r,t);return createComputed(()=>{const s=t.focusedKey();s!=null&&!r().getItem(s)&&t.setFocusedKey(void 0)}),{collection:r,selectionManager:()=>o}}function createRegisterId(e){return t=>(e(t),()=>e(void 0))}var FORM_CONTROL_PROP_NAMES=["id","name","validationState","required","disabled","readOnly"];function createFormControl(e){const t=`form-control-${createUniqueId()}`,n=mergeDefaultProps({id:t},e),[r,o]=createSignal(),[s,i]=createSignal(),[a,l]=createSignal(),[c,u]=createSignal(),d=(y,m,b)=>{const g=b!=null||r()!=null;return[b,r(),g&&m!=null?y:void 0].filter(Boolean).join(" ")||void 0},h=y=>[a(),c(),y].filter(Boolean).join(" ")||void 0,p=createMemo(()=>({"data-valid":access$1(n.validationState)==="valid"?"":void 0,"data-invalid":access$1(n.validationState)==="invalid"?"":void 0,"data-required":access$1(n.required)?"":void 0,"data-disabled":access$1(n.disabled)?"":void 0,"data-readonly":access$1(n.readOnly)?"":void 0}));return{formControlContext:{name:()=>access$1(n.name)??access$1(n.id),dataset:p,validationState:()=>access$1(n.validationState),isRequired:()=>access$1(n.required),isDisabled:()=>access$1(n.disabled),isReadOnly:()=>access$1(n.readOnly),labelId:r,fieldId:s,descriptionId:a,errorMessageId:c,getAriaLabelledBy:d,getAriaDescribedBy:h,generateId:createGenerateId(()=>access$1(n.id)),registerLabel:createRegisterId(o),registerField:createRegisterId(i),registerDescription:createRegisterId(l),registerErrorMessage:createRegisterId(u)}}}var FormControlContext=createContext();function useFormControlContext(){const e=useContext(FormControlContext);if(e===void 0)throw new Error("[kobalte]: `useFormControlContext` must be used within a `FormControlContext.Provider` component");return e}function FormControlDescription(e){const t=useFormControlContext(),n=mergeDefaultProps({id:t.generateId("description")},e);return createEffect(()=>onCleanup(t.registerDescription(n.id))),createComponent(Polymorphic,mergeProps({as:"div"},()=>t.dataset(),n))}function FormControlErrorMessage(e){const t=useFormControlContext(),n=mergeDefaultProps({id:t.generateId("error-message")},e),[r,o]=splitProps(n,["forceMount"]),s=()=>t.validationState()==="invalid";return createEffect(()=>{s()&&onCleanup(t.registerErrorMessage(o.id))}),createComponent(Show,{get when(){return r.forceMount||s()},get children(){return createComponent(Polymorphic,mergeProps({as:"div"},()=>t.dataset(),o))}})}function FormControlLabel(e){let t;const n=useFormControlContext(),r=mergeDefaultProps({id:n.generateId("label")},e),[o,s]=splitProps(r,["ref"]),i=createTagName(()=>t,()=>"label");return createEffect(()=>onCleanup(n.registerLabel(s.id))),createComponent(Polymorphic,mergeProps({as:"label",ref(a){var l=mergeRefs(c=>t=c,o.ref);typeof l=="function"&&l(a)},get for(){return createMemo(()=>i()==="label")()?n.fieldId():void 0}},()=>n.dataset(),s))}var _tmpl$$6=template("<option>"),_tmpl$2$2=template("<div aria-hidden=true><input type=text><select tabindex=-1><option>");function HiddenSelectBase(e){let t;const[n,r]=splitProps(e,["ref","onChange","collection","selectionManager","isOpen","isMultiple","isVirtualized","focusTrigger"]),o=useFormControlContext(),[s,i]=createSignal(!1),a=l=>{const c=n.collection.getItem(l);return createComponent(Show,{get when(){return c?.type==="item"},get children(){var u=_tmpl$$6();return u.value=l,insert(u,()=>c?.textValue),createRenderEffect(()=>u.selected=n.selectionManager.isSelected(l)),u}})};return createEffect(on(()=>n.selectionManager.selectedKeys(),(l,c)=>{c&&isSameSelection(l,c)||(i(!0),t?.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),t?.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})))},{defer:!0})),(()=>{var l=_tmpl$2$2(),c=l.firstChild,u=c.nextSibling;u.firstChild,c.addEventListener("focus",()=>n.focusTrigger()),c.style.setProperty("font-size","16px"),u.addEventListener("change",h=>{callHandler(h,n.onChange),s()||n.selectionManager.setSelectedKeys(new Set([h.target.value])),i(!1)});var d=mergeRefs(h=>t=h,n.ref);return typeof d=="function"&&use(d,u),spread$1(u,mergeProps({get multiple(){return n.isMultiple},get name(){return o.name()},get required(){return o.isRequired()},get disabled(){return o.isDisabled()},get size(){return n.collection.getSize()},get value(){return n.selectionManager.firstSelectedKey()??""}},r),!1,!0),insert(u,createComponent(Show,{get when(){return n.isVirtualized},get fallback(){return createComponent(For,{get each(){return[...n.collection.getKeys()]},children:a})},get children(){return createComponent(For,{get each(){return[...n.selectionManager.selectedKeys()]},children:a})}}),null),createRenderEffect(h=>{var p=visuallyHiddenStyles,f=n.selectionManager.isFocused()||n.isOpen?-1:0,y=o.isRequired(),m=o.isDisabled(),b=o.isReadOnly();return h.e=style$1(l,p,h.e),f!==h.t&&setAttribute(c,"tabindex",h.t=f),y!==h.a&&(c.required=h.a=y),m!==h.o&&(c.disabled=h.o=m),b!==h.i&&(c.readOnly=h.i=b),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),l})()}var cache=new WeakMap;function getItemCount(e){let t=cache.get(e);if(t!=null)return t;t=0;for(const n of e)n.type==="item"&&t++;return cache.set(e,t),t}var ListKeyboardDelegate=class{collection;ref;collator;constructor(e,t,n){this.collection=e,this.ref=t,this.collator=n}getKeyBelow(e){let t=this.collection().getKeyAfter(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyAfter(t)}}getKeyAbove(e){let t=this.collection().getKeyBefore(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyBefore(t)}}getFirstKey(){let e=this.collection().getFirstKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyAfter(e)}}getLastKey(){let e=this.collection().getLastKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyBefore(e)}}getItem(e){return this.ref?.()?.querySelector(`[data-key="${e}"]`)??null}getKeyPageAbove(e){const t=this.ref?.();let n=this.getItem(e);if(!t||!n)return;const r=Math.max(0,n.offsetTop+n.offsetHeight-t.offsetHeight);let o=e;for(;o&&n&&n.offsetTop>r;)o=this.getKeyAbove(o),n=o!=null?this.getItem(o):null;return o}getKeyPageBelow(e){const t=this.ref?.();let n=this.getItem(e);if(!t||!n)return;const r=Math.min(t.scrollHeight,n.offsetTop-n.offsetHeight+t.offsetHeight);let o=e;for(;o&&n&&n.offsetTop<r;)o=this.getKeyBelow(o),n=o!=null?this.getItem(o):null;return o}getKeyForSearch(e,t){const n=this.collator?.();if(!n)return;let r=t!=null?this.getKeyBelow(t):this.getFirstKey();for(;r!=null;){const o=this.collection().getItem(r);if(o){const s=o.textValue.slice(0,e.length);if(o.textValue&&n.compare(s,e)===0)return r}r=this.getKeyBelow(r)}}};function createSelectableList(e,t,n){const r=createCollator({usage:"search",sensitivity:"base"}),o=createMemo(()=>{const s=access$1(e.keyboardDelegate);return s||new ListKeyboardDelegate(e.collection,t,r)});return createSelectableCollection({selectionManager:()=>access$1(e.selectionManager),keyboardDelegate:o,autoFocus:()=>access$1(e.autoFocus),deferAutoFocus:()=>access$1(e.deferAutoFocus),shouldFocusWrap:()=>access$1(e.shouldFocusWrap),disallowEmptySelection:()=>access$1(e.disallowEmptySelection),selectOnFocus:()=>access$1(e.selectOnFocus),disallowTypeAhead:()=>access$1(e.disallowTypeAhead),shouldUseVirtualFocus:()=>access$1(e.shouldUseVirtualFocus),allowsTabNavigation:()=>access$1(e.allowsTabNavigation),isVirtualized:()=>access$1(e.isVirtualized),scrollToKey:s=>access$1(e.scrollToKey)?.(s),orientation:()=>access$1(e.orientation)},t,n)}var listbox_exports={};__export(listbox_exports,{Item:()=>ListboxItem,ItemDescription:()=>ListboxItemDescription,ItemIndicator:()=>ListboxItemIndicator,ItemLabel:()=>ListboxItemLabel,Listbox:()=>Listbox,Root:()=>ListboxRoot,Section:()=>ListboxSection});var ListboxContext=createContext();function useListboxContext(){const e=useContext(ListboxContext);if(e===void 0)throw new Error("[kobalte]: `useListboxContext` must be used within a `Listbox` component");return e}var ListboxItemContext=createContext();function useListboxItemContext(){const e=useContext(ListboxItemContext);if(e===void 0)throw new Error("[kobalte]: `useListboxItemContext` must be used within a `Listbox.Item` component");return e}function ListboxItem(e){let t;const n=useListboxContext(),r=`${n.generateId("item")}-${createUniqueId()}`,o=mergeDefaultProps({id:r},e),[s,i]=splitProps(o,["ref","item","aria-label","aria-labelledby","aria-describedby","onPointerMove","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[a,l]=createSignal(),[c,u]=createSignal(),d=()=>n.listState().selectionManager(),h=()=>d().focusedKey()===s.item.key,p=createSelectableItem({key:()=>s.item.key,selectionManager:d,shouldSelectOnPressUp:n.shouldSelectOnPressUp,allowsDifferentPressOrigin:()=>n.shouldSelectOnPressUp()&&n.shouldFocusOnHover(),shouldUseVirtualFocus:n.shouldUseVirtualFocus,disabled:()=>s.item.disabled},()=>t),f=()=>{if(d().selectionMode()!=="none")return p.isSelected()},y=createMemo(()=>!(isMac()&&isWebKit$1())),m=()=>y()?s["aria-label"]:void 0,b=()=>y()?a():void 0,g=()=>y()?c():void 0,w=()=>{if(!n.isVirtualized())return;const C=n.listState().collection().getItem(s.item.key)?.index;return C!=null?C+1:void 0},S=()=>{if(n.isVirtualized())return getItemCount(n.listState().collection())},x=C=>{callHandler(C,s.onPointerMove),C.pointerType==="mouse"&&!p.isDisabled()&&n.shouldFocusOnHover()&&(focusWithoutScrolling(C.currentTarget),d().setFocused(!0),d().setFocusedKey(s.item.key))},v=createMemo(()=>({"data-disabled":p.isDisabled()?"":void 0,"data-selected":p.isSelected()?"":void 0,"data-highlighted":h()?"":void 0})),_={isSelected:p.isSelected,dataset:v,generateId:createGenerateId(()=>i.id),registerLabelId:createRegisterId(l),registerDescriptionId:createRegisterId(u)};return createComponent(ListboxItemContext.Provider,{value:_,get children(){return createComponent(Polymorphic,mergeProps({as:"li",ref(C){var P=mergeRefs(E=>t=E,s.ref);typeof P=="function"&&P(C)},role:"option",get tabIndex(){return p.tabIndex()},get"aria-disabled"(){return p.isDisabled()},get"aria-selected"(){return f()},get"aria-label"(){return m()},get"aria-labelledby"(){return b()},get"aria-describedby"(){return g()},get"aria-posinset"(){return w()},get"aria-setsize"(){return S()},get"data-key"(){return p.dataKey()},get onPointerDown(){return composeEventHandlers([s.onPointerDown,p.onPointerDown])},get onPointerUp(){return composeEventHandlers([s.onPointerUp,p.onPointerUp])},get onClick(){return composeEventHandlers([s.onClick,p.onClick])},get onKeyDown(){return composeEventHandlers([s.onKeyDown,p.onKeyDown])},get onMouseDown(){return composeEventHandlers([s.onMouseDown,p.onMouseDown])},get onFocus(){return composeEventHandlers([s.onFocus,p.onFocus])},onPointerMove:x},v,i))}})}function ListboxItemDescription(e){const t=useListboxItemContext(),n=mergeDefaultProps({id:t.generateId("description")},e);return createEffect(()=>onCleanup(t.registerDescriptionId(n.id))),createComponent(Polymorphic,mergeProps({as:"div"},()=>t.dataset(),n))}function ListboxItemIndicator(e){const t=useListboxItemContext(),n=mergeDefaultProps({id:t.generateId("indicator")},e),[r,o]=splitProps(n,["forceMount"]);return createComponent(Show,{get when(){return r.forceMount||t.isSelected()},get children(){return createComponent(Polymorphic,mergeProps({as:"div","aria-hidden":"true"},()=>t.dataset(),o))}})}function ListboxItemLabel(e){const t=useListboxItemContext(),n=mergeDefaultProps({id:t.generateId("label")},e);return createEffect(()=>onCleanup(t.registerLabelId(n.id))),createComponent(Polymorphic,mergeProps({as:"div"},()=>t.dataset(),n))}function ListboxRoot(e){let t;const n=`listbox-${createUniqueId()}`,r=mergeDefaultProps({id:n,selectionMode:"single",virtualized:!1},e),[o,s]=splitProps(r,["ref","children","renderItem","renderSection","value","defaultValue","onChange","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","state","keyboardDelegate","autoFocus","selectionMode","shouldFocusWrap","shouldUseVirtualFocus","shouldSelectOnPressUp","shouldFocusOnHover","allowDuplicateSelectionEvents","disallowEmptySelection","selectionBehavior","selectOnFocus","disallowTypeAhead","allowsTabNavigation","virtualized","scrollToItem","scrollRef","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),i=createMemo(()=>o.state?o.state:createListState({selectedKeys:()=>o.value,defaultSelectedKeys:()=>o.defaultValue,onSelectionChange:o.onChange,allowDuplicateSelectionEvents:()=>access$1(o.allowDuplicateSelectionEvents),disallowEmptySelection:()=>access$1(o.disallowEmptySelection),selectionBehavior:()=>access$1(o.selectionBehavior),selectionMode:()=>access$1(o.selectionMode),dataSource:()=>o.options??[],getKey:()=>o.optionValue,getTextValue:()=>o.optionTextValue,getDisabled:()=>o.optionDisabled,getSectionChildren:()=>o.optionGroupChildren})),a=createSelectableList({selectionManager:()=>i().selectionManager(),collection:()=>i().collection(),autoFocus:()=>access$1(o.autoFocus),shouldFocusWrap:()=>access$1(o.shouldFocusWrap),keyboardDelegate:()=>o.keyboardDelegate,disallowEmptySelection:()=>access$1(o.disallowEmptySelection),selectOnFocus:()=>access$1(o.selectOnFocus),disallowTypeAhead:()=>access$1(o.disallowTypeAhead),shouldUseVirtualFocus:()=>access$1(o.shouldUseVirtualFocus),allowsTabNavigation:()=>access$1(o.allowsTabNavigation),isVirtualized:()=>o.virtualized,scrollToKey:()=>o.scrollToItem},()=>t,()=>o.scrollRef?.()),l={listState:i,generateId:createGenerateId(()=>s.id),shouldUseVirtualFocus:()=>r.shouldUseVirtualFocus,shouldSelectOnPressUp:()=>r.shouldSelectOnPressUp,shouldFocusOnHover:()=>r.shouldFocusOnHover,isVirtualized:()=>o.virtualized};return createComponent(ListboxContext.Provider,{value:l,get children(){return createComponent(Polymorphic,mergeProps({as:"ul",ref(c){var u=mergeRefs(d=>t=d,o.ref);typeof u=="function"&&u(c)},role:"listbox",get tabIndex(){return a.tabIndex()},get"aria-multiselectable"(){return i().selectionManager().selectionMode()==="multiple"?!0:void 0},get onKeyDown(){return composeEventHandlers([o.onKeyDown,a.onKeyDown])},get onMouseDown(){return composeEventHandlers([o.onMouseDown,a.onMouseDown])},get onFocusIn(){return composeEventHandlers([o.onFocusIn,a.onFocusIn])},get onFocusOut(){return composeEventHandlers([o.onFocusOut,a.onFocusOut])}},s,{get children(){return createComponent(Show,{get when(){return!o.virtualized},get fallback(){return o.children?.(i().collection)},get children(){return createComponent(Key,{get each(){return[...i().collection()]},by:"key",children:c=>createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return c().type==="section"},get children(){return o.renderSection?.(c())}}),createComponent(Match,{get when(){return c().type==="item"},get children(){return o.renderItem?.(c())}})]}})})}})}}))}})}function ListboxSection(e){return createComponent(Polymorphic,mergeProps({as:"li",role:"presentation"},e))}var Listbox=Object.assign(ListboxRoot,{Item:ListboxItem,ItemDescription:ListboxItemDescription,ItemIndicator:ListboxItemIndicator,ItemLabel:ListboxItemLabel,Section:ListboxSection});const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=e=>({x:e,y:e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(e,t,n){return max(e,min(t,n))}function evaluate(e,t){return typeof e=="function"?e(t):e}function getSide(e){return e.split("-")[0]}function getAlignment(e){return e.split("-")[1]}function getOppositeAxis(e){return e==="x"?"y":"x"}function getAxisLength(e){return e==="y"?"height":"width"}function getSideAxis(e){return["top","bottom"].includes(getSide(e))?"y":"x"}function getAlignmentAxis(e){return getOppositeAxis(getSideAxis(e))}function getAlignmentSides(e,t,n){n===void 0&&(n=!1);const r=getAlignment(e),o=getAlignmentAxis(e),s=getAxisLength(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=getOppositePlacement(i)),[i,getOppositePlacement(i)]}function getExpandedPlacements(e){const t=getOppositePlacement(e);return[getOppositeAlignmentPlacement(e),t,getOppositeAlignmentPlacement(t)]}function getOppositeAlignmentPlacement(e){return e.replace(/start|end/g,t=>oppositeAlignmentMap[t])}function getSideList(e,t,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?s:i;default:return[]}}function getOppositeAxisPlacements(e,t,n,r){const o=getAlignment(e);let s=getSideList(getSide(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(getOppositeAlignmentPlacement)))),s}function getOppositePlacement(e){return e.replace(/left|right|bottom|top/g,t=>oppositeSideMap[t])}function expandPaddingObject(e){return{top:0,right:0,bottom:0,left:0,...e}}function getPaddingObject(e){return typeof e!="number"?expandPaddingObject(e):{top:e,right:e,bottom:e,left:e}}function rectToClientRect(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function computeCoordsFromPlacement(e,t,n){let{reference:r,floating:o}=e;const s=getSideAxis(t),i=getAlignmentAxis(t),a=getAxisLength(i),l=getSide(t),c=s==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,h=r[a]/2-o[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(getAlignment(t)){case"start":p[i]-=h*(n&&c?-1:1);break;case"end":p[i]+=h*(n&&c?-1:1);break}return p}const computePosition$1=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=computeCoordsFromPlacement(c,r,l),h=r,p={},f=0;for(let y=0;y<a.length;y++){const{name:m,fn:b}=a[y],{x:g,y:w,data:S,reset:x}=await b({x:u,y:d,initialPlacement:r,placement:h,strategy:o,middlewareData:p,rects:c,platform:i,elements:{reference:e,floating:t}});u=g??u,d=w??d,p={...p,[m]:{...p[m],...S}},x&&f<=50&&(f++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(c=x.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):x.rects),{x:u,y:d}=computeCoordsFromPlacement(c,h,l)),y=-1)}return{x:u,y:d,placement:h,strategy:o,middlewareData:p}};async function detectOverflow(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=evaluate(t,e),f=getPaddingObject(p),m=a[h?d==="floating"?"reference":"floating":d],b=rectToClientRect(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),g=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},x=rectToClientRect(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:g,offsetParent:w,strategy:l}):g);return{top:(b.top-x.top+f.top)/S.y,bottom:(x.bottom-b.bottom+f.bottom)/S.y,left:(b.left-x.left+f.left)/S.x,right:(x.right-b.right+f.right)/S.x}}const arrow$1=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=evaluate(e,t)||{};if(c==null)return{};const d=getPaddingObject(u),h={x:n,y:r},p=getAlignmentAxis(o),f=getAxisLength(p),y=await i.getDimensions(c),m=p==="y",b=m?"top":"left",g=m?"bottom":"right",w=m?"clientHeight":"clientWidth",S=s.reference[f]+s.reference[p]-h[p]-s.floating[f],x=h[p]-s.reference[p],v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let _=v?v[w]:0;(!_||!await(i.isElement==null?void 0:i.isElement(v)))&&(_=a.floating[w]||s.floating[f]);const C=S/2-x/2,P=_/2-y[f]/2-1,E=min(d[b],P),$=min(d[g],P),A=E,k=_-y[f]-$,R=_/2-y[f]/2+C,D=clamp(A,R,k),L=!l.arrow&&getAlignment(o)!=null&&R!==D&&s.reference[f]/2-(R<A?E:$)-y[f]/2<0,N=L?R<A?R-A:R-k:0;return{[p]:h[p]+N,data:{[p]:D,centerOffset:R-D-N,...L&&{alignmentOffset:N}},reset:L}}}),flip$1=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:y=!0,...m}=evaluate(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=getSide(o),g=getSideAxis(a),w=getSide(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=h||(w||!y?[getOppositePlacement(a)]:getExpandedPlacements(a)),v=f!=="none";!h&&v&&x.push(...getOppositeAxisPlacements(a,y,f,S));const _=[a,...x],C=await detectOverflow(t,m),P=[];let E=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&P.push(C[b]),d){const R=getAlignmentSides(o,i,S);P.push(C[R[0]],C[R[1]])}if(E=[...E,{placement:o,overflows:P}],!P.every(R=>R<=0)){var $,A;const R=((($=s.flip)==null?void 0:$.index)||0)+1,D=_[R];if(D)return{data:{index:R,overflows:E},reset:{placement:D}};let L=(A=E.filter(N=>N.overflows[0]<=0).sort((N,O)=>N.overflows[1]-O.overflows[1])[0])==null?void 0:A.placement;if(!L)switch(p){case"bestFit":{var k;const N=(k=E.filter(O=>{if(v){const I=getSideAxis(O.placement);return I===g||I==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(I=>I>0).reduce((I,M)=>I+M,0)]).sort((O,I)=>O[1]-I[1])[0])==null?void 0:k[0];N&&(L=N);break}case"initialPlacement":L=a;break}if(o!==L)return{reset:{placement:L}}}return{}}}};function getSideOffsets(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function isAnySideFullyClipped(e){return sides.some(t=>e[t]>=0)}const hide$1=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=evaluate(e,t);switch(r){case"referenceHidden":{const s=await detectOverflow(t,{...o,elementContext:"reference"}),i=getSideOffsets(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:isAnySideFullyClipped(i)}}}case"escaped":{const s=await detectOverflow(t,{...o,altBoundary:!0}),i=getSideOffsets(s,n.floating);return{data:{escapedOffsets:i,escaped:isAnySideFullyClipped(i)}}}default:return{}}}}};async function convertValueToCoords(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=getSide(n),a=getAlignment(n),l=getSideAxis(n)==="y",c=["left","top"].includes(i)?-1:1,u=s&&l?-1:1,d=evaluate(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof f=="number"&&(p=a==="end"?f*-1:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const offset$1=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=t,l=await convertValueToCoords(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},shift$1=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:m=>{let{x:b,y:g}=m;return{x:b,y:g}}},...l}=evaluate(e,t),c={x:n,y:r},u=await detectOverflow(t,l),d=getSideAxis(getSide(o)),h=getOppositeAxis(d);let p=c[h],f=c[d];if(s){const m=h==="y"?"top":"left",b=h==="y"?"bottom":"right",g=p+u[m],w=p-u[b];p=clamp(g,p,w)}if(i){const m=d==="y"?"top":"left",b=d==="y"?"bottom":"right",g=f+u[m],w=f-u[b];f=clamp(g,f,w)}const y=a.fn({...t,[h]:p,[d]:f});return{...y,data:{x:y.x-n,y:y.y-r}}}}},size$1=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:o,elements:s}=t,{apply:i=()=>{},...a}=evaluate(e,t),l=await detectOverflow(t,a),c=getSide(n),u=getAlignment(n),d=getSideAxis(n)==="y",{width:h,height:p}=r.floating;let f,y;c==="top"||c==="bottom"?(f=c,y=u===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(y=c,f=u==="end"?"top":"bottom");const m=p-l.top-l.bottom,b=h-l.left-l.right,g=min(p-l[f],m),w=min(h-l[y],b),S=!t.middlewareData.shift;let x=g,v=w;if(d?v=u||S?min(w,b):b:x=u||S?min(g,m):m,S&&!u){const C=max(l.left,0),P=max(l.right,0),E=max(l.top,0),$=max(l.bottom,0);d?v=h-2*(C!==0||P!==0?C+P:max(l.left,l.right)):x=p-2*(E!==0||$!==0?E+$:max(l.top,l.bottom))}await i({...t,availableWidth:v,availableHeight:x});const _=await o.getDimensions(s.floating);return h!==_.width||p!==_.height?{reset:{rects:!0}}:{}}}};function getNodeName(e){return isNode(e)?(e.nodeName||"").toLowerCase():"#document"}function getWindow(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function getDocumentElement(e){var t;return(t=(isNode(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function isNode(e){return e instanceof Node||e instanceof getWindow(e).Node}function isElement(e){return e instanceof Element||e instanceof getWindow(e).Element}function isHTMLElement(e){return e instanceof HTMLElement||e instanceof getWindow(e).HTMLElement}function isShadowRoot(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof getWindow(e).ShadowRoot}function isOverflowElement(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=getComputedStyle$1(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function isTableElement(e){return["table","td","th"].includes(getNodeName(e))}function isTopLayer(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function isContainingBlock(e){const t=isWebKit(),n=isElement(e)?getComputedStyle$1(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function getContainingBlock(e){let t=getParentNode(e);for(;isHTMLElement(t)&&!isLastTraversableNode(t);){if(isContainingBlock(t))return t;if(isTopLayer(t))return null;t=getParentNode(t)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(e){return["html","body","#document"].includes(getNodeName(e))}function getComputedStyle$1(e){return getWindow(e).getComputedStyle(e)}function getNodeScroll(e){return isElement(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function getParentNode(e){if(getNodeName(e)==="html")return e;const t=e.assignedSlot||e.parentNode||isShadowRoot(e)&&e.host||getDocumentElement(e);return isShadowRoot(t)?t.host:t}function getNearestOverflowAncestor(e){const t=getParentNode(e);return isLastTraversableNode(t)?e.ownerDocument?e.ownerDocument.body:e.body:isHTMLElement(t)&&isOverflowElement(t)?t:getNearestOverflowAncestor(t)}function getOverflowAncestors(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=getNearestOverflowAncestor(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=getWindow(o);if(s){const a=getFrameElement(i);return t.concat(i,i.visualViewport||[],isOverflowElement(o)?o:[],a&&n?getOverflowAncestors(a):[])}return t.concat(o,getOverflowAncestors(o,[],n))}function getFrameElement(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function getCssDimensions(e){const t=getComputedStyle$1(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=isHTMLElement(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,a=round(n)!==s||round(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function unwrapElement(e){return isElement(e)?e:e.contextElement}function getScale(e){const t=unwrapElement(e);if(!isHTMLElement(t))return createCoords(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=getCssDimensions(t);let i=(s?round(n.width):n.width)/r,a=(s?round(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const noOffsets=createCoords(0);function getVisualOffsets(e){const t=getWindow(e);return!isWebKit()||!t.visualViewport?noOffsets:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function shouldAddVisualOffsets(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==getWindow(e)?!1:t}function getBoundingClientRect(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=unwrapElement(e);let i=createCoords(1);t&&(r?isElement(r)&&(i=getScale(r)):i=getScale(e));const a=shouldAddVisualOffsets(s,n,r)?getVisualOffsets(s):createCoords(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(s){const h=getWindow(s),p=r&&isElement(r)?getWindow(r):r;let f=h,y=getFrameElement(f);for(;y&&r&&p!==f;){const m=getScale(y),b=y.getBoundingClientRect(),g=getComputedStyle$1(y),w=b.left+(y.clientLeft+parseFloat(g.paddingLeft))*m.x,S=b.top+(y.clientTop+parseFloat(g.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=w,c+=S,f=getWindow(y),y=getFrameElement(f)}}return rectToClientRect({width:u,height:d,x:l,y:c})}function convertOffsetParentRelativeRectToViewportRelativeRect(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=getDocumentElement(r),a=t?isTopLayer(t.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=createCoords(1);const u=createCoords(0),d=isHTMLElement(r);if((d||!d&&!s)&&((getNodeName(r)!=="body"||isOverflowElement(i))&&(l=getNodeScroll(r)),isHTMLElement(r))){const h=getBoundingClientRect(r);c=getScale(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function getClientRects(e){return Array.from(e.getClientRects())}function getWindowScrollBarX(e){return getBoundingClientRect(getDocumentElement(e)).left+getNodeScroll(e).scrollLeft}function getDocumentRect(e){const t=getDocumentElement(e),n=getNodeScroll(e),r=e.ownerDocument.body,o=max(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=max(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+getWindowScrollBarX(e);const a=-n.scrollTop;return getComputedStyle$1(r).direction==="rtl"&&(i+=max(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function getViewportRect(e,t){const n=getWindow(e),r=getDocumentElement(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const c=isWebKit();(!c||c&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function getInnerBoundingClientRect(e,t){const n=getBoundingClientRect(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=isHTMLElement(e)?getScale(e):createCoords(1),i=e.clientWidth*s.x,a=e.clientHeight*s.y,l=o*s.x,c=r*s.y;return{width:i,height:a,x:l,y:c}}function getClientRectFromClippingAncestor(e,t,n){let r;if(t==="viewport")r=getViewportRect(e,n);else if(t==="document")r=getDocumentRect(getDocumentElement(e));else if(isElement(t))r=getInnerBoundingClientRect(t,n);else{const o=getVisualOffsets(e);r={...t,x:t.x-o.x,y:t.y-o.y}}return rectToClientRect(r)}function hasFixedPositionAncestor(e,t){const n=getParentNode(e);return n===t||!isElement(n)||isLastTraversableNode(n)?!1:getComputedStyle$1(n).position==="fixed"||hasFixedPositionAncestor(n,t)}function getClippingElementAncestors(e,t){const n=t.get(e);if(n)return n;let r=getOverflowAncestors(e,[],!1).filter(a=>isElement(a)&&getNodeName(a)!=="body"),o=null;const s=getComputedStyle$1(e).position==="fixed";let i=s?getParentNode(e):e;for(;isElement(i)&&!isLastTraversableNode(i);){const a=getComputedStyle$1(i),l=isContainingBlock(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||isOverflowElement(i)&&!l&&hasFixedPositionAncestor(e,i))?r=r.filter(u=>u!==i):o=a,i=getParentNode(i)}return t.set(e,r),r}function getClippingRect(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?isTopLayer(t)?[]:getClippingElementAncestors(t,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const d=getClientRectFromClippingAncestor(t,u,o);return c.top=max(d.top,c.top),c.right=min(d.right,c.right),c.bottom=min(d.bottom,c.bottom),c.left=max(d.left,c.left),c},getClientRectFromClippingAncestor(t,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function getDimensions(e){const{width:t,height:n}=getCssDimensions(e);return{width:t,height:n}}function getRectRelativeToOffsetParent(e,t,n){const r=isHTMLElement(t),o=getDocumentElement(t),s=n==="fixed",i=getBoundingClientRect(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=createCoords(0);if(r||!r&&!s)if((getNodeName(t)!=="body"||isOverflowElement(o))&&(a=getNodeScroll(t)),r){const d=getBoundingClientRect(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else o&&(l.x=getWindowScrollBarX(o));const c=i.left+a.scrollLeft-l.x,u=i.top+a.scrollTop-l.y;return{x:c,y:u,width:i.width,height:i.height}}function isStaticPositioned(e){return getComputedStyle$1(e).position==="static"}function getTrueOffsetParent(e,t){return!isHTMLElement(e)||getComputedStyle$1(e).position==="fixed"?null:t?t(e):e.offsetParent}function getOffsetParent(e,t){const n=getWindow(e);if(isTopLayer(e))return n;if(!isHTMLElement(e)){let o=getParentNode(e);for(;o&&!isLastTraversableNode(o);){if(isElement(o)&&!isStaticPositioned(o))return o;o=getParentNode(o)}return n}let r=getTrueOffsetParent(e,t);for(;r&&isTableElement(r)&&isStaticPositioned(r);)r=getTrueOffsetParent(r,t);return r&&isLastTraversableNode(r)&&isStaticPositioned(r)&&!isContainingBlock(r)?n:r||getContainingBlock(e)||n}const getElementRects=async function(e){const t=this.getOffsetParent||getOffsetParent,n=this.getDimensions,r=await n(e.floating);return{reference:getRectRelativeToOffsetParent(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function isRTL(e){return getComputedStyle$1(e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(e,t){let n=null,r;const o=getDocumentElement(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:h}=e.getBoundingClientRect();if(a||t(),!d||!h)return;const p=floor(u),f=floor(o.clientWidth-(c+d)),y=floor(o.clientHeight-(u+h)),m=floor(c),g={rootMargin:-p+"px "+-f+"px "+-y+"px "+-m+"px",threshold:max(0,min(1,l))||1};let w=!0;function S(x){const v=x[0].intersectionRatio;if(v!==l){if(!w)return i();v?i(!1,v):r=setTimeout(()=>{i(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(S,{...g,root:o.ownerDocument})}catch{n=new IntersectionObserver(S,g)}n.observe(e)}return i(!0),s}function autoUpdate(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=unwrapElement(e),u=o||s?[...c?getOverflowAncestors(c):[],...getOverflowAncestors(t)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const d=c&&a?observeMove(c,n):null;let h=-1,p=null;i&&(p=new ResizeObserver(b=>{let[g]=b;g&&g.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let f,y=l?getBoundingClientRect(e):null;l&&m();function m(){const b=getBoundingClientRect(e);y&&(b.x!==y.x||b.y!==y.y||b.width!==y.width||b.height!==y.height)&&n(),y=b,f=requestAnimationFrame(m)}return n(),()=>{var b;u.forEach(g=>{o&&g.removeEventListener("scroll",n),s&&g.removeEventListener("resize",n)}),d?.(),(b=p)==null||b.disconnect(),p=null,l&&cancelAnimationFrame(f)}}const offset=offset$1,shift=shift$1,flip=flip$1,size=size$1,hide=hide$1,arrow=arrow$1,computePosition=(e,t,n)=>{const r=new Map,o={platform,...n},s={...o.platform,_c:r};return computePosition$1(e,t,{...o,platform:s})};var _tmpl$$5=template('<svg display=block viewBox="0 0 30 30"style=transform:scale(1.02)><g><path fill=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z></path><path stroke=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z>'),PopperContext=createContext();function usePopperContext(){const e=useContext(PopperContext);if(e===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return e}var DEFAULT_SIZE=30,HALF_DEFAULT_SIZE=DEFAULT_SIZE/2,ROTATION_DEG={top:180,right:-90,bottom:0,left:90};function PopperArrow(e){const t=usePopperContext(),n=mergeDefaultProps({size:DEFAULT_SIZE},e),[r,o]=splitProps(n,["ref","style","size"]),s=()=>t.currentPlacement().split("-")[0],i=createComputedStyle(t.contentRef),a=()=>i()?.getPropertyValue("background-color")||"none",l=()=>i()?.getPropertyValue(`border-${s()}-color`)||"none",c=()=>i()?.getPropertyValue(`border-${s()}-width`)||"0px",u=()=>Number.parseInt(c())*2*(DEFAULT_SIZE/r.size),d=()=>`rotate(${ROTATION_DEG[s()]} ${HALF_DEFAULT_SIZE} ${HALF_DEFAULT_SIZE}) translate(0 2)`;return createComponent(Polymorphic,mergeProps({as:"div",ref(h){var p=mergeRefs(t.setArrowRef,r.ref);typeof p=="function"&&p(h)},"aria-hidden":"true",get style(){return combineStyle({position:"absolute","font-size":`${r.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:a(),stroke:l(),"stroke-width":u()},r.style)}},o,{get children(){var h=_tmpl$$5(),p=h.firstChild,f=p.firstChild;return f.nextSibling,createRenderEffect(()=>setAttribute(p,"transform",d())),h}}))}function createComputedStyle(e){const[t,n]=createSignal();return createEffect(()=>{const r=e();r&&n(getWindow$1(r).getComputedStyle(r))}),t}function PopperPositioner(e){const t=usePopperContext(),[n,r]=splitProps(e,["ref","style"]);return createComponent(Polymorphic,mergeProps({as:"div",ref(o){var s=mergeRefs(t.setPositionerRef,n.ref);typeof s=="function"&&s(o)},"data-popper-positioner":"",get style(){return combineStyle({position:"absolute",top:0,left:0,"min-width":"max-content"},n.style)}},r))}function createDOMRect(e){const{x:t=0,y:n=0,width:r=0,height:o=0}=e??{};if(typeof DOMRect=="function")return new DOMRect(t,n,r,o);const s={x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:n+o,left:t};return{...s,toJSON:()=>s}}function getAnchorElement(e,t){return{contextElement:e,getBoundingClientRect:()=>{const r=t(e);return r?createDOMRect(r):e?e.getBoundingClientRect():createDOMRect()}}}function isValidPlacement(e){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(e)}var REVERSE_BASE_PLACEMENT={top:"bottom",right:"left",bottom:"top",left:"right"};function getTransformOrigin(e,t){const[n,r]=e.split("-"),o=REVERSE_BASE_PLACEMENT[n];return r?n==="left"||n==="right"?`${o} ${r==="start"?"top":"bottom"}`:r==="start"?`${o} ${t==="rtl"?"right":"left"}`:`${o} ${t==="rtl"?"left":"right"}`:`${o} center`}function PopperRoot(e){const t=mergeDefaultProps({getAnchorRect:h=>h?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},e),[n,r]=createSignal(),[o,s]=createSignal(),[i,a]=createSignal(t.placement),l=()=>getAnchorElement(t.anchorRef?.(),t.getAnchorRect),{direction:c}=useLocale();async function u(){const h=l(),p=n(),f=o();if(!h||!p)return;const y=(f?.clientHeight||0)/2,m=typeof t.gutter=="number"?t.gutter+y:t.gutter??y;p.style.setProperty("--kb-popper-content-overflow-padding",`${t.overflowPadding}px`),h.getBoundingClientRect();const b=[offset(({placement:v})=>{const _=!!v.split("-")[1];return{mainAxis:m,crossAxis:_?void 0:t.shift,alignmentAxis:t.shift}})];if(t.flip!==!1){const v=typeof t.flip=="string"?t.flip.split(" "):void 0;if(v!==void 0&&!v.every(isValidPlacement))throw new Error("`flip` expects a spaced-delimited list of placements");b.push(flip({padding:t.overflowPadding,fallbackPlacements:v}))}(t.slide||t.overlap)&&b.push(shift({mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding})),b.push(size({padding:t.overflowPadding,apply({availableWidth:v,availableHeight:_,rects:C}){const P=Math.round(C.reference.width);v=Math.floor(v),_=Math.floor(_),p.style.setProperty("--kb-popper-anchor-width",`${P}px`),p.style.setProperty("--kb-popper-content-available-width",`${v}px`),p.style.setProperty("--kb-popper-content-available-height",`${_}px`),t.sameWidth&&(p.style.width=`${P}px`),t.fitViewport&&(p.style.maxWidth=`${v}px`,p.style.maxHeight=`${_}px`)}})),t.hideWhenDetached&&b.push(hide({padding:t.detachedPadding})),f&&b.push(arrow({element:f,padding:t.arrowPadding}));const g=await computePosition(h,p,{placement:t.placement,strategy:"absolute",middleware:b,platform:{...platform,isRTL:()=>c()==="rtl"}});if(a(g.placement),t.onCurrentPlacementChange?.(g.placement),!p)return;p.style.setProperty("--kb-popper-content-transform-origin",getTransformOrigin(g.placement,c()));const w=Math.round(g.x),S=Math.round(g.y);let x;if(t.hideWhenDetached&&(x=g.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(p.style,{top:"0",left:"0",transform:`translate3d(${w}px, ${S}px, 0)`,visibility:x}),f&&g.middlewareData.arrow){const{x:v,y:_}=g.middlewareData.arrow,C=g.placement.split("-")[0];Object.assign(f.style,{left:v!=null?`${v}px`:"",top:_!=null?`${_}px`:"",[C]:"100%"})}}createEffect(()=>{const h=l(),p=n();if(!h||!p)return;const f=autoUpdate(h,p,u,{elementResize:typeof ResizeObserver=="function"});onCleanup(f)}),createEffect(()=>{const h=n(),p=t.contentRef?.();!h||!p||queueMicrotask(()=>{h.style.zIndex=getComputedStyle(p).zIndex})});const d={currentPlacement:i,contentRef:()=>t.contentRef?.(),setPositionerRef:r,setArrowRef:s};return createComponent(PopperContext.Provider,{value:d,get children(){return t.children}})}var Popper=Object.assign(PopperRoot,{Arrow:PopperArrow,Context:PopperContext,usePopperContext,Positioner:PopperPositioner}),DATA_TOP_LAYER_ATTR="data-kb-top-layer",originalBodyPointerEvents,hasDisabledBodyPointerEvents=!1,layers=[];function indexOf(e){return layers.findIndex(t=>t.node===e)}function find(e){return layers[indexOf(e)]}function isTopMostLayer(e){return layers[layers.length-1].node===e}function getPointerBlockingLayers(){return layers.filter(e=>e.isPointerBlocking)}function getTopMostPointerBlockingLayer(){return[...getPointerBlockingLayers()].slice(-1)[0]}function hasPointerBlockingLayer(){return getPointerBlockingLayers().length>0}function isBelowPointerBlockingLayer(e){const t=indexOf(getTopMostPointerBlockingLayer()?.node);return indexOf(e)<t}function addLayer(e){layers.push(e)}function removeLayer(e){const t=indexOf(e);t<0||layers.splice(t,1)}function assignPointerEventToLayers(){for(const{node:e}of layers)e.style.pointerEvents=isBelowPointerBlockingLayer(e)?"none":"auto"}function disableBodyPointerEvents(e){if(hasPointerBlockingLayer()&&!hasDisabledBodyPointerEvents){const t=getDocument(e);originalBodyPointerEvents=document.body.style.pointerEvents,t.body.style.pointerEvents="none",hasDisabledBodyPointerEvents=!0}}function restoreBodyPointerEvents(e){if(hasPointerBlockingLayer())return;const t=getDocument(e);t.body.style.pointerEvents=originalBodyPointerEvents,t.body.style.length===0&&t.body.removeAttribute("style"),hasDisabledBodyPointerEvents=!1}var layerStack={layers,isTopMostLayer,hasPointerBlockingLayer,isBelowPointerBlockingLayer,addLayer,removeLayer,indexOf,find,assignPointerEventToLayers,disableBodyPointerEvents,restoreBodyPointerEvents},AUTOFOCUS_ON_MOUNT_EVENT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT_EVENT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS={bubbles:!1,cancelable:!0},focusScopeStack={stack:[],active(){return this.stack[0]},add(e){e!==this.active()&&this.active()?.pause(),this.stack=removeItemFromArray(this.stack,e),this.stack.unshift(e)},remove(e){this.stack=removeItemFromArray(this.stack,e),this.active()?.resume()}};function createFocusScope(e,t){const[n,r]=createSignal(!1),o={pause(){r(!0)},resume(){r(!1)}};let s=null;const i=f=>e.onMountAutoFocus?.(f),a=f=>e.onUnmountAutoFocus?.(f),l=()=>getDocument(t()),c=()=>{const f=l().createElement("span");return f.setAttribute("data-focus-trap",""),f.tabIndex=0,Object.assign(f.style,visuallyHiddenStyles),f},u=()=>{const f=t();return f?getAllTabbableIn(f,!0).filter(y=>!y.hasAttribute("data-focus-trap")):[]},d=()=>{const f=u();return f.length>0?f[0]:null},h=()=>{const f=u();return f.length>0?f[f.length-1]:null},p=()=>{const f=t();if(!f)return!1;const y=getActiveElement(f);return!y||contains$1(f,y)?!1:isFocusable(y)};createEffect(()=>{const f=t();if(!f)return;focusScopeStack.add(o);const y=getActiveElement(f);if(!contains$1(f,y)){const b=new CustomEvent(AUTOFOCUS_ON_MOUNT_EVENT,EVENT_OPTIONS);f.addEventListener(AUTOFOCUS_ON_MOUNT_EVENT,i),f.dispatchEvent(b),b.defaultPrevented||setTimeout(()=>{focusWithoutScrolling(d()),getActiveElement(f)===y&&focusWithoutScrolling(f)},0)}onCleanup(()=>{f.removeEventListener(AUTOFOCUS_ON_MOUNT_EVENT,i),setTimeout(()=>{const b=new CustomEvent(AUTOFOCUS_ON_UNMOUNT_EVENT,EVENT_OPTIONS);p()&&b.preventDefault(),f.addEventListener(AUTOFOCUS_ON_UNMOUNT_EVENT,a),f.dispatchEvent(b),b.defaultPrevented||focusWithoutScrolling(y??l().body),f.removeEventListener(AUTOFOCUS_ON_UNMOUNT_EVENT,a),focusScopeStack.remove(o)},0)})}),createEffect(()=>{const f=t();if(!f||!access$1(e.trapFocus)||n())return;const y=b=>{const g=b.target;g?.closest(`[${DATA_TOP_LAYER_ATTR}]`)||(contains$1(f,g)?s=g:focusWithoutScrolling(s))},m=b=>{const w=b.relatedTarget??getActiveElement(f);w?.closest(`[${DATA_TOP_LAYER_ATTR}]`)||contains$1(f,w)||focusWithoutScrolling(s)};l().addEventListener("focusin",y),l().addEventListener("focusout",m),onCleanup(()=>{l().removeEventListener("focusin",y),l().removeEventListener("focusout",m)})}),createEffect(()=>{const f=t();if(!f||!access$1(e.trapFocus)||n())return;const y=c();f.insertAdjacentElement("afterbegin",y);const m=c();f.insertAdjacentElement("beforeend",m);function b(w){const S=d(),x=h();w.relatedTarget===S?focusWithoutScrolling(x):focusWithoutScrolling(S)}y.addEventListener("focusin",b),m.addEventListener("focusin",b);const g=new MutationObserver(w=>{for(const S of w)S.previousSibling===m&&(m.remove(),f.insertAdjacentElement("beforeend",m)),S.nextSibling===y&&(y.remove(),f.insertAdjacentElement("afterbegin",y))});g.observe(f,{childList:!0,subtree:!1}),onCleanup(()=>{y.removeEventListener("focusin",b),m.removeEventListener("focusin",b),y.remove(),m.remove(),g.disconnect()})})}var LIVEREGION_TIMEOUT_DELAY=7e3,liveAnnouncer=null,DATA_LIVE_ANNOUNCER_ATTR="data-live-announcer";function announce(e,t="assertive",n=LIVEREGION_TIMEOUT_DELAY){liveAnnouncer||(liveAnnouncer=new LiveAnnouncer),liveAnnouncer.announce(e,t,n)}function clearAnnouncer(e){liveAnnouncer&&liveAnnouncer.clear(e)}var LiveAnnouncer=class{node;assertiveLog;politeLog;constructor(){this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,visuallyHiddenStyles),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node)}createLog(e){const t=document.createElement("div");return t.setAttribute("role","log"),t.setAttribute("aria-live",e),t.setAttribute("aria-relevant","additions"),t}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,t="assertive",n=LIVEREGION_TIMEOUT_DELAY){if(!this.node)return;const r=document.createElement("div");r.textContent=e,t==="assertive"?this.assertiveLog.appendChild(r):this.politeLog.appendChild(r),e!==""&&setTimeout(()=>{r.remove()},n)}clear(e){this.node&&((!e||e==="assertive")&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&(this.politeLog.innerHTML=""))}};function createHideOutside(e){createEffect(()=>{access$1(e.isDisabled)||onCleanup(ariaHideOutside(access$1(e.targets),access$1(e.root)))})}var refCountMap=new WeakMap,observerStack=[];function ariaHideOutside(e,t=document.body){const n=new Set(e),r=new Set,o=l=>{for(const h of l.querySelectorAll(`[${DATA_LIVE_ANNOUNCER_ATTR}], [${DATA_TOP_LAYER_ATTR}]`))n.add(h);const c=h=>{if(n.has(h)||h.parentElement&&r.has(h.parentElement)&&h.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const p of n)if(h.contains(p))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,{acceptNode:c}),d=c(l);if(d===NodeFilter.FILTER_ACCEPT&&s(l),d!==NodeFilter.FILTER_REJECT){let h=u.nextNode();for(;h!=null;)s(h),h=u.nextNode()}},s=l=>{const c=refCountMap.get(l)??0;l.getAttribute("aria-hidden")==="true"&&c===0||(c===0&&l.setAttribute("aria-hidden","true"),r.add(l),refCountMap.set(l,c+1))};observerStack.length&&observerStack[observerStack.length-1].disconnect(),o(t);const i=new MutationObserver(l=>{for(const c of l)if(!(c.type!=="childList"||c.addedNodes.length===0)&&![...n,...r].some(u=>u.contains(c.target))){for(const u of c.removedNodes)u instanceof Element&&(n.delete(u),r.delete(u));for(const u of c.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?n.add(u):u instanceof Element&&o(u)}});i.observe(t,{childList:!0,subtree:!0});const a={observe(){i.observe(t,{childList:!0,subtree:!0})},disconnect(){i.disconnect()}};return observerStack.push(a),()=>{i.disconnect();for(const l of r){const c=refCountMap.get(l);if(c==null)return;c===1?(l.removeAttribute("aria-hidden"),refCountMap.delete(l)):refCountMap.set(l,c-1)}a===observerStack[observerStack.length-1]?(observerStack.pop(),observerStack.length&&observerStack[observerStack.length-1].observe()):observerStack.splice(observerStack.indexOf(a),1)}}function createEscapeKeyDown(e){const t=n=>{n.key===EventKey.Escape&&e.onEscapeKeyDown?.(n)};createEffect(()=>{if(access$1(e.isDisabled))return;const n=e.ownerDocument?.()??getDocument();n.addEventListener("keydown",t),onCleanup(()=>{n.removeEventListener("keydown",t)})})}var POINTER_DOWN_OUTSIDE_EVENT="interactOutside.pointerDownOutside",FOCUS_OUTSIDE_EVENT="interactOutside.focusOutside";function createInteractOutside(e,t){let n,r=noop;const o=()=>getDocument(t()),s=d=>e.onPointerDownOutside?.(d),i=d=>e.onFocusOutside?.(d),a=d=>e.onInteractOutside?.(d),l=d=>{const h=d.target;return!(h instanceof HTMLElement)||h.closest(`[${DATA_TOP_LAYER_ATTR}]`)||!contains$1(o(),h)||contains$1(t(),h)?!1:!e.shouldExcludeElement?.(h)},c=d=>{function h(){const p=t(),f=d.target;if(!p||!f||!l(d))return;const y=composeEventHandlers([s,a]);f.addEventListener(POINTER_DOWN_OUTSIDE_EVENT,y,{once:!0});const m=new CustomEvent(POINTER_DOWN_OUTSIDE_EVENT,{bubbles:!1,cancelable:!0,detail:{originalEvent:d,isContextMenu:d.button===2||isCtrlKey(d)&&d.button===0}});f.dispatchEvent(m)}d.pointerType==="touch"?(o().removeEventListener("click",h),r=h,o().addEventListener("click",h,{once:!0})):h()},u=d=>{const h=t(),p=d.target;if(!h||!p||!l(d))return;const f=composeEventHandlers([i,a]);p.addEventListener(FOCUS_OUTSIDE_EVENT,f,{once:!0});const y=new CustomEvent(FOCUS_OUTSIDE_EVENT,{bubbles:!1,cancelable:!0,detail:{originalEvent:d,isContextMenu:!1}});p.dispatchEvent(y)};createEffect(()=>{access$1(e.isDisabled)||(n=window.setTimeout(()=>{o().addEventListener("pointerdown",c,!0)},0),o().addEventListener("focusin",u,!0),onCleanup(()=>{window.clearTimeout(n),o().removeEventListener("click",r),o().removeEventListener("pointerdown",c,!0),o().removeEventListener("focusin",u,!0)}))})}var DismissableLayerContext=createContext();function useOptionalDismissableLayerContext(){return useContext(DismissableLayerContext)}function DismissableLayer(e){let t;const n=useOptionalDismissableLayerContext(),[r,o]=splitProps(e,["ref","disableOutsidePointerEvents","excludedElements","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","bypassTopMostLayerCheck"]),s=new Set([]),i=d=>{s.add(d);const h=n?.registerNestedLayer(d);return()=>{s.delete(d),h?.()}};createInteractOutside({shouldExcludeElement:d=>t?r.excludedElements?.some(h=>contains$1(h(),d))||[...s].some(h=>contains$1(h,d)):!1,onPointerDownOutside:d=>{!t||layerStack.isBelowPointerBlockingLayer(t)||!r.bypassTopMostLayerCheck&&!layerStack.isTopMostLayer(t)||(r.onPointerDownOutside?.(d),r.onInteractOutside?.(d),d.defaultPrevented||r.onDismiss?.())},onFocusOutside:d=>{r.onFocusOutside?.(d),r.onInteractOutside?.(d),d.defaultPrevented||r.onDismiss?.()}},()=>t),createEscapeKeyDown({ownerDocument:()=>getDocument(t),onEscapeKeyDown:d=>{!t||!layerStack.isTopMostLayer(t)||(r.onEscapeKeyDown?.(d),!d.defaultPrevented&&r.onDismiss&&(d.preventDefault(),r.onDismiss()))}}),onMount(()=>{if(!t)return;layerStack.addLayer({node:t,isPointerBlocking:r.disableOutsidePointerEvents,dismiss:r.onDismiss});const d=n?.registerNestedLayer(t);layerStack.assignPointerEventToLayers(),layerStack.disableBodyPointerEvents(t),onCleanup(()=>{t&&(layerStack.removeLayer(t),d?.(),layerStack.assignPointerEventToLayers(),layerStack.restoreBodyPointerEvents(t))})}),createEffect(on([()=>t,()=>r.disableOutsidePointerEvents],([d,h])=>{if(!d)return;const p=layerStack.find(d);p&&p.isPointerBlocking!==h&&(p.isPointerBlocking=h,layerStack.assignPointerEventToLayers()),h&&layerStack.disableBodyPointerEvents(d),onCleanup(()=>{layerStack.restoreBodyPointerEvents(d)})},{defer:!0}));const u={registerNestedLayer:i};return createComponent(DismissableLayerContext.Provider,{value:u,get children(){return createComponent(Polymorphic,mergeProps({as:"div",ref(d){var h=mergeRefs(p=>t=p,r.ref);typeof h=="function"&&h(d)}},o))}})}var FORM_CONTROL_FIELD_PROP_NAMES=["id","aria-label","aria-labelledby","aria-describedby"];function createFormControlField(e){const t=useFormControlContext(),n=mergeDefaultProps({id:t.generateId("field")},e);return createEffect(()=>onCleanup(t.registerField(access$1(n.id)))),{fieldProps:{id:()=>access$1(n.id),ariaLabel:()=>access$1(n["aria-label"]),ariaLabelledBy:()=>t.getAriaLabelledBy(access$1(n.id),access$1(n["aria-label"]),access$1(n["aria-labelledby"])),ariaDescribedBy:()=>t.getAriaDescribedBy(access$1(n["aria-describedby"]))}}}function createFormResetListener(e,t){createEffect(on(e,n=>{if(n==null)return;const r=getClosestForm(n);r!=null&&(r.addEventListener("reset",t,{passive:!0}),onCleanup(()=>{r.removeEventListener("reset",t)}))}))}function getClosestForm(e){return isFormElement(e)?e.form:e.closest("form")}function isFormElement(e){return e.matches("textarea, input, select, button")}function createDisclosureState(e={}){const[t,n]=createControllableBooleanSignal({value:()=>access$1(e.open),defaultValue:()=>!!access$1(e.defaultOpen),onChange:i=>e.onOpenChange?.(i)}),r=()=>{n(!0)},o=()=>{n(!1)};return{isOpen:t,setIsOpen:n,open:r,close:o,toggle:()=>{t()?o():r()}}}var access=e=>typeof e=="function"?e():e,contains=(e,t)=>{if(e.contains(t))return!0;let n=t;for(;n;){if(n===e)return!0;n=n._$host??n.parentElement}return!1},activeStyles=new Map,createStyle=e=>{createEffect(()=>{const t=access(e.style)??{},n=access(e.properties)??[],r={};for(const s in t)r[s]=e.element.style[s];const o=activeStyles.get(e.key);o?o.activeCount++:activeStyles.set(e.key,{activeCount:1,originalStyles:r,properties:n.map(s=>s.key)}),Object.assign(e.element.style,e.style);for(const s of n)e.element.style.setProperty(s.key,s.value);onCleanup(()=>{const s=activeStyles.get(e.key);if(s){if(s.activeCount!==1){s.activeCount--;return}activeStyles.delete(e.key);for(const[i,a]of Object.entries(s.originalStyles))e.element.style[i]=a;for(const i of s.properties)e.element.style.removeProperty(i);e.element.style.length===0&&e.element.removeAttribute("style"),e.cleanup?.()}})})},style_default=createStyle,getScrollDimensions=(e,t)=>{switch(t){case"x":return[e.clientWidth,e.scrollLeft,e.scrollWidth];case"y":return[e.clientHeight,e.scrollTop,e.scrollHeight]}},isScrollContainer=(e,t)=>{const n=getComputedStyle(e),r=t==="x"?n.overflowX:n.overflowY;return r==="auto"||r==="scroll"||e.tagName==="HTML"&&r==="visible"},getScrollAtLocation=(e,t,n)=>{const r=t==="x"&&window.getComputedStyle(e).direction==="rtl"?-1:1;let o=e,s=0,i=0,a=!1;do{const[l,c,u]=getScrollDimensions(o,t),d=u-l-r*c;(c!==0||d!==0)&&isScrollContainer(o,t)&&(s+=d,i+=c),o===(n??document.documentElement)?a=!0:o=o._$host??o.parentElement}while(o&&!a);return[s,i]},[preventScrollStack,setPreventScrollStack]=createSignal([]),isActive=e=>preventScrollStack().indexOf(e)===preventScrollStack().length-1,createPreventScroll=e=>{const t=mergeProps({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!1},e),n=createUniqueId();let r=[0,0],o=null,s=null;createEffect(()=>{access(t.enabled)&&(setPreventScrollStack(c=>[...c,n]),onCleanup(()=>{setPreventScrollStack(c=>c.filter(u=>u!==n))}))}),createEffect(()=>{if(!access(t.enabled)||!access(t.hideScrollbar))return;const{body:c}=document,u=window.innerWidth-c.offsetWidth;if(access(t.preventScrollbarShift)){const d={overflow:"hidden"},h=[];u>0&&(access(t.preventScrollbarShiftMode)==="padding"?d.paddingRight=`calc(${window.getComputedStyle(c).paddingRight} + ${u}px)`:d.marginRight=`calc(${window.getComputedStyle(c).marginRight} + ${u}px)`,h.push({key:"--scrollbar-width",value:`${u}px`}));const p=window.scrollY,f=window.scrollX;style_default({key:"prevent-scroll",element:c,style:d,properties:h,cleanup:()=>{access(t.restoreScrollPosition)&&u>0&&window.scrollTo(f,p)}})}else style_default({key:"prevent-scroll",element:c,style:{overflow:"hidden"}})}),createEffect(()=>{!isActive(n)||!access(t.enabled)||(document.addEventListener("wheel",a,{passive:!1}),document.addEventListener("touchstart",i,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1}),onCleanup(()=>{document.removeEventListener("wheel",a),document.removeEventListener("touchstart",i),document.removeEventListener("touchmove",l)}))});const i=c=>{r=getTouchXY(c),o=null,s=null},a=c=>{const u=c.target,d=access(t.element),h=getDeltaXY(c),p=Math.abs(h[0])>Math.abs(h[1])?"x":"y",f=p==="x"?h[0]:h[1],y=wouldScroll(u,p,f,d);let m;d&&contains(d,u)?m=!y:m=!0,m&&c.cancelable&&c.preventDefault()},l=c=>{const u=access(t.element),d=c.target;let h;if(c.touches.length===2)h=!access(t.allowPinchZoom);else{if(o==null||s===null){const p=getTouchXY(c).map((y,m)=>r[m]-y),f=Math.abs(p[0])>Math.abs(p[1])?"x":"y";o=f,s=f==="x"?p[0]:p[1]}if(d.type==="range")h=!1;else{const p=wouldScroll(d,o,s,u);u&&contains(u,d)?h=!p:h=!0}}h&&c.cancelable&&c.preventDefault()}},getDeltaXY=e=>[e.deltaX,e.deltaY],getTouchXY=e=>e.changedTouches[0]?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0],wouldScroll=(e,t,n,r)=>{const o=r!==null&&contains(r,e),[s,i]=getScrollAtLocation(e,t,o?r:void 0);return!(n>0&&Math.abs(s)<=1||n<0&&Math.abs(i)<1)},preventScroll_default=createPreventScroll,src_default$1=preventScroll_default,createPresence=e=>{const t=createMemo(()=>{const i=access(e.element);if(i)return getComputedStyle(i)}),n=()=>t()?.animationName??"none",[r,o]=createSignal(access(e.show)?"present":"hidden");let s="none";return createEffect(i=>{const a=access(e.show);return untrack(()=>{if(i===a)return a;const l=s,c=n();a?o("present"):c==="none"||t()?.display==="none"?o("hidden"):o(i===!0&&l!==c?"hiding":"hidden")}),a}),createEffect(()=>{const i=access(e.element);if(!i)return;const a=c=>{c.target===i&&(s=n())},l=c=>{const d=n().includes(c.animationName);c.target===i&&d&&r()==="hiding"&&o("hidden")};i.addEventListener("animationstart",a),i.addEventListener("animationcancel",l),i.addEventListener("animationend",l),onCleanup(()=>{i.removeEventListener("animationstart",a),i.removeEventListener("animationcancel",l),i.removeEventListener("animationend",l)})}),{present:()=>r()==="present"||r()==="hiding",state:r,setState:o}},presence_default=createPresence,src_default=presence_default,select_exports={};__export(select_exports,{Arrow:()=>PopperArrow,Content:()=>SelectContent,Description:()=>FormControlDescription,ErrorMessage:()=>FormControlErrorMessage,HiddenSelect:()=>SelectHiddenSelect,Icon:()=>SelectIcon,Item:()=>ListboxItem,ItemDescription:()=>ListboxItemDescription,ItemIndicator:()=>ListboxItemIndicator,ItemLabel:()=>ListboxItemLabel,Label:()=>SelectLabel,Listbox:()=>SelectListbox,Portal:()=>SelectPortal,Root:()=>SelectRoot,Section:()=>ListboxSection,Select:()=>Select,Trigger:()=>SelectTrigger,Value:()=>SelectValue});var SelectContext=createContext();function useSelectContext(){const e=useContext(SelectContext);if(e===void 0)throw new Error("[kobalte]: `useSelectContext` must be used within a `Select` component");return e}function SelectContent(e){let t;const n=useSelectContext(),[r,o]=splitProps(e,["ref","style","onCloseAutoFocus","onFocusOutside"]),s=a=>{n.close()},i=a=>{r.onFocusOutside?.(a),n.isOpen()&&n.isModal()&&a.preventDefault()};return createHideOutside({isDisabled:()=>!(n.isOpen()&&n.isModal()),targets:()=>t?[t]:[]}),src_default$1({element:()=>t??null,enabled:()=>n.contentPresent()&&n.preventScroll()}),createFocusScope({trapFocus:()=>n.isOpen()&&n.isModal(),onMountAutoFocus:a=>{a.preventDefault()},onUnmountAutoFocus:a=>{r.onCloseAutoFocus?.(a),a.defaultPrevented||(focusWithoutScrolling(n.triggerRef()),a.preventDefault())}},()=>t),createComponent(Show,{get when(){return n.contentPresent()},get children(){return createComponent(Popper.Positioner,{get children(){return createComponent(DismissableLayer,mergeProps({ref(a){var l=mergeRefs(c=>{n.setContentRef(c),t=c},r.ref);typeof l=="function"&&l(a)},get disableOutsidePointerEvents(){return createMemo(()=>!!n.isModal())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get style(){return combineStyle({"--kb-select-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},r.style)},onEscapeKeyDown:s,onFocusOutside:i,get onDismiss(){return n.close}},()=>n.dataset(),o))}})}})}function SelectHiddenSelect(e){const t=useSelectContext();return createComponent(HiddenSelectBase,mergeProps({get collection(){return t.listState().collection()},get selectionManager(){return t.listState().selectionManager()},get isOpen(){return t.isOpen()},get isMultiple(){return t.isMultiple()},get isVirtualized(){return t.isVirtualized()},focusTrigger:()=>t.triggerRef()?.focus()},e))}function SelectIcon(e){const t=useSelectContext(),n=mergeDefaultProps({children:"▼"},e);return createComponent(Polymorphic,mergeProps({as:"span","aria-hidden":"true"},()=>t.dataset(),n))}function SelectLabel(e){const t=useSelectContext(),[n,r]=splitProps(e,["onClick"]);return createComponent(FormControlLabel,mergeProps({as:"span",onClick:s=>{callHandler(s,n.onClick),t.isDisabled()||t.triggerRef()?.focus()}},r))}function SelectListbox(e){const t=useSelectContext(),n=mergeDefaultProps({id:t.generateId("listbox")},e),[r,o]=splitProps(n,["ref","id","onKeyDown"]);return createEffect(()=>onCleanup(t.registerListboxId(r.id))),createComponent(ListboxRoot,mergeProps({ref(i){var a=mergeRefs(t.setListboxRef,r.ref);typeof a=="function"&&a(i)},get id(){return r.id},get state(){return t.listState()},get virtualized(){return t.isVirtualized()},get autoFocus(){return t.autoFocus()},shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,get shouldFocusWrap(){return t.shouldFocusWrap()},get disallowTypeAhead(){return t.disallowTypeAhead()},get"aria-labelledby"(){return t.listboxAriaLabelledBy()},get renderItem(){return t.renderItem},get renderSection(){return t.renderSection},onKeyDown:i=>{callHandler(i,r.onKeyDown),i.key==="Escape"&&i.preventDefault()}},o))}function SelectPortal(e){const t=useSelectContext();return createComponent(Show,{get when(){return t.contentPresent()},get children(){return createComponent(Portal,e)}})}function SelectBase(e){const t=`select-${createUniqueId()}`,n=mergeDefaultProps({id:t,selectionMode:"single",disallowEmptySelection:!1,closeOnSelection:e.selectionMode==="single",allowDuplicateSelectionEvents:!0,gutter:8,sameWidth:!0,modal:!1},e),[r,o,s,i]=splitProps(n,["itemComponent","sectionComponent","open","defaultOpen","onOpenChange","value","defaultValue","onChange","placeholder","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","keyboardDelegate","allowDuplicateSelectionEvents","disallowEmptySelection","closeOnSelection","disallowTypeAhead","shouldFocusWrap","selectionBehavior","selectionMode","virtualized","modal","preventScroll","forceMount"],["getAnchorRect","placement","gutter","shift","flip","slide","overlap","sameWidth","fitViewport","hideWhenDetached","detachedPadding","arrowPadding","overflowPadding"],FORM_CONTROL_PROP_NAMES),[a,l]=createSignal(),[c,u]=createSignal(),[d,h]=createSignal(),[p,f]=createSignal(),[y,m]=createSignal(),[b,g]=createSignal(),[w,S]=createSignal(),[x,v]=createSignal(!0),_=T=>{const F=r.optionValue;return F==null?String(T):String(isFunction(F)?F(T):T[F])},C=createMemo(()=>{const T=r.optionGroupChildren;return T==null?r.options:r.options.flatMap(F=>F[T]??F)}),P=createMemo(()=>C().map(T=>_(T))),E=T=>[...T].map(F=>C().find(j=>_(j)===F)).filter(F=>F!=null),$=createDisclosureState({open:()=>r.open,defaultOpen:()=>r.defaultOpen,onOpenChange:T=>r.onOpenChange?.(T)}),A=createListState({selectedKeys:()=>r.value!=null?r.value.map(_):r.value,defaultSelectedKeys:()=>r.defaultValue!=null?r.defaultValue.map(_):r.defaultValue,onSelectionChange:T=>{r.onChange?.(E(T)),r.closeOnSelection&&O()},allowDuplicateSelectionEvents:()=>access$1(r.allowDuplicateSelectionEvents),disallowEmptySelection:()=>access$1(r.disallowEmptySelection),selectionBehavior:()=>access$1(r.selectionBehavior),selectionMode:()=>r.selectionMode,dataSource:()=>r.options??[],getKey:()=>r.optionValue,getTextValue:()=>r.optionTextValue,getDisabled:()=>r.optionDisabled,getSectionChildren:()=>r.optionGroupChildren}),k=createMemo(()=>E(A.selectionManager().selectedKeys())),R=T=>{A.selectionManager().toggleSelection(_(T))},{present:D}=src_default({show:()=>r.forceMount||$.isOpen(),element:()=>y()??null}),L=()=>{const T=b();T&&focusWithoutScrolling(T)},N=T=>{if(r.options.length<=0)return;v(T),$.open();let F=A.selectionManager().firstSelectedKey();F==null&&(T==="first"?F=A.collection().getFirstKey():T==="last"&&(F=A.collection().getLastKey())),L(),A.selectionManager().setFocused(!0),A.selectionManager().setFocusedKey(F)},O=()=>{$.close(),A.selectionManager().setFocused(!1),A.selectionManager().setFocusedKey(void 0)},I=T=>{$.isOpen()?O():N(T)},{formControlContext:M}=createFormControl(s);createFormResetListener(p,()=>{const T=r.defaultValue?[...r.defaultValue].map(_):new Selection;A.selectionManager().setSelectedKeys(T)});const B=createCollator({usage:"search",sensitivity:"base"}),K=createMemo(()=>{const T=access$1(r.keyboardDelegate);return T||new ListKeyboardDelegate(A.collection,void 0,B)}),U=T=>r.itemComponent?.({item:T}),H=T=>r.sectionComponent?.({section:T});createEffect(on([P],([T])=>{const j=[...A.selectionManager().selectedKeys()].filter(W=>T.includes(W));A.selectionManager().setSelectedKeys(j)},{defer:!0}));const V=createMemo(()=>({"data-expanded":$.isOpen()?"":void 0,"data-closed":$.isOpen()?void 0:""})),q={dataset:V,isOpen:$.isOpen,isDisabled:()=>M.isDisabled()??!1,isMultiple:()=>access$1(r.selectionMode)==="multiple",isVirtualized:()=>r.virtualized??!1,isModal:()=>r.modal??!1,preventScroll:()=>r.preventScroll??q.isModal(),disallowTypeAhead:()=>r.disallowTypeAhead??!1,shouldFocusWrap:()=>r.shouldFocusWrap??!1,selectedOptions:k,contentPresent:D,autoFocus:x,triggerRef:p,listState:()=>A,keyboardDelegate:K,triggerId:a,valueId:c,listboxId:d,listboxAriaLabelledBy:w,setListboxAriaLabelledBy:S,setTriggerRef:f,setContentRef:m,setListboxRef:g,open:N,close:O,toggle:I,placeholder:()=>r.placeholder,renderItem:U,renderSection:H,removeOptionFromSelection:R,generateId:createGenerateId(()=>access$1(s.id)),registerTriggerId:createRegisterId(l),registerValueId:createRegisterId(u),registerListboxId:createRegisterId(h)};return createComponent(FormControlContext.Provider,{value:M,get children(){return createComponent(SelectContext.Provider,{value:q,get children(){return createComponent(Popper,mergeProps({anchorRef:p,contentRef:y},o,{get children(){return createComponent(Polymorphic,mergeProps({as:"div",role:"group",get id(){return access$1(s.id)}},()=>M.dataset(),V,i))}}))}})}})}function SelectRoot(e){const[t,n]=splitProps(e,["value","defaultValue","onChange","multiple"]),r=createMemo(()=>t.value!=null?t.multiple?t.value:[t.value]:t.value),o=createMemo(()=>t.defaultValue!=null?t.multiple?t.defaultValue:[t.defaultValue]:t.defaultValue);return createComponent(SelectBase,mergeProps({get value(){return r()},get defaultValue(){return o()},onChange:i=>{t.multiple?t.onChange?.(i??[]):t.onChange?.(i[0]??null)},get selectionMode(){return t.multiple?"multiple":"single"}},n))}function SelectTrigger(e){const t=useFormControlContext(),n=useSelectContext(),r=mergeDefaultProps({id:n.generateId("trigger")},e),[o,s,i]=splitProps(r,["ref","disabled","onPointerDown","onClick","onKeyDown","onFocus","onBlur"],FORM_CONTROL_FIELD_PROP_NAMES),a=()=>n.listState().selectionManager(),l=()=>n.keyboardDelegate(),c=()=>o.disabled||n.isDisabled(),{fieldProps:u}=createFormControlField(s),{typeSelectHandlers:d}=createTypeSelect({keyboardDelegate:l,selectionManager:a,onTypeSelect:g=>a().select(g)}),h=()=>[n.listboxAriaLabelledBy(),n.valueId()].filter(Boolean).join(" ")||void 0,p=g=>{callHandler(g,o.onPointerDown),g.currentTarget.dataset.pointerType=g.pointerType,!c()&&g.pointerType!=="touch"&&g.button===0&&(g.preventDefault(),n.toggle(!0))},f=g=>{callHandler(g,o.onClick),!c()&&g.currentTarget.dataset.pointerType==="touch"&&n.toggle(!0)},y=g=>{if(callHandler(g,o.onKeyDown),!c())switch(callHandler(g,d.onKeyDown),g.key){case"Enter":case" ":case"ArrowDown":g.stopPropagation(),g.preventDefault(),n.toggle("first");break;case"ArrowUp":g.stopPropagation(),g.preventDefault(),n.toggle("last");break;case"ArrowLeft":{if(g.preventDefault(),n.isMultiple())return;const w=a().firstSelectedKey(),S=w!=null?l().getKeyAbove?.(w):l().getFirstKey?.();S!=null&&a().select(S);break}case"ArrowRight":{if(g.preventDefault(),n.isMultiple())return;const w=a().firstSelectedKey(),S=w!=null?l().getKeyBelow?.(w):l().getFirstKey?.();S!=null&&a().select(S);break}}},m=g=>{callHandler(g,o.onFocus),!a().isFocused()&&a().setFocused(!0)},b=g=>{callHandler(g,o.onBlur),!n.isOpen()&&a().setFocused(!1)};return createEffect(()=>onCleanup(n.registerTriggerId(u.id()))),createEffect(()=>{n.setListboxAriaLabelledBy([u.ariaLabelledBy(),u.ariaLabel()&&!u.ariaLabelledBy()?u.id():null].filter(Boolean).join(" ")||void 0)}),createComponent(ButtonRoot,mergeProps({ref(g){var w=mergeRefs(n.setTriggerRef,o.ref);typeof w=="function"&&w(g)},get id(){return u.id()},get disabled(){return c()},"aria-haspopup":"listbox",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return createMemo(()=>!!n.isOpen())()?n.listboxId():void 0},get"aria-label"(){return u.ariaLabel()},get"aria-labelledby"(){return h()},get"aria-describedby"(){return u.ariaDescribedBy()},onPointerDown:p,onClick:f,onKeyDown:y,onFocus:m,onBlur:b},()=>n.dataset(),()=>t.dataset(),i))}function SelectValue(e){const t=useFormControlContext(),n=useSelectContext(),r=mergeDefaultProps({id:n.generateId("value")},e),[o,s]=splitProps(r,["id","children"]),i=()=>n.listState().selectionManager(),a=()=>{const l=i().selectedKeys();return l.size===1&&l.has("")?!0:i().isEmpty()};return createEffect(()=>onCleanup(n.registerValueId(o.id))),createComponent(Polymorphic,mergeProps({as:"span",get id(){return o.id},get"data-placeholder-shown"(){return a()?"":void 0}},()=>t.dataset(),s,{get children(){return createComponent(Show,{get when(){return!a()},get fallback(){return n.placeholder()},get children(){return createComponent(SelectValueChild,{state:{selectedOption:()=>n.selectedOptions()[0],selectedOptions:()=>n.selectedOptions(),remove:l=>n.removeOptionFromSelection(l),clear:()=>i().clearSelection()},get children(){return o.children}})}})}}))}function SelectValueChild(e){const t=children(()=>{const n=e.children;return isFunction(n)?n(e.state):n});return createMemo(t)}var Select=Object.assign(SelectRoot,{Arrow:PopperArrow,Content:SelectContent,Description:FormControlDescription,ErrorMessage:FormControlErrorMessage,HiddenSelect:SelectHiddenSelect,Icon:SelectIcon,Item:ListboxItem,ItemDescription:ListboxItemDescription,ItemIndicator:ListboxItemIndicator,ItemLabel:ListboxItemLabel,Label:SelectLabel,Listbox:SelectListbox,Portal:SelectPortal,Section:ListboxSection,Trigger:SelectTrigger,Value:SelectValue});class GroupWrapper{name;group;disabled=!1;id;constructor(t,n){this.group=t,this.name=t.name,this.id=n}}const collapsible="",carCollapsible="_carCollapsible_uv09n_1",ownerPicker="_ownerPicker_uv09n_8",ownerPickerContent="_ownerPickerContent_uv09n_15",optionList="_optionList_uv09n_20",selectItem="_selectItem_uv09n_26",styles$2={carCollapsible,ownerPicker,ownerPickerContent,optionList,selectItem};var SPIN_BUTTON_INTL_TRANSLATIONS={empty:"Empty"};function SpinButtonRoot(e){const t=mergeDefaultProps({translations:SPIN_BUTTON_INTL_TRANSLATIONS},e),[n,r]=splitProps(t,["translations","value","textValue","minValue","maxValue","validationState","onIncrement","onIncrementPage","onDecrement","onDecrementPage","onDecrementToMin","onIncrementToMax","onKeyDown","onFocus","onBlur"]);let o=!1;const s=createMemo(()=>n.textValue===""?n.translations?.empty:(n.textValue||`${n.value}`).replace("-","−")),i=c=>{if(callHandler(c,n.onKeyDown),!(c.ctrlKey||c.metaKey||c.shiftKey||c.altKey||e.readOnly))switch(c.key){case"PageUp":if(n.onIncrementPage){c.preventDefault(),n.onIncrementPage();break}case"ArrowUp":case"Up":n.onIncrement&&(c.preventDefault(),n.onIncrement());break;case"PageDown":if(n.onDecrementPage){c.preventDefault(),n.onDecrementPage();break}case"ArrowDown":case"Down":n.onDecrement&&(c.preventDefault(),n.onDecrement());break;case"Home":n.onDecrementToMin&&(c.preventDefault(),n.onDecrementToMin());break;case"End":n.onIncrementToMax&&(c.preventDefault(),n.onIncrementToMax());break}},a=c=>{callHandler(c,n.onFocus),o=!0},l=c=>{callHandler(c,n.onBlur),o=!1};return createEffect(on(s,c=>{o&&(clearAnnouncer("assertive"),announce(c??"","assertive"))})),createComponent(Polymorphic,mergeProps({as:"div",role:"spinbutton",get"aria-valuenow"(){return n.value!=null&&!Number.isNaN(n.value)?n.value:void 0},get"aria-valuetext"(){return s()},get"aria-valuemin"(){return n.minValue},get"aria-valuemax"(){return n.maxValue},get"aria-required"(){return e.required||void 0},get"aria-disabled"(){return e.disabled||void 0},get"aria-readonly"(){return e.readOnly||void 0},get"aria-invalid"(){return n.validationState==="invalid"||void 0},onKeyDown:i,onFocus:a,onBlur:l},r))}var _tmpl$$4=template("<div aria-hidden=true><input type=text tabindex=-1>"),number_field_exports={};__export(number_field_exports,{DecrementTrigger:()=>NumberFieldDecrementTrigger,Description:()=>FormControlDescription,ErrorMessage:()=>FormControlErrorMessage,HiddenInput:()=>NumberFieldHiddenInput,IncrementTrigger:()=>NumberFieldIncrementTrigger,Input:()=>NumberFieldInput,Label:()=>FormControlLabel,NumberField:()=>NumberField,Root:()=>NumberFieldRoot});var NumberFieldContext=createContext();function useNumberFieldContext(){const e=useContext(NumberFieldContext);if(e===void 0)throw new Error("[kobalte]: `useNumberFieldContext` must be used within a `NumberField` component");return e}function NumberFieldVaryTrigger(e){const t=useFormControlContext(),n=useNumberFieldContext(),[r,o]=splitProps(e,["numberFieldVaryType","onClick"]);return createComponent(ButtonRoot,mergeProps({tabIndex:-1,get disabled(){return t.isDisabled()||n.rawValue()===(r.numberFieldVaryType==="increment"?n.maxValue():n.minValue())},get"aria-controls"(){return t.fieldId()},onClick:s=>{callHandler(s,r.onClick),n.varyValue(n.step()*(r.numberFieldVaryType==="increment"?1:-1)),n.inputRef()?.focus()}},o))}function NumberFieldDecrementTrigger(e){return createComponent(NumberFieldVaryTrigger,mergeProps({numberFieldVaryType:"decrement"},e))}function NumberFieldHiddenInput(e){const t=useNumberFieldContext(),[n,r]=splitProps(e,["ref","onChange"]),o=useFormControlContext();return(()=>{var s=_tmpl$$4(),i=s.firstChild;i.addEventListener("change",l=>{callHandler(l,n.onChange),batch(()=>{t.setValue(l.target.value),t.format()})});var a=mergeRefs(t.setHiddenInputRef,n.ref);return typeof a=="function"&&use(a,i),i.style.setProperty("font-size","16px"),spread$1(i,mergeProps({get name(){return o.name()},get value(){return createMemo(()=>!!Number.isNaN(t.rawValue()))()?"":t.rawValue()},get required(){return o.isRequired()},get disabled(){return o.isDisabled()},get readOnly(){return o.isReadOnly()}},r),!1,!1),createRenderEffect(l=>style$1(s,visuallyHiddenStyles,l)),s})()}function NumberFieldIncrementTrigger(e){return createComponent(NumberFieldVaryTrigger,mergeProps({numberFieldVaryType:"increment"},e))}function NumberFieldInput(e){const t=useFormControlContext(),n=useNumberFieldContext(),r=mergeDefaultProps({id:n.generateId("input"),inputMode:"decimal",autocomplete:"off",autocorrect:"off",spellcheck:!1},e),[o,s,i]=splitProps(r,["ref","onInput","onChange","onWheel","as"],FORM_CONTROL_FIELD_PROP_NAMES),{fieldProps:a}=createFormControlField(s);return createComponent(SpinButtonRoot,mergeProps({type:"text",get id(){return a.id()},ref(l){var c=mergeRefs(n.setInputRef,o.ref);typeof c=="function"&&c(l)},get value(){return n.value()},get validationState(){return t.validationState()},get required(){return t.isRequired()},get disabled(){return t.isDisabled()},get readOnly(){return t.isReadOnly()},get textValue(){return n.textValue()},get minValue(){return n.minValue()},get maxValue(){return n.maxValue()},onIncrement:()=>{n.varyValue(n.step())},onIncrementPage:()=>{n.varyValue(n.largeStep())},onIncrementToMax:()=>{n.setValue(n.maxValue()),n.format()},onDecrement:()=>{n.varyValue(-n.step())},onDecrementPage:()=>{n.varyValue(-n.largeStep())},onDecrementToMin:()=>{n.setValue(n.minValue()),n.format()},get translations(){return n.translations()},onChange:l=>{callHandler(l,o.onChange),n.format()},onWheel:l=>{callHandler(l,o.onWheel),!(!n.changeOnWheel()||document.activeElement!==n.inputRef())&&(l.preventDefault(),l.deltaY<0?n.varyValue(n.step()):n.varyValue(-n.step()))},get onInput(){return composeEventHandlers([o.onInput,n.onInput])},get"aria-label"(){return a.ariaLabel()},get"aria-labelledby"(){return a.ariaLabelledBy()},get"aria-describedby"(){return a.ariaDescribedBy()}},()=>t.dataset(),{as:l=>createComponent(Polymorphic,mergeProps({get as(){return o.as||"input"},get value(){return createMemo(()=>!!(Number.isNaN(n.rawValue())||n.value()===void 0))()?"":n.formatNumber(n.rawValue())},get required(){return t.isRequired()},get disabled(){return t.isDisabled()},get readOnly(){return t.isReadOnly()}},l,i))}))}function NumberFieldRoot(e){let t;const n=`NumberField-${createUniqueId()}`,r=mergeDefaultProps({id:n,format:!0,minValue:Number.MIN_SAFE_INTEGER,maxValue:Number.MAX_SAFE_INTEGER,step:1,changeOnWheel:!0},e),[o,s,i]=splitProps(r,["ref","value","defaultValue","onChange","rawValue","onRawValueChange","translations","format","formatOptions","textValue","minValue","maxValue","step","largeStep","changeOnWheel","translations","allowedInput"],FORM_CONTROL_PROP_NAMES),{locale:a}=useLocale(),l=createMemo(()=>new $6c7bd7858deea686$export$cd11ab140839f11d(a(),o.formatOptions)),c=createMemo(()=>new $488c6ddbf4ef74c2$export$cc77c4ff7e8673c5(a(),o.formatOptions)),u=_=>o.format?c().format(_):_.toString(),d=_=>o.format&&typeof _!="number"?l().parse(_??""):Number(_??""),h=_=>o.format&&typeof _!="number"?l().isValidPartialNumber(_??"",r.minValue,r.maxValue):!Number.isNaN(Number(_)),[p,f]=createControllableSignal({value:()=>o.value,defaultValue:()=>o.defaultValue??o.rawValue,onChange:_=>{o.onChange?.(typeof _=="number"?u(_):_),o.onRawValueChange?.(d(_))}});p()!==void 0&&o.onRawValueChange?.(d(p()));function y(_){return o.allowedInput!==void 0?o.allowedInput.test(_):!0}const{formControlContext:m}=createFormControl(s);createFormResetListener(()=>t,()=>{f(o.defaultValue??"")});const[b,g]=createSignal(),[w,S]=createSignal(),x=_=>{if(m.isReadOnly()||m.isDisabled())return;const C=_.target;let P=C.selectionStart;h(C.value)?(_.inputType!=="insertText"||y(_.data||""))&&f(C.value):_.inputType==="deleteContentBackward"&&P!==null&&(P+=1);const E=p();E!==C.value&&(C.value=String(E??""),P!==null&&(C.selectionStart=P,C.selectionEnd=P))},v={value:p,setValue:f,rawValue:()=>d(p()),generateId:createGenerateId(()=>access$1(s.id)),formatNumber:u,format:()=>{if(!o.format)return;let _=v.rawValue();if(Number.isNaN(_)){w()&&(w().value=""),o.onRawValueChange?.(_);return}v.minValue()&&(_=Math.max(_,v.minValue())),v.maxValue()&&(_=Math.min(_,v.maxValue()));const C=v.formatNumber(_);p()!=C&&f(C),b()&&(b().value=C),w()&&(w().value=String(_))},onInput:x,textValue:()=>o.textValue,minValue:()=>o.minValue,maxValue:()=>o.maxValue,step:()=>o.step,largeStep:()=>o.largeStep??o.step*10,changeOnWheel:()=>o.changeOnWheel,translations:()=>o.translations,inputRef:b,setInputRef:g,hiddenInputRef:w,setHiddenInputRef:S,varyValue:_=>{let C=v.rawValue()??0;Number.isNaN(C)&&(C=0),batch(()=>{let P=C;const E=_>0?"+":"-",$=Math.abs(_),A=e.minValue===void 0?Number.NaN:v.minValue(),k=e.maxValue===void 0?Number.NaN:v.maxValue();P=snapValueToStep(C,A,k,$),E==="+"&&P>C||E==="-"&&P<C||(P=snapValueToStep(handleDecimalOperation(E,C,$),A,k,$)),v.setValue(P),v.format()})}};return createEffect(on(()=>o.rawValue,_=>{if(_!==v.rawValue()){if(Number.isNaN(_))return;batch(()=>{f(_??""),v.format()})}},{defer:!0})),createComponent(FormControlContext.Provider,{value:m,get children(){return createComponent(NumberFieldContext.Provider,{value:v,get children(){return createComponent(Polymorphic,mergeProps({as:"div",ref(_){var C=mergeRefs(P=>t=P,o.ref);typeof C=="function"&&C(_)},role:"group",get id(){return access$1(s.id)}},()=>m.dataset(),i))}})}})}function handleDecimalOperation(e,t,n){let r=e==="+"?t+n:t-n;if(Number.isFinite(t)&&Number.isFinite(n)&&(n%1!==0||t%1!==0)){const o=getPrecision(n),s=getPrecision(t),i=10**Math.max(o,s),a=Math.round(n*i),l=Math.round(t*i);r=(e==="+"?l+a:l-a)/i}return r}var NumberField=Object.assign(NumberFieldRoot,{Description:FormControlDescription,ErrorMessage:FormControlErrorMessage,HiddenInput:NumberFieldHiddenInput,Input:NumberFieldInput,IncrementTrigger:NumberFieldIncrementTrigger,DecrementTrigger:NumberFieldDecrementTrigger,Label:FormControlLabel});const numField="_numField_py3rq_1",inputLabel="_inputLabel_py3rq_8",groupSizePicker="_groupSizePicker_py3rq_12",groupSizeInput="_groupSizeInput_py3rq_16",styles$1={numField,inputLabel,groupSizePicker,groupSizeInput};var _tmpl$$3=template("<div>");function CountPicker({onChange:e,defaultValue:t,className:n,label:r}){return createComponent(NumberField,{rawValue:t,onRawValueChange:e,get class(){return[styles$1.numField,n].join(" ")},minValue:0,get children(){return[createComponent(NumberField.Label,{class:"inputLabel",children:r}),(()=>{var o=_tmpl$$3();return insert(o,createComponent(NumberField.Input,{get class(){return[styles$1.groupSizeInput,styles$1.input,"input"].join(" ")}}),null),insert(o,createComponent(NumberField.IncrementTrigger,{class:"button",children:"+"}),null),insert(o,createComponent(NumberField.DecrementTrigger,{class:"button",children:"-"}),null),createRenderEffect(()=>className(o,styles$1.groupSizePicker)),o})()]}})}var DomCollectionContext=createContext();function useOptionalDomCollectionContext(){return useContext(DomCollectionContext)}function useDomCollectionContext(){const e=useOptionalDomCollectionContext();if(e===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return e}function isElementPreceding(e,t){return!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function findDOMIndex(e,t){const n=t.ref();if(!n)return-1;let r=e.length;if(!r)return-1;for(;r--;){const o=e[r]?.ref();if(o&&isElementPreceding(o,n))return r+1}return 0}function sortBasedOnDOMPosition(e){const t=e.map((r,o)=>[o,r]);let n=!1;return t.sort(([r,o],[s,i])=>{const a=o.ref(),l=i.ref();return a===l||!a||!l?0:isElementPreceding(a,l)?(r>s&&(n=!0),-1):(r<s&&(n=!0),1)}),n?t.map(([r,o])=>o):e}function setItemsBasedOnDOMPosition(e,t){const n=sortBasedOnDOMPosition(e);e!==n&&t(n)}function getCommonParent(e){const t=e[0],n=e[e.length-1]?.ref();let r=t?.ref()?.parentElement;for(;r;){if(n&&r.contains(n))return r;r=r.parentElement}return getDocument(r).body}function createTimeoutObserver(e,t){createEffect(()=>{const n=setTimeout(()=>{setItemsBasedOnDOMPosition(e(),t)});onCleanup(()=>clearTimeout(n))})}function createSortBasedOnDOMPosition(e,t){if(typeof IntersectionObserver!="function"){createTimeoutObserver(e,t);return}let n=[];createEffect(()=>{const r=()=>{const i=!!n.length;n=e(),i&&setItemsBasedOnDOMPosition(e(),t)},o=getCommonParent(e()),s=new IntersectionObserver(r,{root:o});for(const i of e()){const a=i.ref();a&&s.observe(a)}onCleanup(()=>s.disconnect())})}function createDomCollection(e={}){const[t,n]=createControllableArraySignal({value:()=>access$1(e.items),onChange:s=>e.onItemsChange?.(s)});createSortBasedOnDOMPosition(t,n);const r=s=>(n(i=>{const a=findDOMIndex(i,s);return addItemToArray(i,s,a)}),()=>{n(i=>{const a=i.filter(l=>l.ref()!==s.ref());return i.length===a.length?i:a})});return{DomCollectionProvider:s=>createComponent(DomCollectionContext.Provider,{value:{registerItem:r},get children(){return s.children}})}}function createDomCollectionItem(e){const t=useDomCollectionContext(),n=mergeDefaultProps({shouldRegisterItem:!0},e);createEffect(()=>{if(!n.shouldRegisterItem)return;const r=t.registerItem(n.getItem());onCleanup(r)})}var collapsible_exports={};__export(collapsible_exports,{Collapsible:()=>Collapsible,Content:()=>CollapsibleContent,Root:()=>CollapsibleRoot,Trigger:()=>CollapsibleTrigger});var CollapsibleContext=createContext();function useCollapsibleContext(){const e=useContext(CollapsibleContext);if(e===void 0)throw new Error("[kobalte]: `useCollapsibleContext` must be used within a `Collapsible.Root` component");return e}function CollapsibleContent(e){const[t,n]=createSignal(),r=useCollapsibleContext(),o=mergeDefaultProps({id:r.generateId("content")},e),[s,i]=splitProps(o,["ref","id","style"]),{present:a}=src_default({show:r.shouldMount,element:()=>t()??null}),[l,c]=createSignal(0),[u,d]=createSignal(0);let p=(()=>r.isOpen()||a())(),f;return onMount(()=>{const y=requestAnimationFrame(()=>{p=!1});onCleanup(()=>{cancelAnimationFrame(y)})}),createEffect(on(a,()=>{if(!t())return;f=f||{transitionDuration:t().style.transitionDuration,animationName:t().style.animationName},t().style.transitionDuration="0s",t().style.animationName="none";const y=t().getBoundingClientRect();c(y.height),d(y.width),p||(t().style.transitionDuration=f.transitionDuration,t().style.animationName=f.animationName)})),createEffect(()=>onCleanup(r.registerContentId(s.id))),createComponent(Show,{get when(){return a()},get children(){return createComponent(Polymorphic,mergeProps({as:"div",ref(y){var m=mergeRefs(n,s.ref);typeof m=="function"&&m(y)},get id(){return s.id},get style(){return combineStyle({"--kb-collapsible-content-height":l()?`${l()}px`:void 0,"--kb-collapsible-content-width":u()?`${u()}px`:void 0},s.style)}},()=>r.dataset(),i))}})}function CollapsibleRoot(e){const t=`collapsible-${createUniqueId()}`,n=mergeDefaultProps({id:t},e),[r,o]=splitProps(n,["open","defaultOpen","onOpenChange","disabled","forceMount"]),[s,i]=createSignal(),a=createDisclosureState({open:()=>r.open,defaultOpen:()=>r.defaultOpen,onOpenChange:u=>r.onOpenChange?.(u)}),l=createMemo(()=>({"data-expanded":a.isOpen()?"":void 0,"data-closed":a.isOpen()?void 0:"","data-disabled":r.disabled?"":void 0})),c={dataset:l,isOpen:a.isOpen,disabled:()=>r.disabled??!1,shouldMount:()=>r.forceMount||a.isOpen(),contentId:s,toggle:a.toggle,generateId:createGenerateId(()=>o.id),registerContentId:createRegisterId(i)};return createComponent(CollapsibleContext.Provider,{value:c,get children(){return createComponent(Polymorphic,mergeProps({as:"div"},l,o))}})}function CollapsibleTrigger(e){const t=useCollapsibleContext(),[n,r]=splitProps(e,["onClick"]);return createComponent(ButtonRoot,mergeProps({get"aria-expanded"(){return t.isOpen()},get"aria-controls"(){return createMemo(()=>!!t.isOpen())()?t.contentId():void 0},get disabled(){return t.disabled()},onClick:s=>{callHandler(s,n.onClick),t.toggle()}},()=>t.dataset(),r))}var Collapsible=Object.assign(CollapsibleRoot,{Content:CollapsibleContent,Trigger:CollapsibleTrigger}),accordion_exports={};__export(accordion_exports,{Accordion:()=>Accordion,Content:()=>AccordionContent,Header:()=>AccordionHeader,Item:()=>AccordionItem,Root:()=>AccordionRoot,Trigger:()=>AccordionTrigger});var AccordionItemContext=createContext();function useAccordionItemContext(){const e=useContext(AccordionItemContext);if(e===void 0)throw new Error("[kobalte]: `useAccordionItemContext` must be used within a `Accordion.Item` component");return e}function AccordionContent(e){const t=useAccordionItemContext(),n=t.generateId("content"),r=mergeDefaultProps({id:n},e),[o,s]=splitProps(r,["id","style"]);return createEffect(()=>onCleanup(t.registerContentId(o.id))),createComponent(CollapsibleContent,mergeProps({role:"region",get"aria-labelledby"(){return t.triggerId()},get style(){return combineStyle({"--kb-accordion-content-height":"var(--kb-collapsible-content-height)","--kb-accordion-content-width":"var(--kb-collapsible-content-width)"},o.style)}},s))}function AccordionHeader(e){const t=useCollapsibleContext();return createComponent(Polymorphic,mergeProps({as:"h3"},()=>t.dataset(),e))}var AccordionContext=createContext();function useAccordionContext(){const e=useContext(AccordionContext);if(e===void 0)throw new Error("[kobalte]: `useAccordionContext` must be used within a `Accordion.Root` component");return e}function AccordionItem(e){const t=useAccordionContext(),n=`${t.generateId("item")}-${createUniqueId()}`,r=mergeDefaultProps({id:n},e),[o,s]=splitProps(r,["value","disabled"]),[i,a]=createSignal(),[l,c]=createSignal(),u=()=>t.listState().selectionManager(),d=()=>u().isSelected(o.value),h={value:()=>o.value,triggerId:i,contentId:l,generateId:createGenerateId(()=>s.id),registerTriggerId:createRegisterId(a),registerContentId:createRegisterId(c)};return createComponent(AccordionItemContext.Provider,{value:h,get children(){return createComponent(CollapsibleRoot,mergeProps({get open(){return d()},get disabled(){return o.disabled}},s))}})}function AccordionRoot(e){let t;const n=`accordion-${createUniqueId()}`,r=mergeDefaultProps({id:n,multiple:!1,collapsible:!1,shouldFocusWrap:!0},e),[o,s]=splitProps(r,["id","ref","value","defaultValue","onChange","multiple","collapsible","shouldFocusWrap","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),[i,a]=createSignal([]),{DomCollectionProvider:l}=createDomCollection({items:i,onItemsChange:a}),c=createListState({selectedKeys:()=>o.value,defaultSelectedKeys:()=>o.defaultValue,onSelectionChange:h=>o.onChange?.(Array.from(h)),disallowEmptySelection:()=>!o.multiple&&!o.collapsible,selectionMode:()=>o.multiple?"multiple":"single",dataSource:i}),u=createSelectableList({selectionManager:()=>c.selectionManager(),collection:()=>c.collection(),disallowEmptySelection:()=>c.selectionManager().disallowEmptySelection(),shouldFocusWrap:()=>o.shouldFocusWrap,disallowTypeAhead:!0,allowsTabNavigation:!0},()=>t),d={listState:()=>c,generateId:createGenerateId(()=>o.id)};return createComponent(l,{get children(){return createComponent(AccordionContext.Provider,{value:d,get children(){return createComponent(Polymorphic,mergeProps({as:"div",get id(){return o.id},ref(h){var p=mergeRefs(f=>t=f,o.ref);typeof p=="function"&&p(h)},get onKeyDown(){return composeEventHandlers([o.onKeyDown,u.onKeyDown])},get onMouseDown(){return composeEventHandlers([o.onMouseDown,u.onMouseDown])},get onFocusIn(){return composeEventHandlers([o.onFocusIn,u.onFocusIn])},get onFocusOut(){return composeEventHandlers([o.onFocusOut,u.onFocusOut])}},s))}})}})}function AccordionTrigger(e){let t;const n=useAccordionContext(),r=useAccordionItemContext(),o=useCollapsibleContext(),s=r.generateId("trigger"),i=mergeDefaultProps({id:s},e),[a,l]=splitProps(i,["ref","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]);createDomCollectionItem({getItem:()=>({ref:()=>t,type:"item",key:r.value(),textValue:"",disabled:o.disabled()})});const c=createSelectableItem({key:()=>r.value(),selectionManager:()=>n.listState().selectionManager(),disabled:()=>o.disabled(),shouldSelectOnPressUp:!0},()=>t),u=d=>{["Enter"," "].includes(d.key)&&d.preventDefault(),callHandler(d,a.onKeyDown),callHandler(d,c.onKeyDown)};return createEffect(()=>onCleanup(r.registerTriggerId(l.id))),createComponent(CollapsibleTrigger,mergeProps({ref(d){var h=mergeRefs(p=>t=p,a.ref);typeof h=="function"&&h(d)},get"data-key"(){return c.dataKey()},get onPointerDown(){return composeEventHandlers([a.onPointerDown,c.onPointerDown])},get onPointerUp(){return composeEventHandlers([a.onPointerUp,c.onPointerUp])},get onClick(){return composeEventHandlers([a.onClick,c.onClick])},onKeyDown:u,get onMouseDown(){return composeEventHandlers([a.onMouseDown,c.onMouseDown])},get onFocus(){return composeEventHandlers([a.onFocus,c.onFocus])}},l))}var Accordion=Object.assign(AccordionRoot,{Content:AccordionContent,Header:AccordionHeader,Item:AccordionItem,Trigger:AccordionTrigger});function CarCollapsible({existingData:e,availableGroups:t,key:n,onChange:r,onRemove:o}){const[s,i]=createSignal(),[a,l]=createSignal(Car.defaultSeats);e!==void 0&&(i(e.StartsWith),l(e.Seats));const c=t.map((f,y)=>new GroupWrapper(f,y));function u(){const f=s();if(f!==void 0)return new Car(n(),f,a())}function d(f){i(f||void 0),r(u())}function h(f){l(f),r(u())}function p(){const f=s();if(f!==void 0)return c.find(y=>y.group.id===f.id)}return createComponent(Accordion.Item,{class:"collapsibleContainer",get value(){return n().toString()},get children(){return[createComponent(Accordion.Header,{class:"header",get children(){return createComponent(Accordion.Trigger,{class:"trigger",get children(){return s()?.name||"New car"}})}}),createComponent(Accordion.Content,{get class(){return[styles$2.carCollapsible,"collapsible"].join(" ")},get children(){return[createComponent(Select,{get class(){return styles$2.ownerPicker},options:c,optionTextValue:"name",optionDisabled:"disabled",optionValue:"id",get defaultValue(){return p()},placeholder:"Who does the car start with?",onChange:f=>d(f?.group||null),itemComponent:f=>createComponent(Select.Item,{get item(){return f.item},get class(){return styles$2.selectItem},get children(){return createComponent(Select.ItemLabel,{get children(){return f.item.rawValue.name}})}}),get children(){return[createComponent(Select.Label,{class:"inputLabel",children:"Car Owner"}),createComponent(Select.Trigger,{class:"input",get children(){return[createComponent(Select.Value,{children:f=>f.selectedOption().name}),createComponent(Select.Arrow,{})]}}),createComponent(Select.Portal,{get children(){return createComponent(Select.Content,{get class(){return styles$2.ownerPickerContent},get children(){return createComponent(Select.Listbox,{get class(){return styles$2.optionList}})}})}})]}}),createComponent(CountPicker,{get defaultValue(){return Car.defaultSeats},onChange:h,label:"Available Seats"}),createComponent(Button,{class:"button",onClick:o,children:"Remove Car"})]}})]}})}const listPage="_listPage_1ng5m_1",list="_list_1ng5m_1",backButton="_backButton_1ng5m_14",submitButton="_submitButton_1ng5m_18",styles={listPage,list,backButton,submitButton};var _tmpl$$2=template("<div><button>Back"),_tmpl$2$1=template("<button>");function ListAccordion({onSubmit:e,onBack:t,ListElements:n,addText:r,existingData:o}){const[i,a]=createSignal(o),[l,c]=createSignal(-1);function u(){return l()===-1||i()[l()]!==void 0}function d(){throw new Error("The current item is not valid")}function h(){u()||d(),a([...i(),void 0]),c(i().length-1)}function p(m){i().splice(m,1),a([...i()]),c(-1)}function f(){if(e===void 0)throw new Error("there is no way to submit that data");if(i().length<1)throw new Error("You need at least one item");const m=i().findIndex(b=>b===void 0);if(m!==-1)throw new Error(`At least one is not finished: ${m}`);e(i().filter(b=>b!==void 0))}function y(m){u()||d();const b=m.length>0?parseInt(m[0]):-1;c(b)}return i().length===0&&h(),(()=>{var m=_tmpl$$2(),b=m.firstChild;return insert(m,createComponent(Accordion,{collapsible:!0,get class(){return styles.list},get value(){return[l().toString()]},onChange:y,get children(){return createComponent(For,{get each(){return i()},children:(g,w)=>createComponent(n,{existingData:g,onChange:S=>i()[w()]=S,key:w,onRemove:()=>p(w())})})}}),b),addEventListener(b,"click",t,!0),insert(m,r!==void 0&&(()=>{var g=_tmpl$2$1();return g.$$click=h,insert(g,r),createRenderEffect(()=>className(g,[styles.addButton,"button"].join(" "))),g})(),null),insert(m,e!==void 0&&createComponent(SubmitButton,{get className(){return styles.submitButton},onSubmit:f}),null),createRenderEffect(g=>{var w=styles.listPage,S=[styles.backButton,"button"].join(" ");return w!==g.e&&className(m,g.e=w),S!==g.t&&className(b,g.t=S),g},{e:void 0,t:void 0}),m})()}delegateEvents(["click"]);function CarsPage({availableGroups:e,onSubmit:t,onBack:n,existingCars:r}){function o(s){return createComponent(CarCollapsible,mergeProps(s,{availableGroups:e}))}return createComponent(ListAccordion,{existingData:r,addText:"Add car",onSubmit:t,onBack:n,ListElements:o})}var StepType=(e=>(e.start="start",e.job="job",e.pickup="pickup",e.delivery="delivery",e.break="break",e.end="end",e))(StepType||{});class ParsedRoute{Vehicle;PicksUp;Destination;constructor(t,n,r,o){this.Vehicle=n[t.vehicle],this.PicksUp=t.steps.filter(s=>s.type===StepType.job).map(s=>r[s.id]),this.PicksUp[0].id===this.Vehicle.StartsWith.id&&this.PicksUp.splice(0,1),this.Destination=o}}function RequestSent({groups:e,cars:t,dest:n,onDataRecieved:r}){function o(){const s=e.map((a,l)=>a.GetRequestJob(l)),i=t.map((a,l)=>a.GetVehicleRequest(l,n));return{jobs:s,vehicles:i}}return onMount(async()=>{const s=o(),a=(await axios$1.post("https://api.openrouteservice.org/optimization",s,{headers:{Authorization:MapAPIKey}})).data;r(a.routes.map(l=>new ParsedRoute(l,t,e,n)))}),[]}var _tmpl$$1=template("<ol><li>Starts with <!> at </li><li>Arrives at "),_tmpl$2=template("<li>Picks up <!> at ");function RouteCollapsible({existingData:e,key:t}){if(e===void 0)throw new Error("A route must be provided");return createComponent(Accordion.Item,{get value(){return t().toString()},class:"collapsibleContainer",get children(){return[createComponent(Accordion.Header,{class:"header",get children(){return createComponent(Accordion.Trigger,{class:"trigger",get children(){return e.Vehicle.StartsWith.name}})}}),createComponent(Accordion.Content,{class:"collapsible",get children(){var n=_tmpl$$1(),r=n.firstChild,o=r.firstChild,s=o.nextSibling;s.nextSibling;var i=r.nextSibling;return i.firstChild,insert(r,()=>e.Vehicle.StartsWith.name,s),insert(r,()=>e.Vehicle.StartsWith.location.label,null),insert(n,createComponent(For,{get each(){return e.PicksUp},children:a=>(()=>{var l=_tmpl$2(),c=l.firstChild,u=c.nextSibling;return u.nextSibling,insert(l,()=>a.name,u),insert(l,()=>a.location.label,null),l})()}),i),insert(i,()=>e.Destination.label,null),n}})]}})}function RoutesPage({OnBack:e,routes:t}){return createComponent(ListAccordion,{ListElements:RouteCollapsible,existingData:t,onBack:e})}var _tmpl$=template("<div><main>");const GroupsPage=lazy(async()=>await __vitePreload(()=>import("./Groups-d1cb48e6.js"),["assets/Groups-d1cb48e6.js","assets/Groups-74ede027.css"])),App=()=>{const[e,t]=createSignal(0),n=()=>Destination({onSubmitDest:a,currentDest:r});let r,o=[],s=[],i=[];function a(p){r=p,t(1)}function l(p){o=p,t(2)}function c(p){s=p,t(3)}function u(p){i=p,t(4),console.log(i)}function d(){e()===4?t(2):t(e()-1)}const h=new Map;return h.set(0,n),h.set(1,()=>GroupsPage({onBack:d,onSubmit:l,existingGroups:o})),h.set(2,()=>CarsPage({onSubmit:c,availableGroups:o,onBack:d,existingCars:s})),h.set(3,()=>RequestSent({groups:o,cars:s,dest:r,onDataRecieved:u})),h.set(4,()=>RoutesPage({OnBack:d,routes:i})),createComponent(AppContextProvider,{get children(){var p=_tmpl$(),f=p.firstChild;return insert(f,createComponent(Dynamic,{get component(){return h.get(e())||n}})),createRenderEffect(y=>{var m=styles$3.App,b=styles$3.mainBody;return m!==y.e&&className(p,y.e=m),b!==y.t&&className(f,y.t=b),y},{e:void 0,t:void 0}),p}})},root=document.getElementById("root");render(()=>createComponent(App,{}),root);export{Accordion as A,Button as B,CountPicker as C,FormControlDescription as F,ListAccordion as L,Polymorphic as P,__export as _,FormControlErrorMessage as a,FormControlLabel as b,createComponent as c,mergeDefaultProps as d,FORM_CONTROL_FIELD_PROP_NAMES as e,createFormControlField as f,composeEventHandlers as g,createUniqueId as h,FORM_CONTROL_PROP_NAMES as i,createControllableSignal as j,createFormControl as k,createFormResetListener as l,mergeProps as m,mergeRefs as n,access$1 as o,FormControlContext as p,createEffect as q,on as r,splitProps as s,createContext as t,useFormControlContext as u,useContext as v,createGenerateId as w,createSignal as x,AddressPicker as y};
